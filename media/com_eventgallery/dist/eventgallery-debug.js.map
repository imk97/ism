{"version":3,"sources":["webpack://Eventgallery/./node_modules/@glidejs/glide/dist/glide.modular.esm.js","webpack://Eventgallery/./common/js/EventgalleryTools.js","webpack://Eventgallery/./common/js/Helpers.js","webpack://Eventgallery/./eventgallery.js","webpack://Eventgallery/./frontend/js/EventgalleryBehavior.js","webpack://Eventgallery/./frontend/js/EventgalleryCart.js","webpack://Eventgallery/./frontend/js/EventgalleryCheckout.js","webpack://Eventgallery/./frontend/js/EventgalleryEventsList.js","webpack://Eventgallery/./frontend/js/EventgalleryEventsTiles.js","webpack://Eventgallery/./frontend/js/EventgalleryGooglePhotosProcessor.js","webpack://Eventgallery/./frontend/js/EventgalleryImage.js","webpack://Eventgallery/./frontend/js/EventgalleryImageList.js","webpack://Eventgallery/./frontend/js/EventgalleryJSGallery2.js","webpack://Eventgallery/./frontend/js/EventgalleryLazyload.js","webpack://Eventgallery/./frontend/js/EventgalleryRow.js","webpack://Eventgallery/./frontend/js/EventgallerySizeCalculator.js","webpack://Eventgallery/./frontend/js/EventgallerySocialShareButton.js","webpack://Eventgallery/./frontend/js/EventgallerySquareList.js","webpack://Eventgallery/./frontend/js/EventgalleryTilesCollection.js","webpack://Eventgallery/./frontend/js/EventgalleryTouch.js","webpack://Eventgallery/./frontend/js/Modules.js","webpack://Eventgallery/./frontend/js/Overlay.js","webpack://Eventgallery/./frontend/js/PhotoSwipeGallery.js","webpack://Eventgallery/./frontend/js/PhotoSwipeGallerySlide.js","webpack://Eventgallery/./frontend/js/SlideShow.js","webpack://Eventgallery/./frontend/js/URLHelper.js","webpack://Eventgallery/./frontend/js/glide_modules/anchor.js","webpack://Eventgallery/./frontend/js/slider/SliderOptions.js","webpack://Eventgallery/./frontend/js/slider/SliderStarter.js","webpack://Eventgallery/./frontend/js/slider/SliderTransformator.js","webpack://Eventgallery/./frontend/js/utils/ElementSize.js","webpack://Eventgallery/./frontend/js/utils/camelCaseConverter.js","webpack://Eventgallery/./frontend/js/utils/eventshandler.js","webpack://Eventgallery/./frontend/js/utils/units.js","webpack://Eventgallery/./photoswipe/photoswipe-ui-default.js","webpack://Eventgallery/./photoswipe/photoswipe.js","webpack://Eventgallery/./node_modules/custom-event-polyfill/polyfill.js","webpack://Eventgallery/./frontend/less/eventgallery.less?0b79","webpack://Eventgallery/./frontend/less/font-awesome/font-awesome.less?1b04","webpack://Eventgallery/./photoswipe/default-skin/default-skin.css?32d2","webpack://Eventgallery/./photoswipe/photoswipe.css?2bec","webpack://Eventgallery/./frontend/js/Polyfill.ts","webpack://Eventgallery/webpack/bootstrap","webpack://Eventgallery/webpack/runtime/compat get default export","webpack://Eventgallery/webpack/runtime/define property getters","webpack://Eventgallery/webpack/runtime/hasOwnProperty shorthand","webpack://Eventgallery/webpack/runtime/make namespace object","webpack://Eventgallery/webpack/startup"],"names":["window","Eventgallery","eventgallery","jQuery","Tools","mergeObjects","calcBorderWidth","addUrlHashParameter","getUrlHashParameterValue","removeUrlHashParameter","addUrlParameter","removeUrlParameter","setCSSStyle","removeElement","array","elm","index","indexOf","splice","defaults","options","key","elements","properties","sum","i","length","j","value","parseFloat","css","isNaN","initialUrl","url","fragments","split","urlpart","hashparts","result","push","encodeURIComponent","join","prefix","replace","newHashParts","urlparts","pars","nodes","style","getParents","node","parents","parentElement","parent","serializeForm","form","serialized","inputElements","querySelectorAll","field","name","disabled","type","n","selected","checked","require","document","ready","triggerLazyLoading","EventgalleryLazyload","each","container","$container","$thumbnails","find","rowHeightPercentage","imagesetContainer","first","imageset","initComplete","resizeStart","resizeComplete","trigger","EventsList","eventgalleryTilesCollection","tilesOptions","tiles","tilesContainer","TilesCollection","calculate","addEventListener","EventsTiles","adjustMode","gridOptions","thumbSelector","thumbContainerSelector","$imagesetContainer","rowHeight","data","rowHeightJitter","firstImageRowHeight","doFillLastRow","Imagelist","SquareList","click","e","$target","target","closest","prop","on","preventDefault","stopPropagation","link","attr","location","href","lightbox","PhotoSwipeGallery","initPhotoSwipe","item","contentId","getAttribute","overlay","Overlay","openOverlay","getElementById","innerHTML","EventGalleryLightboxConfiguration","doPreventRightClick","googlePhotosProcessor","GooglePhotosProcessor","dispatchEvent","Polyfill","sliderElements","sliderStarter","SliderStarter","timer","start","clearTimeout","setTimeout","Cart","newOptions","cart","isMultiline","buttonShowType","emptyCartSelector","cartSelector","cartItemContainerSelector","cartItemsSelector","cartItemSelector","cartCountSelector","buttonDownSelector","buttonUpSelector","cartItemsMinHeight","removeUrl","add2cartUrl","getCartUrl","removeLinkTitle","initialize","prototype","slideUp","animate","height","slideDown","proxy","event","$document","off","updateQuantity","openCart","quantityPlus","quantityMinus","removeFromCart","populateCart","updateCart","EventGalleryCartConfiguration","add2carturl","$button","tagName","updateCartItemContainer","y","currentObject","posY","position","top","down","up","linksOnly","cartHTML","html","addClass","removeClass","id","folder","file","count","imagetag","lineitemid","undefined","reload","getJSON","json","doRequest","$inputFild","imagetypeid","quantity","parseInt","val","fieldName","inputField","currentVal","maxOrderQuantity","change","linkElement","iconElement","children","switchStates","countryId","selectedIndex","stateId","stateField","optGroups","console","log","optGroup","display","selectedStateOption","call","constructor","processList","width","images","Math","ceil","setSize","newHeight","round","newWidth","LOADING_MATCHER","MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE","albumUrl","albumsUrl","EventGalleryGooglePhotosConfiguration","imageAddedCallback","processImages","removeEventListener","albums","_groupByAlbum","_collectHTMLElements","_markImagesAsInProgress","_getMainImageDataFromServer","htmlCollection","getElementsByTagName","foundImageHTMLElements","filter","img","backgroundImage","dataSrc","src","foundLinkHTMLElements","concat","a","rel","foldername","album","forEach","parsedHTMLElement","getHTMLElement","setAttribute","htmlElements","Map","imageHTMLElement","_parseHTMLElement","updateParameters","parameters","get","set","htmlElement","ParsedImageHTMLElement","ParsedLinkHTMLElement","_doAlbumRequest","fetch","then","response","_processAlbumResult","_replaceImages","albumsWithMainImagesOnly","_filterForAlbumsWithMainImageOnly","size","_doAlbumsRequest","_getAlbumDataFromServer","_processAlbumsResult","newAlbums","mainImages","image","isMainImage","serverResult","parsedImageHTMLElement","imageUrl","getFile","replaceElementLinks","isOpen","getCurrentSlide","thumbnailContainer","_gallery","close","ParsedHTMLElement","attributeNames","Set","styleAttributeNames","parameterString","substring","URLHelper","updateParametersWithUrl","getImageUrl","getWidth","Image","tag","calculatedWidth","calcSize","glueLeft","glueRight","glueTop","glueBottom","getImageTagHeight","getComputedStyle","isFlickr","ratio","sizeCalculator","SizeCalculator","backgroundImageStyle","secret","secret_o","secret_h","secret_k","farm","server","getFlickrURL","googleWidth","getSize","adjustImageURL","minImageWidth","eventgalleryPageWidth","images_tags","eventgalleryTimer","new_width","getRowWidth","rowWidth","floor","imagesToProcess","slice","shift","imageHeight","imageWidth","rowHeightForRightSideImages","maxWidth","maxHeight","adjustHeight","generateRows","heightJitter","numberOfRowsToCreate","finalRows","currentRow","Row","addSuccessfull","add","processRow","isLastRow","JSGallery2","thumbs","bigImageContainer","pageContainer","pages","running","currentPageNumber","blockKeys","imagesPerFirstPage","imagesPerPage","bigImage","convertThumbs","lastPage","initialIndex","createControls","createGallerySlides","gotoPage","unBlockKeys","selectByIndex","slides","thumbContainer","lightboxLinkElement","newSrc","title","decodeURIComponent","slide","w","h","prevLink","bind","prevImage","mouseleave","mouseLeaveHandler","mouseover","focusControl","zoomLink","nextLink","nextImage","append","showBigImage","showCartButton","add2cartLink","showCartConnector","cartConnectorLink","cartConnectorLinkRel","showSocialMediaButton","socialmediabutton","SocialShareButton","openShareDialog","keydown","keyboardHandler","dragLockToAxis","dragBlockHorizontal","swipeVelocityX","swipeleft","swiperight","tabaction","Touch","addTouch","touchContainerSelector","control","keyCode","getDistanceToMouse","element","s","xDiff","abs","clientX","left","yDiff","clientY","sqrt","pow","resetThumbs","select","selectedContainer","convertThumb","forceReload","deselect","history","pushState","targetPage","activeClass","source","setImage","unbind","currentIndex","openPhotoSwipe","setAfterChangeEventListener","gid","getCurrentIndex","gotoSlide","titleTarget","prevPage","nextPage","zoomImage","pageNumber","selectImage","page","updateHandles","dummy","prevHandle","fadeOut","fadeIn","nextHandle","countHandle","updatePagingBar","currentPage","pageCount","createCountLink","pageSpeed","skipFromRight","skipFromLeft","spaceToRight","spaceToLeft","gallery","myAnchor","myListItem","elementSelector","classForLoaded","classForLoading","IntersectionObserverEntry","Object","defineProperty","intersectionRatio","imageObserver","IntersectionObserver","entries","imgObserver","entry","isIntersecting","lazyImage","dataset","createBackgroundImageUrl","knownImageUrls","includes","classList","remove","createElement","onload","backgroundImageUrl","instance","lazyImages","observe","random","eventgalleryImage","addThisImage","gap","gapToClose","availableSizes","flickrSizes","originalwidth","originalheight","longSideSize","originalLongSideSize","sizeCode","secretString","sizeString","minSizes","getMinSizes","widthOkay","heightOkay","lastItem","boxWidth","boxHeight","originalWidth","originalHeight","DownloadButton","download","body","appendChild","removeChild","ClickableButton","targetPos","offset","myDiv","load","closeFunction","closeFunction2","mouseenter","myDivs","tilesPerRow","tile","columnHeight","columnWidth","outerWidth","$tile","outerHeight","smallestColumn","getSmallestColumn","getHighestColumn","smallestColumnValue","smallestColumnNumber","columnValue","columnNumber","removeTouch","leftAction","rightAction","tabAction","allowScrolling","hDistance","vDistance","hDistanceLast","vDistanceLast","hDistancePercent","vSwipe","hSwipe","hSwipMinDistance","vSwipMinDistance","startCoords","endCoords","winWidth","innerWidth","$","winHeight","innerHeight","originalEvent","targetTouches","pageX","pageY","background","$body","onClosed","onLoad","repositionTimer","windowWidth","dataUrl","onclick","closeOverlay","reposition","startsWith","_getRemoteData","_addContent","_setRositionTimer","force","content","getElementsByClassName","hide","scrollTop","show","callback","ajax","done","PSWP_CONTROLS_MAIN_ELEMENT_CLASS","PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS","PSW_HIDE_CLASS","PSWP_CONTROLS","_isOpen","galleries","getGalleries","values","l","map","hash","thumbnails","getThumbnailContainers","parseThumbnailElement","returnValue","eTarget","srcElement","iconContainer","el","contains","clickedListItem","toUpperCase","getSlideBy","getIndexOfSlide","disableAnimation","fromURL","pswpElement","galleryPIDs","galleryUID","shareEl","downloadEl","add2cartEl","getThumbBoundsFn","thumbnail","pageYScroll","pageYOffset","documentElement","rect","getBoundingClientRect","x","overlayClass","pinchToClose","closeOnVerticalDrag","closeOnScroll","navigationFadeDelay","timeToIdle","timeToIdleOutside","pid","showAnimationDuration","PhotoSwipe","PhotoSwipeUIDefault","init","initSlideShow","listen","appendControlls","_registerClickEvents","hashData","parseHash","onThumbnailsClick","currItem","afterChangeFunction","goTo","items","pop","invalidateCurrItems","updateSize","next","doUseSlideshow","slideShow","SlideShow","setDelay","slideshowSpeed","doUseAutoplay","toggleSlideShowState","eventName","fn","Array","from","tc","thumbnailContainerIsAllowed","input","KEY_CLOSE","KEY_SHARE","KEY_DOWNLOAD","KEY_BUY","KEY_ZOOM","KEY_PREVIOUS","KEY_NEXT","KEY_FULLSCREEN","KEY_PLAYSLIDESHOW","KEY_PAUSESLIDESHOW","controllElements","div","translate","parentNode","_parseHashString","params","vars","pair","imgEl","nodeType","PhotoSwipeGallerySlide","msrc","photoSwipeGallery","_photoSwipeGallery","_SlideShow_Running","_currentTimer","_SlideShow_Delay","_SlideShow_Button","interactionHandler","ontouchstart","_planNextSwitch","_stopSlideshow","_adjustNavigation","delay","_startSlideshow","isForTheFirstSwitch","_nextSlide","nextSlide","urlParameterString","pairs","splittedPair","urlSring","parts","queryParts","parseURLParameter","urlString","Glide","Components","Events","Binder","EventsHandler","prevented","isSwiping","Anchors","mount","_a","Html","wrapper","detach","attach","Transition","after","destroy","SliderOptions","assign","autoplay","slidesElementsSelector","numberOfRowsPerSlide","showNav","_parseOptions","attributes","CamelCaseConverter","sourceGroupElement","sliderTransformator","sliderOptions","_loadOptions","sourceElementSelector","getSlidesElementsSelector","getAutoPlay","doShowNav","numberOfItemsPerSlide","ElementSize","querySelector","getNumberOfRowsPerSlide","SliderTransformator","rootElement","transform","glide","perView","keyboard","Swipe","Controls","Breakpoints","Autoplay","Anchor","Images","sliderRootSelector","sliderGroupSelector","basicMarkup","sourceElements","getSourceElements","sliderRoot","sliderMarkup","createRange","createContextualFragment","controlElement","sliderGroupElement","currentSliderElement","className","domRect","computedStyle","marginLeft","marginRight","containerElement","numberOfRows","getOuterWidth","str","m","listeners","events","closure","capture","isString","isNodeList","isArray","listener","NodeList","isPrototypeOf","pswp","framework","ui","_overlayUIUpdated","_controlsVisible","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_add2cartButton","_add2cartOverlay","_shareModalHidden","_add2cartModalHidden","_initalCloseOnScrollValue","_isIdle","_listen","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_options","_defaultUIOptions","barsSize","bottom","closeElClasses","loadingIndicatorDelay","addCaptionHTMLFn","captionEl","closeEl","fullscreenEl","zoomEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","label","getImageURLForShare","getPageURLForShare","getTextForShare","indexIndicatorSep","fitControlsWidth","_blockControlsTap","_blockControlsTapTimeout","_onControlsTap","mouseUsed","_onIdleMouseMove","uiElement","clickedClass","found","_uiElements","onTap","tapDelay","features","isOldAndroid","_fitControlsInViewport","likelyTouchDevice","screen","_togglePswpClass","cName","_countNumItems","hasOneSlide","getNumItemsFn","_toggleShareModalClass","_toggleShareModal","_updateShareURLs","_toggleAdd2cartModal","isFullscreen","exit","_updateAdd2cartContent","_openWindowPopup","shout","hasAttribute","open","sharingButtons","sharingButton","add2cartButtons","add2cartButton","_hasCloseClass","hasClass","_idleInterval","_idleTimer","_idleIncrement","setIdle","_onMouseLeaveWindow","relatedTarget","toElement","nodeName","_setupFullscreenAPI","getFullscreenAPI","eventK","updateFullscreen","template","_setupLoadingIndicator","_toggleLoadingIndicator","loading","allowProgressiveImg","naturalWidth","_applyNavBarGaps","vGap","bars","createEl","insertBefore","captionSize","clientHeight","_setupIdle","setInterval","_setupHidingControlsDuringGestures","now","hideControls","showControls","pinchControlsHidden","option","onInit","downloadButtons","toggleDesktopZoom","prev","enter","_setupUIElements","classAttr","loopThroughChildElements","sChildren","topBar","getChildByClass","extend","scrollWrap","update","point","initialZoomLevel","getZoomLevel","zoomTo","getDoubleTapZoom","isDown","preventObj","t","test","prevent","onGlobalTap","onMouseOver","clearInterval","hideAnimationDuration","isIdle","updateIndexIndicator","setScrollOffset","getScrollY","detail","pointerType","fitRatio","releasePoint","supportsFullscreen","d","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","dE","api","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","UiClass","methodName","obj","classes","yOffset","reg","RegExp","parentEl","childClassName","firstChild","nextSibling","arraySearch","o1","o2","preventOverwrite","hasOwnProperty","easing","sine","out","k","sin","PI","inOut","cos","cubic","detectFeatures","helperEl","helperStyle","vendor","oldIE","all","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","PointerEvent","navigator","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","isOldIOSPhone","androidversion","androidVersion","isMobileOpera","styleChecks","vendors","styleCheckItem","styleName","charAt","toLowerCase","lastTime","currTime","Date","getTime","timeToCall","max","svg","createElementNS","createSVGRect","evName","_handleEv","handleEvent","self","DOUBLE_TAP_RADIUS","NUM_HOLDERS","allowPanToNext","spacing","bgOpacity","loop","verticalDragRange","showHideOpacity","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","isMouseClick","maxSpreadZoom","modal","scaleMode","_getEmptyPoint","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_currPanDist","_startPanOffset","_panOffset","_upMoveEvents","_downEvents","_globalEventHandlers","_viewportSize","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_currPositionIndex","_offset","_slideSize","_itemHolders","_prevItemIndex","_indexDiff","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_isFixedPosition","_likelyTouchDevice","_modules","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_windowVisibleSize","_renderMaxResolution","_orientationChangeTimeout","_registerModule","module","publicMethods","_getLoopedId","numSlides","_getNumItems","_listeners","_shout","args","arguments","apply","_getCurrentTime","_applyBgOpacity","opacity","_bgOpacity","bg","_applyZoomTransform","styleObj","zoom","_applyCurrentZoomPan","allowRenderResolution","_currZoomElementStyle","_setImageSize","_applyZoomPanToItem","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","p","_mouseMoveTimeout","_onFirstMouseMove","_bindEvents","_unbindEvents","scroll","_isDragging","_calculatePanBounds","bounds","_calculateItemSize","_currPanBounds","_getMinZoomLevel","_getMaxZoomLevel","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","min","_setupTransforms","allow3dTransform","perspective","zoomRatio","_onKeyDown","keydownAction","ctrlKey","altKey","shiftKey","metaKey","_onGlobalClick","_moved","_zoomStarted","_mainScrollAnimating","_verticalDragInitiated","_updatePageScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","easingFn","onUpdate","onComplete","startAnimTime","animloop","viewportSize","isMainScrollAnimating","isDragging","isZooming","_isZooming","applyZoomPan","panX","panY","itemHolders","wrap","resize","orientationchange","clientWidth","oldPhone","animationName","_getItemAt","rootClasses","mainClass","setContent","updateCurrItem","_showOrHide","_showOrHideTimeout","_stopDragUpdateLoop","panTo","diff","updateCurrZoomItem","emulateSetContent","zoomElement","center","needsUpdate","beforeAnimation","diffAbs","tempHolder","unshift","prevItem","windowScrollY","holder","hIndex","cleanSlide","centerPoint","speed","updateFn","initialPanOffset","MIN_SWIPE_DISTANCE","DIRECTION_CHECK_OFFSET","_gestureStartTime","_gestureCheckSpeedTime","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_releaseAnimData","_posPoints","_tempPoint","_isZoomingIn","_oldAndroidTouchEndTimeout","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_isMultitouch","_dragAnimFrame","_mainScrollShifted","_currentPoints","_currPointsDistance","_startPointsDistance","_currCenterPoint","_direction","_isFirstMove","_opacityChanged","_wasOverInitialZoom","_isEqualPoints","_isNearbyPoints","touch0","touch1","_calculatePointsDistance","_dragUpdateLoop","_renderMovement","_canPan","_closestElement","_preventObj","_preventDefaultEventBehaviour","_convertTouchToPoint","identifier","_findCenterOfPoints","pCenter","_pushPosPoint","time","o","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_tempCounter","_getTouchPoints","touches","_panOrMoveMainScroll","panFriction","overDiff","newOffset","startOverDiff","dir","newMainScrollPosition","mainScrollDiff","newPanPos","newMainScrollPos","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_onDragMove","touchesList","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","minusDiff","percent","opacityRatio","mainScrollChanged","_onDragRelease","MSPOINTER_TYPES","touchList","gestureType","changedTouches","releaseTimeDiff","_initDragReleaseAnimationData","calculateSwipeSpeed","initalPanY","initialBgOpacity","itemChanged","_finishSwipeMainScrollGesture","_completeZoomGesture","_completePanGesture","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","itemsDiff","totalShiftDist","isFastLastFlick","nextCircle","animateToX","animateToDist","finishAnimDuration","touchesDistance","destOpacity","initialOpacity","initGestures","addEventNames","pref","move","cancel","maxTouchPoints","msMaxTouchPoints","mousedown","mousemove","mouseup","completeFn","_initialContentSet","thumbBounds","initialLayout","duration","removeAttribute","startAnimation","closeWithRaf","fadeEverything","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","_items","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","_initialIsLoop","_getZeroBounds","_calculateSingleItemPanBounds","realPanElementW","realPanElementH","isInitial","hRatio","vRatio","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","loaded","placeholder","_preloadImage","loadComplete","onerror","_checkForError","cleanUp","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","placeholderClassName","tapTimer","tapReleasePoint","_dispatchTapEvent","origEvent","createEvent","eDetail","initCustomEvent","initTap","onTapStart","onTapRelease","p0","clickedTagName","_wheelDelta","initDesktopZoom","setupDesktopZoom","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","newPanX","newPanY","doubleTapZoomLevel","zoomOut","_historyDefaultOptions","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_getHash","_cleanHistoryTimeouts","_parseItemIndexFromURL","searchfor","_updateHash","newHash","newURL","initHistory","updateURL","onHashChange","returnToOriginal","back","pathname","search"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,yBAAyB;AAC/B;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,yEAAyE,2BAA2B;AACpG,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,EAAE;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA,6CAA6C;AAC7C;AACA;;AAEA;AACA,qCAAqC;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,aAAa;AAC1B,aAAa,SAAS;AACtB;;;AAGA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,QAAQ;AACvB;;AAEA,GAAG;AACH;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,EAAE,WAAW,EAAE;AACzB;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,gBAAgB,SAAS;AACzB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,iBAAiB;AACjB;AACA;AACA,0CAA0C,SAAS;AACnD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,UAAU,GAAG;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,cAAc;AAC7B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,qBAAqB,sDAAsD;AAC3E,uBAAuB,kBAAkB;AACzC;;AAEA;;AAEA;AACA;;AAEA,wBAAwB,iBAAiB;AACzC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;;AAEA,uBAAuB,sBAAsB;AAC7C;AACA;;AAEA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;;AAGA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,aAAa;AAC3B,cAAc,wBAAwB;AACtC,cAAc,SAAS;AACvB,cAAc,eAAe;AAC7B,cAAc;AACd;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,gBAAgB,wBAAwB;AACxC,gBAAgB,eAAe;AAC/B,gBAAgB;AAChB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA,qBAAqB,yBAAyB;AAC9C;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,SAAS;AACzB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,gBAAgB;;AAErD;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,uBAAuB,uBAAuB;AAC9C;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA,uBAAuB,uBAAuB;AAC9C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA,qCAAqC,gBAAgB;;AAErD;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW;AACX;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iIAAiI;AACjI;AACA,GAAG;AACH;AACA,CAAC;;AAED,iEAAe,OAAO,EAAC;AACuI;;;;;;;;;;;;;;;;;AC1kH9J;AAUAA,MAAM,CAACC,YAAP,GAAsBD,MAAM,CAACC,YAAP,IAAuB,EAA7C;;AACA,IAAI,OAAOC,YAAP,KAAwB,WAA5B,EAAyC;AACrCD,cAAY,CAACE,MAAb,GAAsBD,YAAY,CAACC,MAAnC;AACH;;AAEDF,YAAY,CAACG,KAAb,GAAqB,EAArB;AACAH,YAAY,CAACG,KAAb,CAAmBC,YAAnB,GAAkCA,kDAAlC;AACAJ,YAAY,CAACG,KAAb,CAAmBE,eAAnB,GAAqCA,qDAArC;AACAL,YAAY,CAACG,KAAb,CAAm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","file":"eventgallery-debug.js","sourcesContent":["/*!\n * Glide.js v3.4.1\n * (c) 2013-2019 Jędrzej Chałubek <jedrzej.chalubek@gmail.com> (http://jedrzejchalubek.com/)\n * Released under the MIT License.\n */\n\nvar defaults = {\n  /**\n   * Type of the movement.\n   *\n   * Available types:\n   * `slider` - Rewinds slider to the start/end when it reaches the first or last slide.\n   * `carousel` - Changes slides without starting over when it reaches the first or last slide.\n   *\n   * @type {String}\n   */\n  type: 'slider',\n\n  /**\n   * Start at specific slide number defined with zero-based index.\n   *\n   * @type {Number}\n   */\n  startAt: 0,\n\n  /**\n   * A number of slides visible on the single viewport.\n   *\n   * @type {Number}\n   */\n  perView: 1,\n\n  /**\n   * Focus currently active slide at a specified position in the track.\n   *\n   * Available inputs:\n   * `center` - Current slide will be always focused at the center of a track.\n   * `0,1,2,3...` - Current slide will be focused on the specified zero-based index.\n   *\n   * @type {String|Number}\n   */\n  focusAt: 0,\n\n  /**\n   * A size of the gap added between slides.\n   *\n   * @type {Number}\n   */\n  gap: 10,\n\n  /**\n   * Change slides after a specified interval. Use `false` for turning off autoplay.\n   *\n   * @type {Number|Boolean}\n   */\n  autoplay: false,\n\n  /**\n   * Stop autoplay on mouseover event.\n   *\n   * @type {Boolean}\n   */\n  hoverpause: true,\n\n  /**\n   * Allow for changing slides with left and right keyboard arrows.\n   *\n   * @type {Boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Stop running `perView` number of slides from the end. Use this\n   * option if you don't want to have an empty space after\n   * a slider. Works only with `slider` type and a\n   * non-centered `focusAt` setting.\n   *\n   * @type {Boolean}\n   */\n  bound: false,\n\n  /**\n   * Minimal swipe distance needed to change the slide. Use `false` for turning off a swiping.\n   *\n   * @type {Number|Boolean}\n   */\n  swipeThreshold: 80,\n\n  /**\n   * Minimal mouse drag distance needed to change the slide. Use `false` for turning off a dragging.\n   *\n   * @type {Number|Boolean}\n   */\n  dragThreshold: 120,\n\n  /**\n   * A maximum number of slides to which movement will be made on swiping or dragging. Use `false` for unlimited.\n   *\n   * @type {Number|Boolean}\n   */\n  perTouch: false,\n\n  /**\n   * Moving distance ratio of the slides on a swiping and dragging.\n   *\n   * @type {Number}\n   */\n  touchRatio: 0.5,\n\n  /**\n   * Angle required to activate slides moving on swiping or dragging.\n   *\n   * @type {Number}\n   */\n  touchAngle: 45,\n\n  /**\n   * Duration of the animation in milliseconds.\n   *\n   * @type {Number}\n   */\n  animationDuration: 400,\n\n  /**\n   * Allows looping the `slider` type. Slider will rewind to the first/last slide when it's at the start/end.\n   *\n   * @type {Boolean}\n   */\n  rewind: true,\n\n  /**\n   * Duration of the rewinding animation of the `slider` type in milliseconds.\n   *\n   * @type {Number}\n   */\n  rewindDuration: 800,\n\n  /**\n   * Easing function for the animation.\n   *\n   * @type {String}\n   */\n  animationTimingFunc: 'cubic-bezier(.165, .840, .440, 1)',\n\n  /**\n   * Throttle costly events at most once per every wait milliseconds.\n   *\n   * @type {Number}\n   */\n  throttle: 10,\n\n  /**\n   * Moving direction mode.\n   *\n   * Available inputs:\n   * - 'ltr' - left to right movement,\n   * - 'rtl' - right to left movement.\n   *\n   * @type {String}\n   */\n  direction: 'ltr',\n\n  /**\n   * The distance value of the next and previous viewports which\n   * have to peek in the current view. Accepts number and\n   * pixels as a string. Left and right peeking can be\n   * set up separately with a directions object.\n   *\n   * For example:\n   * `100` - Peek 100px on the both sides.\n   * { before: 100, after: 50 }` - Peek 100px on the left side and 50px on the right side.\n   *\n   * @type {Number|String|Object}\n   */\n  peek: 0,\n\n  /**\n   * Collection of options applied at specified media breakpoints.\n   * For example: display two slides per view under 800px.\n   * `{\n   *   '800px': {\n   *     perView: 2\n   *   }\n   * }`\n   */\n  breakpoints: {},\n\n  /**\n   * Collection of internally used HTML classes.\n   *\n   * @todo Refactor `slider` and `carousel` properties to single `type: { slider: '', carousel: '' }` object\n   * @type {Object}\n   */\n  classes: {\n    direction: {\n      ltr: 'glide--ltr',\n      rtl: 'glide--rtl'\n    },\n    slider: 'glide--slider',\n    carousel: 'glide--carousel',\n    swipeable: 'glide--swipeable',\n    dragging: 'glide--dragging',\n    cloneSlide: 'glide__slide--clone',\n    activeNav: 'glide__bullet--active',\n    activeSlide: 'glide__slide--active',\n    disabledArrow: 'glide__arrow--disabled'\n  }\n};\n\n/**\n * Outputs warning message to the bowser console.\n *\n * @param  {String} msg\n * @return {Void}\n */\nfunction warn(msg) {\n  console.error(\"[Glide warn]: \" + msg);\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * Converts value entered as number\n * or string to integer value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toInt(value) {\n  return parseInt(value);\n}\n\n/**\n * Converts value entered as number\n * or string to flat value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toFloat(value) {\n  return parseFloat(value);\n}\n\n/**\n * Indicates whether the specified value is a string.\n *\n * @param  {*}   value\n * @return {Boolean}\n */\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Indicates whether the specified value is an object.\n *\n * @param  {*} value\n * @return {Boolean}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction isObject(value) {\n  var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\n  return type === 'function' || type === 'object' && !!value; // eslint-disable-line no-mixed-operators\n}\n\n/**\n * Indicates whether the specified value is a number.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\n\n/**\n * Indicates whether the specified value is a function.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Indicates whether the specified value is undefined.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Indicates whether the specified value is an array.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isArray(value) {\n  return value.constructor === Array;\n}\n\n/**\n * Creates and initializes specified collection of extensions.\n * Each extension receives access to instance of glide and rest of components.\n *\n * @param {Object} glide\n * @param {Object} extensions\n *\n * @returns {Object}\n */\nfunction mount(glide, extensions, events) {\n  var components = {};\n\n  for (var name in extensions) {\n    if (isFunction(extensions[name])) {\n      components[name] = extensions[name](glide, components, events);\n    } else {\n      warn('Extension must be a function');\n    }\n  }\n\n  for (var _name in components) {\n    if (isFunction(components[_name].mount)) {\n      components[_name].mount();\n    }\n  }\n\n  return components;\n}\n\n/**\n * Defines getter and setter property on the specified object.\n *\n * @param  {Object} obj         Object where property has to be defined.\n * @param  {String} prop        Name of the defined property.\n * @param  {Object} definition  Get and set definitions for the property.\n * @return {Void}\n */\nfunction define(obj, prop, definition) {\n  Object.defineProperty(obj, prop, definition);\n}\n\n/**\n * Sorts aphabetically object keys.\n *\n * @param  {Object} obj\n * @return {Object}\n */\nfunction sortKeys(obj) {\n  return Object.keys(obj).sort().reduce(function (r, k) {\n    r[k] = obj[k];\n\n    return r[k], r;\n  }, {});\n}\n\n/**\n * Merges passed settings object with default options.\n *\n * @param  {Object} defaults\n * @param  {Object} settings\n * @return {Object}\n */\nfunction mergeOptions(defaults, settings) {\n  var options = _extends({}, defaults, settings);\n\n  // `Object.assign` do not deeply merge objects, so we\n  // have to do it manually for every nested object\n  // in options. Although it does not look smart,\n  // it's smaller and faster than some fancy\n  // merging deep-merge algorithm script.\n  if (settings.hasOwnProperty('classes')) {\n    options.classes = _extends({}, defaults.classes, settings.classes);\n\n    if (settings.classes.hasOwnProperty('direction')) {\n      options.classes.direction = _extends({}, defaults.classes.direction, settings.classes.direction);\n    }\n  }\n\n  if (settings.hasOwnProperty('breakpoints')) {\n    options.breakpoints = _extends({}, defaults.breakpoints, settings.breakpoints);\n  }\n\n  return options;\n}\n\nvar EventsBus = function () {\n  /**\n   * Construct a EventBus instance.\n   *\n   * @param {Object} events\n   */\n  function EventsBus() {\n    var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBus);\n\n    this.events = events;\n    this.hop = events.hasOwnProperty;\n  }\n\n  /**\n   * Adds listener to the specifed event.\n   *\n   * @param {String|Array} event\n   * @param {Function} handler\n   */\n\n\n  createClass(EventsBus, [{\n    key: 'on',\n    value: function on(event, handler) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.on(event[i], handler);\n        }\n      }\n\n      // Create the event's object if not yet created\n      if (!this.hop.call(this.events, event)) {\n        this.events[event] = [];\n      }\n\n      // Add the handler to queue\n      var index = this.events[event].push(handler) - 1;\n\n      // Provide handle back for removal of event\n      return {\n        remove: function remove() {\n          delete this.events[event][index];\n        }\n      };\n    }\n\n    /**\n     * Runs registered handlers for specified event.\n     *\n     * @param {String|Array} event\n     * @param {Object=} context\n     */\n\n  }, {\n    key: 'emit',\n    value: function emit(event, context) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.emit(event[i], context);\n        }\n      }\n\n      // If the event doesn't exist, or there's no handlers in queue, just leave\n      if (!this.hop.call(this.events, event)) {\n        return;\n      }\n\n      // Cycle through events queue, fire!\n      this.events[event].forEach(function (item) {\n        item(context || {});\n      });\n    }\n  }]);\n  return EventsBus;\n}();\n\nvar Glide = function () {\n  /**\r\n   * Construct glide.\r\n   *\r\n   * @param  {String} selector\r\n   * @param  {Object} options\r\n   */\n  function Glide(selector) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Glide);\n\n    this._c = {};\n    this._t = [];\n    this._e = new EventsBus();\n\n    this.disabled = false;\n    this.selector = selector;\n    this.settings = mergeOptions(defaults, options);\n    this.index = this.settings.startAt;\n  }\n\n  /**\r\n   * Initializes glide.\r\n   *\r\n   * @param {Object} extensions Collection of extensions to initialize.\r\n   * @return {Glide}\r\n   */\n\n\n  createClass(Glide, [{\n    key: 'mount',\n    value: function mount$$1() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._e.emit('mount.before');\n\n      if (isObject(extensions)) {\n        this._c = mount(this, extensions, this._e);\n      } else {\n        warn('You need to provide a object on `mount()`');\n      }\n\n      this._e.emit('mount.after');\n\n      return this;\n    }\n\n    /**\r\n     * Collects an instance `translate` transformers.\r\n     *\r\n     * @param  {Array} transformers Collection of transformers.\r\n     * @return {Void}\r\n     */\n\n  }, {\n    key: 'mutate',\n    value: function mutate() {\n      var transformers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (isArray(transformers)) {\n        this._t = transformers;\n      } else {\n        warn('You need to provide a array on `mutate()`');\n      }\n\n      return this;\n    }\n\n    /**\r\n     * Updates glide with specified settings.\r\n     *\r\n     * @param {Object} settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.settings = mergeOptions(this.settings, settings);\n\n      if (settings.hasOwnProperty('startAt')) {\n        this.index = settings.startAt;\n      }\n\n      this._e.emit('update');\n\n      return this;\n    }\n\n    /**\r\n     * Change slide with specified pattern. A pattern must be in the special format:\r\n     * `>` - Move one forward\r\n     * `<` - Move one backward\r\n     * `={i}` - Go to {i} zero-based slide (eq. '=1', will go to second slide)\r\n     * `>>` - Rewinds to end (last slide)\r\n     * `<<` - Rewinds to start (first slide)\r\n     *\r\n     * @param {String} pattern\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'go',\n    value: function go(pattern) {\n      this._c.Run.make(pattern);\n\n      return this;\n    }\n\n    /**\r\n     * Move track by specified distance.\r\n     *\r\n     * @param {String} distance\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'move',\n    value: function move(distance) {\n      this._c.Transition.disable();\n      this._c.Move.make(distance);\n\n      return this;\n    }\n\n    /**\r\n     * Destroy instance and revert all changes done by this._c.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._e.emit('destroy');\n\n      return this;\n    }\n\n    /**\r\n     * Start instance autoplaying.\r\n     *\r\n     * @param {Boolean|Number} interval Run autoplaying with passed interval regardless of `autoplay` settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var interval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (interval) {\n        this.settings.autoplay = interval;\n      }\n\n      this._e.emit('play');\n\n      return this;\n    }\n\n    /**\r\n     * Stop instance autoplaying.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this._e.emit('pause');\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a idle status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.disabled = true;\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a active status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'enable',\n    value: function enable() {\n      this.disabled = false;\n\n      return this;\n    }\n\n    /**\r\n     * Adds cuutom event listener with handler.\r\n     *\r\n     * @param  {String|Array} event\r\n     * @param  {Function} handler\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'on',\n    value: function on(event, handler) {\n      this._e.on(event, handler);\n\n      return this;\n    }\n\n    /**\r\n     * Checks if glide is a precised type.\r\n     *\r\n     * @param  {String} name\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'isType',\n    value: function isType(name) {\n      return this.settings.type === name;\n    }\n\n    /**\r\n     * Gets value of the core options.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'settings',\n    get: function get$$1() {\n      return this._o;\n    }\n\n    /**\r\n     * Sets value of the core options.\r\n     *\r\n     * @param  {Object} o\r\n     * @return {Void}\r\n     */\n    ,\n    set: function set$$1(o) {\n      if (isObject(o)) {\n        this._o = o;\n      } else {\n        warn('Options must be an `object` instance.');\n      }\n    }\n\n    /**\r\n     * Gets current index of the slider.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'index',\n    get: function get$$1() {\n      return this._i;\n    }\n\n    /**\r\n     * Sets current index a slider.\r\n     *\r\n     * @return {Object}\r\n     */\n    ,\n    set: function set$$1(i) {\n      this._i = toInt(i);\n    }\n\n    /**\r\n     * Gets type name of the slider.\r\n     *\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: 'type',\n    get: function get$$1() {\n      return this.settings.type;\n    }\n\n    /**\r\n     * Gets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'disabled',\n    get: function get$$1() {\n      return this._d;\n    }\n\n    /**\r\n     * Sets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n    ,\n    set: function set$$1(status) {\n      this._d = !!status;\n    }\n  }]);\n  return Glide;\n}();\n\nfunction Run (Glide, Components, Events) {\n  var Run = {\n    /**\n     * Initializes autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this._o = false;\n    },\n\n\n    /**\n     * Makes glides running based on the passed moving schema.\n     *\n     * @param {String} move\n     */\n    make: function make(move) {\n      var _this = this;\n\n      if (!Glide.disabled) {\n        Glide.disable();\n\n        this.move = move;\n\n        Events.emit('run.before', this.move);\n\n        this.calculate();\n\n        Events.emit('run', this.move);\n\n        Components.Transition.after(function () {\n          if (_this.isStart()) {\n            Events.emit('run.start', _this.move);\n          }\n\n          if (_this.isEnd()) {\n            Events.emit('run.end', _this.move);\n          }\n\n          if (_this.isOffset('<') || _this.isOffset('>')) {\n            _this._o = false;\n\n            Events.emit('run.offset', _this.move);\n          }\n\n          Events.emit('run.after', _this.move);\n\n          Glide.enable();\n        });\n      }\n    },\n\n\n    /**\n     * Calculates current index based on defined move.\n     *\n     * @return {Void}\n     */\n    calculate: function calculate() {\n      var move = this.move,\n          length = this.length;\n      var steps = move.steps,\n          direction = move.direction;\n\n\n      var countableSteps = isNumber(toInt(steps)) && toInt(steps) !== 0;\n\n      switch (direction) {\n        case '>':\n          if (steps === '>') {\n            Glide.index = length;\n          } else if (this.isEnd()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = 0;\n            }\n          } else if (countableSteps) {\n            Glide.index += Math.min(length - Glide.index, -toInt(steps));\n          } else {\n            Glide.index++;\n          }\n          break;\n\n        case '<':\n          if (steps === '<') {\n            Glide.index = 0;\n          } else if (this.isStart()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = length;\n            }\n          } else if (countableSteps) {\n            Glide.index -= Math.min(Glide.index, toInt(steps));\n          } else {\n            Glide.index--;\n          }\n          break;\n\n        case '=':\n          Glide.index = steps;\n          break;\n\n        default:\n          warn('Invalid direction pattern [' + direction + steps + '] has been used');\n          break;\n      }\n    },\n\n\n    /**\n     * Checks if we are on the first slide.\n     *\n     * @return {Boolean}\n     */\n    isStart: function isStart() {\n      return Glide.index === 0;\n    },\n\n\n    /**\n     * Checks if we are on the last slide.\n     *\n     * @return {Boolean}\n     */\n    isEnd: function isEnd() {\n      return Glide.index === this.length;\n    },\n\n\n    /**\n     * Checks if we are making a offset run.\n     *\n     * @param {String} direction\n     * @return {Boolean}\n     */\n    isOffset: function isOffset(direction) {\n      return this._o && this.move.direction === direction;\n    }\n  };\n\n  define(Run, 'move', {\n    /**\n     * Gets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    get: function get() {\n      return this._m;\n    },\n\n\n    /**\n     * Sets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    set: function set(value) {\n      var step = value.substr(1);\n\n      this._m = {\n        direction: value.substr(0, 1),\n        steps: step ? toInt(step) ? toInt(step) : step : 0\n      };\n    }\n  });\n\n  define(Run, 'length', {\n    /**\n     * Gets value of the running distance based\n     * on zero-indexing number of slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n      var length = Components.Html.slides.length;\n\n      // If the `bound` option is acitve, a maximum running distance should be\n      // reduced by `perView` and `focusAt` settings. Running distance\n      // should end before creating an empty space after instance.\n\n      if (Glide.isType('slider') && settings.focusAt !== 'center' && settings.bound) {\n        return length - 1 - (toInt(settings.perView) - 1) + toInt(settings.focusAt);\n      }\n\n      return length - 1;\n    }\n  });\n\n  define(Run, 'offset', {\n    /**\n     * Gets status of the offsetting flag.\n     *\n     * @return {Boolean}\n     */\n    get: function get() {\n      return this._o;\n    }\n  });\n\n  return Run;\n}\n\n/**\n * Returns a current time.\n *\n * @return {Number}\n */\nfunction now() {\n  return new Date().getTime();\n}\n\n/**\n * Returns a function, that, when invoked, will only be triggered\n * at most once during a given window of time.\n *\n * @param {Function} func\n * @param {Number} wait\n * @param {Object=} options\n * @return {Function}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction throttle(func, wait, options) {\n  var timeout = void 0,\n      context = void 0,\n      args = void 0,\n      result = void 0;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function later() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function throttled() {\n    var at = now();\n    if (!previous && options.leading === false) previous = at;\n    var remaining = wait - (at - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = at;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n\nvar MARGIN_TYPE = {\n  ltr: ['marginLeft', 'marginRight'],\n  rtl: ['marginRight', 'marginLeft']\n};\n\nfunction Gaps (Glide, Components, Events) {\n  var Gaps = {\n    /**\n     * Applies gaps between slides. First and last\n     * slides do not receive it's edge margins.\n     *\n     * @param {HTMLCollection} slides\n     * @return {Void}\n     */\n    apply: function apply(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n        var direction = Components.Direction.value;\n\n        if (i !== 0) {\n          style[MARGIN_TYPE[direction][0]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][0]] = '';\n        }\n\n        if (i !== slides.length - 1) {\n          style[MARGIN_TYPE[direction][1]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][1]] = '';\n        }\n      }\n    },\n\n\n    /**\n     * Removes gaps from the slides.\n     *\n     * @param {HTMLCollection} slides\n     * @returns {Void}\n    */\n    remove: function remove(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n\n        style.marginLeft = '';\n        style.marginRight = '';\n      }\n    }\n  };\n\n  define(Gaps, 'value', {\n    /**\n     * Gets value of the gap.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return toInt(Glide.settings.gap);\n    }\n  });\n\n  define(Gaps, 'grow', {\n    /**\n     * Gets additional dimentions value caused by gaps.\n     * Used to increase width of the slides wrapper.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Gaps.value * (Components.Sizes.length - 1);\n    }\n  });\n\n  define(Gaps, 'reductor', {\n    /**\n     * Gets reduction value caused by gaps.\n     * Used to subtract width of the slides.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var perView = Glide.settings.perView;\n\n      return Gaps.value * (perView - 1) / perView;\n    }\n  });\n\n  /**\n   * Apply calculated gaps:\n   * - after building, so slides (including clones) will receive proper margins\n   * - on updating via API, to recalculate gaps with new options\n   */\n  Events.on(['build.after', 'update'], throttle(function () {\n    Gaps.apply(Components.Html.wrapper.children);\n  }, 30));\n\n  /**\n   * Remove gaps:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Gaps.remove(Components.Html.wrapper.children);\n  });\n\n  return Gaps;\n}\n\n/**\n * Finds siblings nodes of the passed node.\n *\n * @param  {Element} node\n * @return {Array}\n */\nfunction siblings(node) {\n  if (node && node.parentNode) {\n    var n = node.parentNode.firstChild;\n    var matched = [];\n\n    for (; n; n = n.nextSibling) {\n      if (n.nodeType === 1 && n !== node) {\n        matched.push(n);\n      }\n    }\n\n    return matched;\n  }\n\n  return [];\n}\n\n/**\n * Checks if passed node exist and is a valid element.\n *\n * @param  {Element} node\n * @return {Boolean}\n */\nfunction exist(node) {\n  if (node && node instanceof window.HTMLElement) {\n    return true;\n  }\n\n  return false;\n}\n\nvar TRACK_SELECTOR = '[data-glide-el=\"track\"]';\n\nfunction Html (Glide, Components) {\n  var Html = {\n    /**\n     * Setup slider HTML nodes.\n     *\n     * @param {Glide} glide\n     */\n    mount: function mount() {\n      this.root = Glide.selector;\n      this.track = this.root.querySelector(TRACK_SELECTOR);\n      this.slides = Array.prototype.slice.call(this.wrapper.children).filter(function (slide) {\n        return !slide.classList.contains(Glide.settings.classes.cloneSlide);\n      });\n    }\n  };\n\n  define(Html, 'root', {\n    /**\n     * Gets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._r;\n    },\n\n\n    /**\n     * Sets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    set: function set(r) {\n      if (isString(r)) {\n        r = document.querySelector(r);\n      }\n\n      if (exist(r)) {\n        Html._r = r;\n      } else {\n        warn('Root element must be a existing Html node');\n      }\n    }\n  });\n\n  define(Html, 'track', {\n    /**\n     * Gets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._t;\n    },\n\n\n    /**\n     * Sets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    set: function set(t) {\n      if (exist(t)) {\n        Html._t = t;\n      } else {\n        warn('Could not find track element. Please use ' + TRACK_SELECTOR + ' attribute.');\n      }\n    }\n  });\n\n  define(Html, 'wrapper', {\n    /**\n     * Gets node of the slides wrapper.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html.track.children[0];\n    }\n  });\n\n  return Html;\n}\n\nfunction Peek (Glide, Components, Events) {\n  var Peek = {\n    /**\n     * Setups how much to peek based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.peek;\n    }\n  };\n\n  define(Peek, 'value', {\n    /**\n     * Gets value of the peek.\n     *\n     * @returns {Number|Object}\n     */\n    get: function get() {\n      return Peek._v;\n    },\n\n\n    /**\n     * Sets value of the peek.\n     *\n     * @param {Number|Object} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (isObject(value)) {\n        value.before = toInt(value.before);\n        value.after = toInt(value.after);\n      } else {\n        value = toInt(value);\n      }\n\n      Peek._v = value;\n    }\n  });\n\n  define(Peek, 'reductor', {\n    /**\n     * Gets reduction value caused by peek.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var value = Peek.value;\n      var perView = Glide.settings.perView;\n\n      if (isObject(value)) {\n        return value.before / perView + value.after / perView;\n      }\n\n      return value * 2 / perView;\n    }\n  });\n\n  /**\n   * Recalculate peeking sizes on:\n   * - when resizing window to update to proper percents\n   */\n  Events.on(['resize', 'update'], function () {\n    Peek.mount();\n  });\n\n  return Peek;\n}\n\nfunction Move (Glide, Components, Events) {\n  var Move = {\n    /**\n     * Constructs move component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      this._o = 0;\n    },\n\n\n    /**\n     * Calculates a movement value based on passed offset and currently active index.\n     *\n     * @param  {Number} offset\n     * @return {Void}\n     */\n    make: function make() {\n      var _this = this;\n\n      var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.offset = offset;\n\n      Events.emit('move', {\n        movement: this.value\n      });\n\n      Components.Transition.after(function () {\n        Events.emit('move.after', {\n          movement: _this.value\n        });\n      });\n    }\n  };\n\n  define(Move, 'offset', {\n    /**\n     * Gets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Move._o;\n    },\n\n\n    /**\n     * Sets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    set: function set(value) {\n      Move._o = !isUndefined(value) ? toInt(value) : 0;\n    }\n  });\n\n  define(Move, 'translate', {\n    /**\n     * Gets a raw movement value.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Sizes.slideWidth * Glide.index;\n    }\n  });\n\n  define(Move, 'value', {\n    /**\n     * Gets an actual movement value corrected by offset.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var offset = this.offset;\n      var translate = this.translate;\n\n      if (Components.Direction.is('rtl')) {\n        return translate + offset;\n      }\n\n      return translate - offset;\n    }\n  });\n\n  /**\n   * Make movement to proper slide on:\n   * - before build, so glide will start at `startAt` index\n   * - on each standard run to move to newly calculated index\n   */\n  Events.on(['build.before', 'run'], function () {\n    Move.make();\n  });\n\n  return Move;\n}\n\nfunction Sizes (Glide, Components, Events) {\n  var Sizes = {\n    /**\n     * Setups dimentions of slides.\n     *\n     * @return {Void}\n     */\n    setupSlides: function setupSlides() {\n      var width = this.slideWidth + 'px';\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = width;\n      }\n    },\n\n\n    /**\n     * Setups dimentions of slides wrapper.\n     *\n     * @return {Void}\n     */\n    setupWrapper: function setupWrapper(dimention) {\n      Components.Html.wrapper.style.width = this.wrapperSize + 'px';\n    },\n\n\n    /**\n     * Removes applied styles from HTML elements.\n     *\n     * @returns {Void}\n     */\n    remove: function remove() {\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = '';\n      }\n\n      Components.Html.wrapper.style.width = '';\n    }\n  };\n\n  define(Sizes, 'length', {\n    /**\n     * Gets count number of the slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.slides.length;\n    }\n  });\n\n  define(Sizes, 'width', {\n    /**\n     * Gets width value of the glide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.root.offsetWidth;\n    }\n  });\n\n  define(Sizes, 'wrapperSize', {\n    /**\n     * Gets size of the slides wrapper.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.slideWidth * Sizes.length + Components.Gaps.grow + Components.Clones.grow;\n    }\n  });\n\n  define(Sizes, 'slideWidth', {\n    /**\n     * Gets width value of the single slide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.width / Glide.settings.perView - Components.Peek.reductor - Components.Gaps.reductor;\n    }\n  });\n\n  /**\n   * Apply calculated glide's dimensions:\n   * - before building, so other dimentions (e.g. translate) will be calculated propertly\n   * - when resizing window to recalculate sildes dimensions\n   * - on updating via API, to calculate dimensions based on new options\n   */\n  Events.on(['build.before', 'resize', 'update'], function () {\n    Sizes.setupSlides();\n    Sizes.setupWrapper();\n  });\n\n  /**\n   * Remove calculated glide's dimensions:\n   * - on destoting to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Sizes.remove();\n  });\n\n  return Sizes;\n}\n\nfunction Build (Glide, Components, Events) {\n  var Build = {\n    /**\n     * Init glide building. Adds classes, sets\n     * dimensions and setups initial state.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      Events.emit('build.before');\n\n      this.typeClass();\n      this.activeClass();\n\n      Events.emit('build.after');\n    },\n\n\n    /**\n     * Adds `type` class to the glide element.\n     *\n     * @return {Void}\n     */\n    typeClass: function typeClass() {\n      Components.Html.root.classList.add(Glide.settings.classes[Glide.settings.type]);\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    activeClass: function activeClass() {\n      var classes = Glide.settings.classes;\n      var slide = Components.Html.slides[Glide.index];\n\n      if (slide) {\n        slide.classList.add(classes.activeSlide);\n\n        siblings(slide).forEach(function (sibling) {\n          sibling.classList.remove(classes.activeSlide);\n        });\n      }\n    },\n\n\n    /**\n     * Removes HTML classes applied at building.\n     *\n     * @return {Void}\n     */\n    removeClasses: function removeClasses() {\n      var classes = Glide.settings.classes;\n\n      Components.Html.root.classList.remove(classes[Glide.settings.type]);\n\n      Components.Html.slides.forEach(function (sibling) {\n        sibling.classList.remove(classes.activeSlide);\n      });\n    }\n  };\n\n  /**\n   * Clear building classes:\n   * - on destroying to bring HTML to its initial state\n   * - on updating to remove classes before remounting component\n   */\n  Events.on(['destroy', 'update'], function () {\n    Build.removeClasses();\n  });\n\n  /**\n   * Remount component:\n   * - on resizing of the window to calculate new dimentions\n   * - on updating settings via API\n   */\n  Events.on(['resize', 'update'], function () {\n    Build.mount();\n  });\n\n  /**\n   * Swap active class of current slide:\n   * - after each move to the new index\n   */\n  Events.on('move.after', function () {\n    Build.activeClass();\n  });\n\n  return Build;\n}\n\nfunction Clones (Glide, Components, Events) {\n  var Clones = {\n    /**\n     * Create pattern map and collect slides to be cloned.\n     */\n    mount: function mount() {\n      this.items = [];\n\n      if (Glide.isType('carousel')) {\n        this.items = this.collect();\n      }\n    },\n\n\n    /**\n     * Collect clones with pattern.\n     *\n     * @return {Void}\n     */\n    collect: function collect() {\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var slides = Components.Html.slides;\n      var _Glide$settings = Glide.settings,\n          perView = _Glide$settings.perView,\n          classes = _Glide$settings.classes;\n\n\n      var peekIncrementer = +!!Glide.settings.peek;\n      var part = perView + peekIncrementer;\n      var start = slides.slice(0, part);\n      var end = slides.slice(-part);\n\n      for (var r = 0; r < Math.max(1, Math.floor(perView / slides.length)); r++) {\n        for (var i = 0; i < start.length; i++) {\n          var clone = start[i].cloneNode(true);\n\n          clone.classList.add(classes.cloneSlide);\n\n          items.push(clone);\n        }\n\n        for (var _i = 0; _i < end.length; _i++) {\n          var _clone = end[_i].cloneNode(true);\n\n          _clone.classList.add(classes.cloneSlide);\n\n          items.unshift(_clone);\n        }\n      }\n\n      return items;\n    },\n\n\n    /**\n     * Append cloned slides with generated pattern.\n     *\n     * @return {Void}\n     */\n    append: function append() {\n      var items = this.items;\n      var _Components$Html = Components.Html,\n          wrapper = _Components$Html.wrapper,\n          slides = _Components$Html.slides;\n\n\n      var half = Math.floor(items.length / 2);\n      var prepend = items.slice(0, half).reverse();\n      var append = items.slice(half, items.length);\n      var width = Components.Sizes.slideWidth + 'px';\n\n      for (var i = 0; i < append.length; i++) {\n        wrapper.appendChild(append[i]);\n      }\n\n      for (var _i2 = 0; _i2 < prepend.length; _i2++) {\n        wrapper.insertBefore(prepend[_i2], slides[0]);\n      }\n\n      for (var _i3 = 0; _i3 < items.length; _i3++) {\n        items[_i3].style.width = width;\n      }\n    },\n\n\n    /**\n     * Remove all cloned slides.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      var items = this.items;\n\n\n      for (var i = 0; i < items.length; i++) {\n        Components.Html.wrapper.removeChild(items[i]);\n      }\n    }\n  };\n\n  define(Clones, 'grow', {\n    /**\n     * Gets additional dimentions value caused by clones.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return (Components.Sizes.slideWidth + Components.Gaps.value) * Clones.items.length;\n    }\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('update', function () {\n    Clones.remove();\n    Clones.mount();\n    Clones.append();\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('build.before', function () {\n    if (Glide.isType('carousel')) {\n      Clones.append();\n    }\n  });\n\n  /**\n   * Remove clones HTMLElements:\n   * - on destroying, to bring HTML to its initial state\n   */\n  Events.on('destroy', function () {\n    Clones.remove();\n  });\n\n  return Clones;\n}\n\nvar EventsBinder = function () {\n  /**\n   * Construct a EventsBinder instance.\n   */\n  function EventsBinder() {\n    var listeners = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBinder);\n\n    this.listeners = listeners;\n  }\n\n  /**\n   * Adds events listeners to arrows HTML elements.\n   *\n   * @param  {String|Array} events\n   * @param  {Element|Window|Document} el\n   * @param  {Function} closure\n   * @param  {Boolean|Object} capture\n   * @return {Void}\n   */\n\n\n  createClass(EventsBinder, [{\n    key: 'on',\n    value: function on(events, el, closure) {\n      var capture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        this.listeners[events[i]] = closure;\n\n        el.addEventListener(events[i], this.listeners[events[i]], capture);\n      }\n    }\n\n    /**\n     * Removes event listeners from arrows HTML elements.\n     *\n     * @param  {String|Array} events\n     * @param  {Element|Window|Document} el\n     * @param  {Boolean|Object} capture\n     * @return {Void}\n     */\n\n  }, {\n    key: 'off',\n    value: function off(events, el) {\n      var capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        el.removeEventListener(events[i], this.listeners[events[i]], capture);\n      }\n    }\n\n    /**\n     * Destroy collected listeners.\n     *\n     * @returns {Void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      delete this.listeners;\n    }\n  }]);\n  return EventsBinder;\n}();\n\nfunction Resize (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Resize = {\n    /**\n     * Initializes window bindings.\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `rezsize` listener to the window.\n     * It's a costly event, so we are debouncing it.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('resize', window, throttle(function () {\n        Events.emit('resize');\n      }, Glide.settings.throttle));\n    },\n\n\n    /**\n     * Unbinds listeners from the window.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('resize', window);\n    }\n  };\n\n  /**\n   * Remove bindings from window:\n   * - on destroying, to remove added EventListener\n   */\n  Events.on('destroy', function () {\n    Resize.unbind();\n    Binder.destroy();\n  });\n\n  return Resize;\n}\n\nvar VALID_DIRECTIONS = ['ltr', 'rtl'];\nvar FLIPED_MOVEMENTS = {\n  '>': '<',\n  '<': '>',\n  '=': '='\n};\n\nfunction Direction (Glide, Components, Events) {\n  var Direction = {\n    /**\n     * Setups gap value based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.direction;\n    },\n\n\n    /**\n     * Resolves pattern based on direction value\n     *\n     * @param {String} pattern\n     * @returns {String}\n     */\n    resolve: function resolve(pattern) {\n      var token = pattern.slice(0, 1);\n\n      if (this.is('rtl')) {\n        return pattern.split(token).join(FLIPED_MOVEMENTS[token]);\n      }\n\n      return pattern;\n    },\n\n\n    /**\n     * Checks value of direction mode.\n     *\n     * @param {String} direction\n     * @returns {Boolean}\n     */\n    is: function is(direction) {\n      return this.value === direction;\n    },\n\n\n    /**\n     * Applies direction class to the root HTML element.\n     *\n     * @return {Void}\n     */\n    addClass: function addClass() {\n      Components.Html.root.classList.add(Glide.settings.classes.direction[this.value]);\n    },\n\n\n    /**\n     * Removes direction class from the root HTML element.\n     *\n     * @return {Void}\n     */\n    removeClass: function removeClass() {\n      Components.Html.root.classList.remove(Glide.settings.classes.direction[this.value]);\n    }\n  };\n\n  define(Direction, 'value', {\n    /**\n     * Gets value of the direction.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Direction._v;\n    },\n\n\n    /**\n     * Sets value of the direction.\n     *\n     * @param {String} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (VALID_DIRECTIONS.indexOf(value) > -1) {\n        Direction._v = value;\n      } else {\n        warn('Direction value must be `ltr` or `rtl`');\n      }\n    }\n  });\n\n  /**\n   * Clear direction class:\n   * - on destroy to bring HTML to its initial state\n   * - on update to remove class before reappling bellow\n   */\n  Events.on(['destroy', 'update'], function () {\n    Direction.removeClass();\n  });\n\n  /**\n   * Remount component:\n   * - on update to reflect changes in direction value\n   */\n  Events.on('update', function () {\n    Direction.mount();\n  });\n\n  /**\n   * Apply direction class:\n   * - before building to apply class for the first time\n   * - on updating to reapply direction class that may changed\n   */\n  Events.on(['build.before', 'update'], function () {\n    Direction.addClass();\n  });\n\n  return Direction;\n}\n\n/**\n * Reflects value of glide movement.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Rtl (Glide, Components) {\n  return {\n    /**\n     * Negates the passed translate if glide is in RTL option.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Components.Direction.is('rtl')) {\n        return -translate;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `gap` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Gap (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with number in the `gap` settings.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Gaps.value * Glide.index;\n    }\n  };\n}\n\n/**\n * Updates glide movement with width of additional clones width.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Grow (Glide, Components) {\n  return {\n    /**\n     * Adds to the passed translate width of the half of clones.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Clones.grow / 2;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `peek` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Peeking (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with a `peek` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Glide.settings.focusAt >= 0) {\n        var peek = Components.Peek.value;\n\n        if (isObject(peek)) {\n          return translate - peek.before;\n        }\n\n        return translate - peek;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `focusAt` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Focusing (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with index in the `focusAt` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      var gap = Components.Gaps.value;\n      var width = Components.Sizes.width;\n      var focusAt = Glide.settings.focusAt;\n      var slideWidth = Components.Sizes.slideWidth;\n\n      if (focusAt === 'center') {\n        return translate - (width / 2 - slideWidth / 2);\n      }\n\n      return translate - slideWidth * focusAt - gap * focusAt;\n    }\n  };\n}\n\n/**\n * Applies diffrent transformers on translate value.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction mutator (Glide, Components, Events) {\n  /**\n   * Merge instance transformers with collection of default transformers.\n   * It's important that the Rtl component be last on the list,\n   * so it reflects all previous transformations.\n   *\n   * @type {Array}\n   */\n  var TRANSFORMERS = [Gap, Grow, Peeking, Focusing].concat(Glide._t, [Rtl]);\n\n  return {\n    /**\n     * Piplines translate value with registered transformers.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    mutate: function mutate(translate) {\n      for (var i = 0; i < TRANSFORMERS.length; i++) {\n        var transformer = TRANSFORMERS[i];\n\n        if (isFunction(transformer) && isFunction(transformer().modify)) {\n          translate = transformer(Glide, Components, Events).modify(translate);\n        } else {\n          warn('Transformer should be a function that returns an object with `modify()` method');\n        }\n      }\n\n      return translate;\n    }\n  };\n}\n\nfunction Translate (Glide, Components, Events) {\n  var Translate = {\n    /**\n     * Sets value of translate on HTML element.\n     *\n     * @param {Number} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      var transform = mutator(Glide, Components).mutate(value);\n\n      Components.Html.wrapper.style.transform = 'translate3d(' + -1 * transform + 'px, 0px, 0px)';\n    },\n\n\n    /**\n     * Removes value of translate from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transform = '';\n    }\n  };\n\n  /**\n   * Set new translate value:\n   * - on move to reflect index change\n   * - on updating via API to reflect possible changes in options\n   */\n  Events.on('move', function (context) {\n    var gap = Components.Gaps.value;\n    var length = Components.Sizes.length;\n    var width = Components.Sizes.slideWidth;\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('<')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(width * (length - 1));\n      });\n\n      return Translate.set(-width - gap * length);\n    }\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('>')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(0);\n      });\n\n      return Translate.set(width * length + gap * length);\n    }\n\n    return Translate.set(context.movement);\n  });\n\n  /**\n   * Remove translate:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Translate.remove();\n  });\n\n  return Translate;\n}\n\nfunction Transition (Glide, Components, Events) {\n  /**\n   * Holds inactivity status of transition.\n   * When true transition is not applied.\n   *\n   * @type {Boolean}\n   */\n  var disabled = false;\n\n  var Transition = {\n    /**\n     * Composes string of the CSS transition.\n     *\n     * @param {String} property\n     * @return {String}\n     */\n    compose: function compose(property) {\n      var settings = Glide.settings;\n\n      if (!disabled) {\n        return property + ' ' + this.duration + 'ms ' + settings.animationTimingFunc;\n      }\n\n      return property + ' 0ms ' + settings.animationTimingFunc;\n    },\n\n\n    /**\n     * Sets value of transition on HTML element.\n     *\n     * @param {String=} property\n     * @return {Void}\n     */\n    set: function set() {\n      var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n\n      Components.Html.wrapper.style.transition = this.compose(property);\n    },\n\n\n    /**\n     * Removes value of transition from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transition = '';\n    },\n\n\n    /**\n     * Runs callback after animation.\n     *\n     * @param  {Function} callback\n     * @return {Void}\n     */\n    after: function after(callback) {\n      setTimeout(function () {\n        callback();\n      }, this.duration);\n    },\n\n\n    /**\n     * Enable transition.\n     *\n     * @return {Void}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      this.set();\n    },\n\n\n    /**\n     * Disable transition.\n     *\n     * @return {Void}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      this.set();\n    }\n  };\n\n  define(Transition, 'duration', {\n    /**\n     * Gets duration of the transition based\n     * on currently running animation type.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n\n      if (Glide.isType('slider') && Components.Run.offset) {\n        return settings.rewindDuration;\n      }\n\n      return settings.animationDuration;\n    }\n  });\n\n  /**\n   * Set transition `style` value:\n   * - on each moving, because it may be cleared by offset move\n   */\n  Events.on('move', function () {\n    Transition.set();\n  });\n\n  /**\n   * Disable transition:\n   * - before initial build to avoid transitioning from `0` to `startAt` index\n   * - while resizing window and recalculating dimentions\n   * - on jumping from offset transition at start and end edges in `carousel` type\n   */\n  Events.on(['build.before', 'resize', 'translate.jump'], function () {\n    Transition.disable();\n  });\n\n  /**\n   * Enable transition:\n   * - on each running, because it may be disabled by offset move\n   */\n  Events.on('run', function () {\n    Transition.enable();\n  });\n\n  /**\n   * Remove transition:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Transition.remove();\n  });\n\n  return Transition;\n}\n\n/**\n * Test via a getter in the options object to see\n * if the passive property is accessed.\n *\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n */\n\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      supportsPassive = true;\n    }\n  });\n\n  window.addEventListener('testPassive', null, opts);\n  window.removeEventListener('testPassive', null, opts);\n} catch (e) {}\n\nvar supportsPassive$1 = supportsPassive;\n\nvar START_EVENTS = ['touchstart', 'mousedown'];\nvar MOVE_EVENTS = ['touchmove', 'mousemove'];\nvar END_EVENTS = ['touchend', 'touchcancel', 'mouseup', 'mouseleave'];\nvar MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n\nfunction swipe (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var swipeSin = 0;\n  var swipeStartX = 0;\n  var swipeStartY = 0;\n  var disabled = false;\n  var capture = supportsPassive$1 ? { passive: true } : false;\n\n  var Swipe = {\n    /**\n     * Initializes swipe bindings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bindSwipeStart();\n    },\n\n\n    /**\n     * Handler for `swipestart` event. Calculates entry points of the user's tap.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    start: function start(event) {\n      if (!disabled && !Glide.disabled) {\n        this.disable();\n\n        var swipe = this.touches(event);\n\n        swipeSin = null;\n        swipeStartX = toInt(swipe.pageX);\n        swipeStartY = toInt(swipe.pageY);\n\n        this.bindSwipeMove();\n        this.bindSwipeEnd();\n\n        Events.emit('swipe.start');\n      }\n    },\n\n\n    /**\n     * Handler for `swipemove` event. Calculates user's tap angle and distance.\n     *\n     * @param {Object} event\n     */\n    move: function move(event) {\n      if (!Glide.disabled) {\n        var _Glide$settings = Glide.settings,\n            touchAngle = _Glide$settings.touchAngle,\n            touchRatio = _Glide$settings.touchRatio,\n            classes = _Glide$settings.classes;\n\n\n        var swipe = this.touches(event);\n\n        var subExSx = toInt(swipe.pageX) - swipeStartX;\n        var subEySy = toInt(swipe.pageY) - swipeStartY;\n        var powEX = Math.abs(subExSx << 2);\n        var powEY = Math.abs(subEySy << 2);\n        var swipeHypotenuse = Math.sqrt(powEX + powEY);\n        var swipeCathetus = Math.sqrt(powEY);\n\n        swipeSin = Math.asin(swipeCathetus / swipeHypotenuse);\n\n        if (swipeSin * 180 / Math.PI < touchAngle) {\n          event.stopPropagation();\n\n          Components.Move.make(subExSx * toFloat(touchRatio));\n\n          Components.Html.root.classList.add(classes.dragging);\n\n          Events.emit('swipe.move');\n        } else {\n          return false;\n        }\n      }\n    },\n\n\n    /**\n     * Handler for `swipeend` event. Finitializes user's tap and decides about glide move.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    end: function end(event) {\n      if (!Glide.disabled) {\n        var settings = Glide.settings;\n\n        var swipe = this.touches(event);\n        var threshold = this.threshold(event);\n\n        var swipeDistance = swipe.pageX - swipeStartX;\n        var swipeDeg = swipeSin * 180 / Math.PI;\n        var steps = Math.round(swipeDistance / Components.Sizes.slideWidth);\n\n        this.enable();\n\n        if (swipeDistance > threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is positive and greater than threshold move backward.\n          if (settings.perTouch) {\n            steps = Math.min(steps, toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('<' + steps));\n        } else if (swipeDistance < -threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is negative and lower than negative threshold move forward.\n          if (settings.perTouch) {\n            steps = Math.max(steps, -toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('>' + steps));\n        } else {\n          // While swipe don't reach distance apply previous transform.\n          Components.Move.make();\n        }\n\n        Components.Html.root.classList.remove(settings.classes.dragging);\n\n        this.unbindSwipeMove();\n        this.unbindSwipeEnd();\n\n        Events.emit('swipe.end');\n      }\n    },\n\n\n    /**\n     * Binds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    bindSwipeStart: function bindSwipeStart() {\n      var _this = this;\n\n      var settings = Glide.settings;\n\n      if (settings.swipeThreshold) {\n        Binder.on(START_EVENTS[0], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        }, capture);\n      }\n\n      if (settings.dragThreshold) {\n        Binder.on(START_EVENTS[1], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        }, capture);\n      }\n    },\n\n\n    /**\n     * Unbinds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeStart: function unbindSwipeStart() {\n      Binder.off(START_EVENTS[0], Components.Html.wrapper, capture);\n      Binder.off(START_EVENTS[1], Components.Html.wrapper, capture);\n    },\n\n\n    /**\n     * Binds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    bindSwipeMove: function bindSwipeMove() {\n      var _this2 = this;\n\n      Binder.on(MOVE_EVENTS, Components.Html.wrapper, throttle(function (event) {\n        _this2.move(event);\n      }, Glide.settings.throttle), capture);\n    },\n\n\n    /**\n     * Unbinds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeMove: function unbindSwipeMove() {\n      Binder.off(MOVE_EVENTS, Components.Html.wrapper, capture);\n    },\n\n\n    /**\n     * Binds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    bindSwipeEnd: function bindSwipeEnd() {\n      var _this3 = this;\n\n      Binder.on(END_EVENTS, Components.Html.wrapper, function (event) {\n        _this3.end(event);\n      });\n    },\n\n\n    /**\n     * Unbinds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeEnd: function unbindSwipeEnd() {\n      Binder.off(END_EVENTS, Components.Html.wrapper);\n    },\n\n\n    /**\n     * Normalizes event touches points accorting to different types.\n     *\n     * @param {Object} event\n     */\n    touches: function touches(event) {\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return event;\n      }\n\n      return event.touches[0] || event.changedTouches[0];\n    },\n\n\n    /**\n     * Gets value of minimum swipe distance settings based on event type.\n     *\n     * @return {Number}\n     */\n    threshold: function threshold(event) {\n      var settings = Glide.settings;\n\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return settings.dragThreshold;\n      }\n\n      return settings.swipeThreshold;\n    },\n\n\n    /**\n     * Enables swipe event.\n     *\n     * @return {self}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      Components.Transition.enable();\n\n      return this;\n    },\n\n\n    /**\n     * Disables swipe event.\n     *\n     * @return {self}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      Components.Transition.disable();\n\n      return this;\n    }\n  };\n\n  /**\n   * Add component class:\n   * - after initial building\n   */\n  Events.on('build.after', function () {\n    Components.Html.root.classList.add(Glide.settings.classes.swipeable);\n  });\n\n  /**\n   * Remove swiping bindings:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Swipe.unbindSwipeStart();\n    Swipe.unbindSwipeMove();\n    Swipe.unbindSwipeEnd();\n    Binder.destroy();\n  });\n\n  return Swipe;\n}\n\nfunction images (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Images = {\n    /**\n     * Binds listener to glide wrapper.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `dragstart` event on wrapper to prevent dragging images.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('dragstart', Components.Html.wrapper, this.dragstart);\n    },\n\n\n    /**\n     * Unbinds `dragstart` event on wrapper.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('dragstart', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Event handler. Prevents dragging.\n     *\n     * @return {Void}\n     */\n    dragstart: function dragstart(event) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Remove bindings from images:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Images.unbind();\n    Binder.destroy();\n  });\n\n  return Images;\n}\n\nfunction anchors (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds detaching status of anchors.\n   * Prevents detaching of already detached anchors.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var detached = false;\n\n  /**\n   * Holds preventing status of anchors.\n   * If `true` redirection after click will be disabled.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var prevented = false;\n\n  var Anchors = {\n    /**\n     * Setups a initial state of anchors component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      /**\n       * Holds collection of anchors elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._a = Components.Html.wrapper.querySelectorAll('a');\n\n      this.bind();\n    },\n\n\n    /**\n     * Binds events to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('click', Components.Html.wrapper, this.click);\n    },\n\n\n    /**\n     * Unbinds events attached to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('click', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Handler for click event. Prevents clicks when glide is in `prevent` status.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      if (prevented) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n    },\n\n\n    /**\n     * Detaches anchors click event inside glide.\n     *\n     * @return {self}\n     */\n    detach: function detach() {\n      prevented = true;\n\n      if (!detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = false;\n\n          this.items[i].setAttribute('data-href', this.items[i].getAttribute('href'));\n\n          this.items[i].removeAttribute('href');\n        }\n\n        detached = true;\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Attaches anchors click events inside glide.\n     *\n     * @return {self}\n     */\n    attach: function attach() {\n      prevented = false;\n\n      if (detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = true;\n\n          this.items[i].setAttribute('href', this.items[i].getAttribute('data-href'));\n        }\n\n        detached = false;\n      }\n\n      return this;\n    }\n  };\n\n  define(Anchors, 'items', {\n    /**\n     * Gets collection of the arrows HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Anchors._a;\n    }\n  });\n\n  /**\n   * Detach anchors inside slides:\n   * - on swiping, so they won't redirect to its `href` attributes\n   */\n  Events.on('swipe.move', function () {\n    Anchors.detach();\n  });\n\n  /**\n   * Attach anchors inside slides:\n   * - after swiping and transitions ends, so they can redirect after click again\n   */\n  Events.on('swipe.end', function () {\n    Components.Transition.after(function () {\n      Anchors.attach();\n    });\n  });\n\n  /**\n   * Unbind anchors inside slides:\n   * - on destroying, to bring anchors to its initial state\n   */\n  Events.on('destroy', function () {\n    Anchors.attach();\n    Anchors.unbind();\n    Binder.destroy();\n  });\n\n  return Anchors;\n}\n\nvar NAV_SELECTOR = '[data-glide-el=\"controls[nav]\"]';\nvar CONTROLS_SELECTOR = '[data-glide-el^=\"controls\"]';\n\nfunction controls (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var capture = supportsPassive$1 ? { passive: true } : false;\n\n  var Controls = {\n    /**\n     * Inits arrows. Binds events listeners\n     * to the arrows HTML elements.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      /**\n       * Collection of navigation HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._n = Components.Html.root.querySelectorAll(NAV_SELECTOR);\n\n      /**\n       * Collection of controls HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._c = Components.Html.root.querySelectorAll(CONTROLS_SELECTOR);\n\n      this.addBindings();\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    setActive: function setActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.addClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Removes active class to current slide.\n     *\n     * @return {Void}\n     */\n    removeActive: function removeActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.removeClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Toggles active class on items inside navigation.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    addClass: function addClass(controls) {\n      var settings = Glide.settings;\n      var item = controls[Glide.index];\n\n      if (item) {\n        item.classList.add(settings.classes.activeNav);\n\n        siblings(item).forEach(function (sibling) {\n          sibling.classList.remove(settings.classes.activeNav);\n        });\n      }\n    },\n\n\n    /**\n     * Removes active class from active control.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    removeClass: function removeClass(controls) {\n      var item = controls[Glide.index];\n\n      if (item) {\n        item.classList.remove(Glide.settings.classes.activeNav);\n      }\n    },\n\n\n    /**\n     * Adds handles to the each group of controls.\n     *\n     * @return {Void}\n     */\n    addBindings: function addBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.bind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Removes handles from the each group of controls.\n     *\n     * @return {Void}\n     */\n    removeBindings: function removeBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.unbind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Binds events to arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    bind: function bind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.on('click', elements[i], this.click);\n        Binder.on('touchstart', elements[i], this.click, capture);\n      }\n    },\n\n\n    /**\n     * Unbinds events binded to the arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    unbind: function unbind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.off(['click', 'touchstart'], elements[i]);\n      }\n    },\n\n\n    /**\n     * Handles `click` event on the arrows HTML elements.\n     * Moves slider in driection precised in\n     * `data-glide-dir` attribute.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      event.preventDefault();\n\n      Components.Run.make(Components.Direction.resolve(event.currentTarget.getAttribute('data-glide-dir')));\n    }\n  };\n\n  define(Controls, 'items', {\n    /**\n     * Gets collection of the controls HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Controls._c;\n    }\n  });\n\n  /**\n   * Swap active class of current navigation item:\n   * - after mounting to set it to initial index\n   * - after each move to the new index\n   */\n  Events.on(['mount.after', 'move.after'], function () {\n    Controls.setActive();\n  });\n\n  /**\n   * Remove bindings and HTML Classes:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Controls.removeBindings();\n    Controls.removeActive();\n    Binder.destroy();\n  });\n\n  return Controls;\n}\n\nfunction keyboard (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Keyboard = {\n    /**\n     * Binds keyboard events on component mount.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      if (Glide.settings.keyboard) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Adds keyboard press events.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('keyup', document, this.press);\n    },\n\n\n    /**\n     * Removes keyboard press events.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('keyup', document);\n    },\n\n\n    /**\n     * Handles keyboard's arrows press and moving glide foward and backward.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    press: function press(event) {\n      if (event.keyCode === 39) {\n        Components.Run.make(Components.Direction.resolve('>'));\n      }\n\n      if (event.keyCode === 37) {\n        Components.Run.make(Components.Direction.resolve('<'));\n      }\n    }\n  };\n\n  /**\n   * Remove bindings from keyboard:\n   * - on destroying to remove added events\n   * - on updating to remove events before remounting\n   */\n  Events.on(['destroy', 'update'], function () {\n    Keyboard.unbind();\n  });\n\n  /**\n   * Remount component\n   * - on updating to reflect potential changes in settings\n   */\n  Events.on('update', function () {\n    Keyboard.mount();\n  });\n\n  /**\n   * Destroy binder:\n   * - on destroying to remove listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Keyboard;\n}\n\nfunction autoplay (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Autoplay = {\n    /**\n     * Initializes autoplaying and events.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.start();\n\n      if (Glide.settings.hoverpause) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Starts autoplaying in configured interval.\n     *\n     * @param {Boolean|Number} force Run autoplaying with passed interval regardless of `autoplay` settings\n     * @return {Void}\n     */\n    start: function start() {\n      var _this = this;\n\n      if (Glide.settings.autoplay) {\n        if (isUndefined(this._i)) {\n          this._i = setInterval(function () {\n            _this.stop();\n\n            Components.Run.make('>');\n\n            _this.start();\n          }, this.time);\n        }\n      }\n    },\n\n\n    /**\n     * Stops autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    stop: function stop() {\n      this._i = clearInterval(this._i);\n    },\n\n\n    /**\n     * Stops autoplaying while mouse is over glide's area.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      var _this2 = this;\n\n      Binder.on('mouseover', Components.Html.root, function () {\n        _this2.stop();\n      });\n\n      Binder.on('mouseout', Components.Html.root, function () {\n        _this2.start();\n      });\n    },\n\n\n    /**\n     * Unbind mouseover events.\n     *\n     * @returns {Void}\n     */\n    unbind: function unbind() {\n      Binder.off(['mouseover', 'mouseout'], Components.Html.root);\n    }\n  };\n\n  define(Autoplay, 'time', {\n    /**\n     * Gets time period value for the autoplay interval. Prioritizes\n     * times in `data-glide-autoplay` attrubutes over options.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var autoplay = Components.Html.slides[Glide.index].getAttribute('data-glide-autoplay');\n\n      if (autoplay) {\n        return toInt(autoplay);\n      }\n\n      return toInt(Glide.settings.autoplay);\n    }\n  });\n\n  /**\n   * Stop autoplaying and unbind events:\n   * - on destroying, to clear defined interval\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['destroy', 'update'], function () {\n    Autoplay.unbind();\n  });\n\n  /**\n   * Stop autoplaying:\n   * - before each run, to restart autoplaying\n   * - on pausing via API\n   * - on destroying, to clear defined interval\n   * - while starting a swipe\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['run.before', 'pause', 'destroy', 'swipe.start', 'update'], function () {\n    Autoplay.stop();\n  });\n\n  /**\n   * Start autoplaying:\n   * - after each run, to restart autoplaying\n   * - on playing via API\n   * - while ending a swipe\n   */\n  Events.on(['run.after', 'play', 'swipe.end'], function () {\n    Autoplay.start();\n  });\n\n  /**\n   * Remount autoplaying:\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on('update', function () {\n    Autoplay.mount();\n  });\n\n  /**\n   * Destroy a binder:\n   * - on destroying glide instance to clearup listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Autoplay;\n}\n\n/**\n * Sorts keys of breakpoint object so they will be ordered from lower to bigger.\n *\n * @param {Object} points\n * @returns {Object}\n */\nfunction sortBreakpoints(points) {\n  if (isObject(points)) {\n    return sortKeys(points);\n  } else {\n    warn('Breakpoints option must be an object');\n  }\n\n  return {};\n}\n\nfunction breakpoints (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds reference to settings.\n   *\n   * @type {Object}\n   */\n  var settings = Glide.settings;\n\n  /**\n   * Holds reference to breakpoints object in settings. Sorts breakpoints\n   * from smaller to larger. It is required in order to proper\n   * matching currently active breakpoint settings.\n   *\n   * @type {Object}\n   */\n  var points = sortBreakpoints(settings.breakpoints);\n\n  /**\n   * Cache initial settings before overwritting.\n   *\n   * @type {Object}\n   */\n  var defaults = _extends({}, settings);\n\n  var Breakpoints = {\n    /**\n     * Matches settings for currectly matching media breakpoint.\n     *\n     * @param {Object} points\n     * @returns {Object}\n     */\n    match: function match(points) {\n      if (typeof window.matchMedia !== 'undefined') {\n        for (var point in points) {\n          if (points.hasOwnProperty(point)) {\n            if (window.matchMedia('(max-width: ' + point + 'px)').matches) {\n              return points[point];\n            }\n          }\n        }\n      }\n\n      return defaults;\n    }\n  };\n\n  /**\n   * Overwrite instance settings with currently matching breakpoint settings.\n   * This happens right after component initialization.\n   */\n  _extends(settings, Breakpoints.match(points));\n\n  /**\n   * Update glide with settings of matched brekpoint:\n   * - window resize to update slider\n   */\n  Binder.on('resize', window, throttle(function () {\n    Glide.settings = mergeOptions(settings, Breakpoints.match(points));\n  }, Glide.settings.throttle));\n\n  /**\n   * Resort and update default settings:\n   * - on reinit via API, so breakpoint matching will be performed with options\n   */\n  Events.on('update', function () {\n    points = sortBreakpoints(points);\n\n    defaults = _extends({}, settings);\n  });\n\n  /**\n   * Unbind resize listener:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Binder.off('resize', window);\n  });\n\n  return Breakpoints;\n}\n\nvar COMPONENTS = {\n  Html: Html,\n  Translate: Translate,\n  Transition: Transition,\n  Direction: Direction,\n  Peek: Peek,\n  Sizes: Sizes,\n  Gaps: Gaps,\n  Move: Move,\n  Clones: Clones,\n  Resize: Resize,\n  Build: Build,\n  Run: Run\n};\n\nvar Glide$1 = function (_Core) {\n  inherits(Glide$$1, _Core);\n\n  function Glide$$1() {\n    classCallCheck(this, Glide$$1);\n    return possibleConstructorReturn(this, (Glide$$1.__proto__ || Object.getPrototypeOf(Glide$$1)).apply(this, arguments));\n  }\n\n  createClass(Glide$$1, [{\n    key: 'mount',\n    value: function mount() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return get(Glide$$1.prototype.__proto__ || Object.getPrototypeOf(Glide$$1.prototype), 'mount', this).call(this, _extends({}, COMPONENTS, extensions));\n    }\n  }]);\n  return Glide$$1;\n}(Glide);\n\nexport default Glide$1;\nexport { swipe as Swipe, images as Images, anchors as Anchors, controls as Controls, keyboard as Keyboard, autoplay as Autoplay, breakpoints as Breakpoints };\n","import { addUrlHashParameter,\r\n    calcBorderWidth,\r\n    mergeObjects,\r\n    addUrlParameter,\r\n    getUrlHashParameterValue,\r\n    removeUrlHashParameter,\r\n    removeUrlParameter,\r\n    setCSSStyle\r\n} from './Helpers';\r\n\r\nwindow.Eventgallery = window.Eventgallery || {};\r\nif (typeof eventgallery !== 'undefined') {\r\n    Eventgallery.jQuery = eventgallery.jQuery;\r\n}\r\n\r\nEventgallery.Tools = {};\r\nEventgallery.Tools.mergeObjects = mergeObjects;\r\nEventgallery.Tools.calcBorderWidth = calcBorderWidth;\r\nEventgallery.Tools.addUrlHashParameter = addUrlHashParameter;\r\nEventgallery.Tools.getUrlHashParameterValue = getUrlHashParameterValue;\r\nEventgallery.Tools.removeUrlHashParameter = removeUrlHashParameter;\r\nEventgallery.Tools.addUrlParameter = addUrlParameter;\r\nEventgallery.Tools.removeUrlParameter = removeUrlParameter;\r\nEventgallery.Tools.setCSSStyle = setCSSStyle;\r\n","function removeElement(array, elm) {\r\n    const index = array.indexOf(elm);\r\n    if (index > -1) {\r\n        array.splice(index, 1);\r\n    }\r\n}\r\n\r\nfunction mergeObjects(defaults, options) {\r\n    if (options === null || defaults === null) {\r\n        return defaults;\r\n    }\r\n\r\n    for (let key in options) {\r\n        defaults[key] = options[key];\r\n    }\r\n\r\n    return defaults;\r\n}\r\n\r\n/**\r\n * calculates the border of the given elements with the given properties\r\n */\r\nfunction calcBorderWidth(elements, properties) {\r\n    let sum = 0;\r\n\r\n    for (let i=0; i<elements.length; i++) {\r\n        for (let j=0; j<properties.length; j++) {\r\n            let value = parseFloat( elements[i].css(properties[j]) );\r\n            if (!isNaN(value)) {\r\n                sum += value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return sum;\r\n}\r\n\r\nfunction addUrlHashParameter(initialUrl, key, value) {\r\n    let url = removeUrlHashParameter(initialUrl, key),\r\n        fragments = url.split('#'),\r\n        urlpart = fragments[0],\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    hashparts.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\r\n\r\n    if (hashparts.length>0) {\r\n        result = urlpart + '#' + hashparts.join('&');\r\n    } else {\r\n        result = urlpart;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction getUrlHashParameterValue(url, key) {\r\n    let fragments=url.split('#'),\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    if (hashparts.length>0)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=';\r\n\r\n        for (let i=0; i<hashparts.length; i++) {\r\n            if (hashparts[i].indexOf(prefix, 0) === 0) {\r\n                result = hashparts[i].replace(prefix, '');\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction removeUrlHashParameter(url, key) {\r\n    let fragments=url.split('#'),\r\n        urlpart= fragments[0],\r\n        hashparts = fragments.length>1? fragments[1].split(\"&\") : [],\r\n        result;\r\n\r\n    if (hashparts.length>0)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=',\r\n            newHashParts = [];\r\n\r\n        for (let i=0; i<hashparts.length; i++) {\r\n            if (hashparts[i].indexOf(prefix, 0) === 0) {\r\n\r\n            } else {\r\n                newHashParts.push(hashparts[i]);\r\n            }\r\n        }\r\n        hashparts = newHashParts;\r\n    }\r\n\r\n    if (hashparts.length>0) {\r\n        result = urlpart + '#' + hashparts.join('&');\r\n    } else {\r\n        result = urlpart;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction addUrlParameter(initialUrl, key, value) {\r\n    let url = removeUrlParameter(initialUrl, key),\r\n        fragments = url.split('#'),\r\n        urlparts= fragments[0].split('?'),\r\n        result;\r\n\r\n    if (urlparts.length === 1) {\r\n        result = urlparts[0] + '?' + encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n    } else {\r\n        result = urlparts.join('?') + '&' + encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n    }\r\n\r\n    if (fragments.length>1) {\r\n        return result + '#' + fragments[1];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction removeUrlParameter(url, key) {\r\n    let fragments=url.split('#'),\r\n        urlparts= fragments[0].split('?'),\r\n        result;\r\n\r\n    if (urlparts.length>1)\r\n    {\r\n        let prefix= encodeURIComponent(key)+'=';\r\n        let pars= urlparts[1].split('&');\r\n\r\n        for (let i=0; i<pars.length; i++) {\r\n            if (pars[i].indexOf(prefix, 0) === 0) {\r\n                pars.splice(i, 1);\r\n            }\r\n        }\r\n        if (pars.length > 0) {\r\n            result = urlparts[0] + '?' + pars.join('&');\r\n        }\r\n        else {\r\n            result = urlparts[0];\r\n        }\r\n    }\r\n    else {\r\n        result =  urlparts[0];\r\n    }\r\n\r\n    if (fragments.length>1) {\r\n        return result + '#' + fragments[1];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction setCSSStyle (nodes, style, value) {\r\n    for (let i=0; i<nodes.length; i++) {\r\n        nodes[i].style[style] = value;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param node HTMLElement\r\n */\r\nfunction getParents(node) {\r\n    let parents = [];\r\n\r\n    if (node === null) {\r\n        return parents;\r\n    }\r\n\r\n    while(node.parentElement != null) {\r\n        let parent = node.parentElement;\r\n        parents.push(parent);\r\n        node = parent;\r\n    }\r\n    return parents;\r\n}\r\n\r\n/*!\r\n * Serialize all form data into a query string\r\n * (c) 2018 Chris Ferdinandi, MIT License, https://gomakethings.com\r\n * Modified to use any HTML element instead of a form element.\r\n * @param  {Node}   form The form container to serialize\r\n * @return {String}      The serialized form data\r\n */\r\nvar serializeForm = function (form) {\r\n\r\n    // Setup our serialized data\r\n    var serialized = [];\r\n\r\n    let inputElements = form.querySelectorAll('input,select,textarea');\r\n    // Loop through each field in the form\r\n    for (var i = 0; i < inputElements.length; i++) {\r\n\r\n        var field = inputElements[i];\r\n\r\n        // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\r\n        if (!field.name || field.disabled || field.type === 'file' || field.type === 'reset' || field.type === 'submit' || field.type === 'button') continue;\r\n\r\n        // If a multi-select, get all selections\r\n        if (field.type === 'select-multiple') {\r\n            for (var n = 0; n < field.options.length; n++) {\r\n                if (!field.options[n].selected) continue;\r\n                serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.options[n].value));\r\n            }\r\n        }\r\n\r\n        // Convert field data to a query string\r\n        else if ((field.type !== 'checkbox' && field.type !== 'radio') || field.checked) {\r\n            serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.value));\r\n        }\r\n    }\r\n\r\n    return serialized.join('&');\r\n\r\n};\r\n\r\nexport { removeElement, addUrlHashParameter, calcBorderWidth, mergeObjects, addUrlParameter, getUrlHashParameterValue, removeUrlHashParameter, removeUrlParameter, setCSSStyle, getParents, serializeForm };","//import \"@babel/polyfill\";\r\nimport \"custom-event-polyfill\";\r\n\r\n\r\nrequire('./common/js/EventgalleryTools.js');\r\n\r\nrequire('./frontend/js/EventgalleryCart.js');\r\nrequire('./frontend/js/EventgalleryBehavior.js');\r\nrequire('./frontend/js/EventgalleryImage.js');\r\nrequire('./frontend/js/EventgalleryRow.js');\r\nrequire('./frontend/js/EventgalleryImageList.js');\r\nrequire('./frontend/js/EventgalleryCart.js');\r\nrequire('./frontend/js/EventgalleryEventsList.js');\r\nrequire('./frontend/js/EventgalleryEventsTiles.js');\r\nrequire('./frontend/js/EventgalleryJSGallery2.js');\r\nrequire('./frontend/js/EventgalleryLazyload.js');\r\nrequire('./frontend/js/EventgallerySizeCalculator.js');\r\nrequire('./frontend/js/EventgallerySocialShareButton.js');\r\nrequire('./frontend/js/EventgallerySquareList.js');\r\nrequire('./frontend/js/EventgalleryTilesCollection.js');\r\nrequire('./frontend/js/EventgalleryTouch.js');\r\nrequire('./frontend/js/EventgalleryGooglePhotosProcessor.js');\r\nrequire('./frontend/js/EventgalleryCheckout.js');\r\n\r\nrequire('./frontend/js/Modules.js');\r\n\r\nrequire('./frontend/js/PhotoSwipeGallery.js');\r\nrequire('./frontend/js/PhotoSwipeGallerySlide.js');\r\n\r\nrequire('./frontend/less/eventgallery.less');\r\nrequire('./frontend/less/font-awesome/font-awesome.less');\r\n\r\nrequire(\"./photoswipe/photoswipe.css\");\r\nrequire(\"./photoswipe/default-skin/default-skin.css\");\r\n\r\n\r\n\r\n// Required Core Stylesheet\r\nimport \"@glidejs/glide/src/assets/sass/glide.core.scss\";\r\nimport \"./frontend/sass/glide/glide.theme.scss\";\r\n\r\n\r\n\r\n","import PhotoSwipeGallery from \"./PhotoSwipeGallery\";\r\nimport Overlay from \"./Overlay\";\r\nimport SliderStarter from \"./slider/SliderStarter\";\r\nimport Polyfill from \"./Polyfill\";\r\nimport EventgalleryLazyload from \"./EventgalleryLazyload\";\r\n\r\n(function(Eventgallery, jQuery){\r\n\t\"use strict\";\r\n    jQuery( document ).ready(function() {\r\n\r\n\t\t/*\r\n\t\t* GRID LIST OF EVENTS\r\n\t\t*/\r\n\r\n\t\tfunction triggerLazyLoading() {\r\n\t\t\tEventgalleryLazyload.watchImages();\r\n\t\t}\r\n\r\n        jQuery('.eventgallery-events-gridlist').each(function(index, container){\r\n        \tvar $container = jQuery(container);\r\n\t    \tvar $thumbnails = $container.find('.event-thumbnails .event-thumbnail');\r\n\r\n\t        var options = {\r\n\t            rowHeightPercentage: 100,\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $thumbnails,\r\n\t            initComplete: function () {\r\n                    triggerLazyLoading();\r\n\t            },\r\n\t            resizeStart: function () {\r\n\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\r\n\t        if ($thumbnails.length>0) {\r\n\t        \tnew Eventgallery.EventsList(options);\r\n\t        }\r\n        });\r\n\r\n\r\n\t\t/*\r\n\t\t* TILE LIST OF EVENTS\r\n\t\t*/\r\n\r\n\t    jQuery('.eventgallery-events-tiles-list').each(function(index, container){\r\n\t    \tvar $container = jQuery(container);\r\n\r\n\t        var options = {\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $container.find('.event-thumbnail'),\r\n\t            eventgalleryTilesCollection: null,\r\n\t            initComplete: function () {\r\n\t\t\t\t\ttriggerLazyLoading();\r\n\r\n\t                var tilesOptions = {\r\n\t                    tiles: $container.find('.eventgallery-tiles .eventgallery-tile'),\r\n\t                    tilesContainer: $container.find('.eventgallery-tiles')\r\n\t                };\r\n\t                options.eventgalleryTilesCollection = new Eventgallery.TilesCollection(tilesOptions);\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                // we need to recalculate the whole thing because it might happen that a font loads\r\n\t                // and the size of a tile changes.\r\n\t\t\t\t\twindow.addEventListener('load', function(){\r\n\t                    options.eventgalleryTilesCollection.calculate();\r\n\t                });\r\n\r\n\t            },\r\n\t            resizeStart: function () {\r\n\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\t        new Eventgallery.EventsTiles(options);\r\n\r\n\t    });\r\n\r\n\t\t/*\r\n\t\t* TILES LIST OF IMAGES\r\n\t\t*/\r\n\r\n\t    jQuery('.eventgallery-event-tiles-list').each(function(index, container){\r\n\t    \tvar $container = jQuery(container);\r\n\t        var options = {\r\n\t            imagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t            imageset: $container.find('.event-thumbnail'),\r\n\t            adjustMode: 'width',\r\n\t            eventgalleryTilesCollection: null,\r\n\t            initComplete: function () {\r\n\r\n\t                var tilesOptions = {\r\n\t                    tiles: $container.find('.eventgallery-tiles .eventgallery-tile'),\r\n\t                    tilesContainer: $container.find('.eventgallery-tiles')\r\n\t                };\r\n\r\n                    options.eventgalleryTilesCollection = new Eventgallery.TilesCollection(tilesOptions);\r\n                    options.eventgalleryTilesCollection.calculate();\r\n\r\n\t                // we need to recalculate the whole thing because it might happen that a font loads\r\n\t                // and the size of a tile changes.\r\n\t                window.addEventListener('load', function(){\r\n\t                    options.eventgalleryTilesCollection.calculate();\r\n\t                });\r\n\r\n\t\t\t\t\ttriggerLazyLoading();\r\n\r\n\t            },\r\n\t            resizeStart: function () {\r\n\r\n\t            },\r\n\t            resizeComplete: function () {\r\n\t                options.eventgalleryTilesCollection.calculate();\r\n\t                jQuery(window).trigger('scroll');\r\n\t            }\r\n\t        };\r\n\r\n\t        // initialize the imagelist\r\n\t        new Eventgallery.EventsTiles(options);\r\n    \t});\r\n\r\n\t\t/*\r\n\t\t* SIMPLE IMAGE LIST\r\n\t\t*/\r\n\t\tjQuery('.eventgallery-event-gridlist').each(function(index, container){\r\n\t\t\tvar $container = jQuery(container);\r\n\t\t\tvar options = {\r\n                imagesetContainer: $container.find('.event-thumbnails').first(),\r\n                imageset: $container.find('.event-thumbnail'),\r\n                adjustMode: 'height',\r\n                initComplete: function () {\r\n                    var gridOptions = {\r\n                        tiles: $container.find('.eventgallery-simplelist .eventgallery-simplelist-tile'),\r\n                        tilesContainer: $container.find('.eventgallery-simplelist'),\r\n                        thumbSelector: '.event-thumbnail',\r\n                        thumbContainerSelector: '.event-thumbnails'\r\n                    };\r\n\r\n\t\t\t\t\ttriggerLazyLoading();\r\n                },\r\n                resizeStart: function () {\r\n\r\n                },\r\n                resizeComplete: function () {\r\n                    jQuery(window).trigger('scroll');\r\n                }\r\n            };\r\n\r\n            // initialize the imagelist\r\n            new Eventgallery.EventsTiles(options);\r\n\t\t});\r\n\r\n\t\t/*\r\n\t\t* IMAGE LIST\r\n\t\t*/\r\n\r\n        jQuery('.eventgallery-imagelist').each(function(index, imagesetContainer){\r\n\t\t\tvar $imagesetContainer = jQuery(imagesetContainer);\r\n            var options = {\r\n                rowHeight: $imagesetContainer.data('rowheight'),\r\n                rowHeightJitter: $imagesetContainer.data('rowheightjitter'),\r\n                firstImageRowHeight: $imagesetContainer.data('firstimagerowheight'),\r\n                doFillLastRow: $imagesetContainer.data('dofilllastrow') === true,\r\n                imagesetContainer: imagesetContainer,\r\n                imageset: $imagesetContainer.find('.thumbnail'),\r\n\r\n                initComplete: function () {\r\n\t\t\t\t\ttriggerLazyLoading();\r\n                },\r\n                resizeStart: function () {\r\n\r\n                },\r\n                resizeComplete: function () {\r\n                    jQuery(window).trigger('scroll');\r\n                }\r\n            };\r\n\r\n            // initialize the imagelist\r\n            new Eventgallery.Imagelist(options);\r\n        });\r\n\r\n\t\t/*\r\n\t\t * SQUARE SIZED LIST OF IMAGES\r\n\t\t */\r\n\r\n\t\tjQuery('.eventgallery-event-square-list').each(function(index, container){\r\n\t\t\tvar $container = jQuery(container);\r\n\t\t\tvar options = {\r\n\t\t\t\timagesetContainer: $container.find('.event-thumbnails').first(),\r\n\t\t\t\timageset: $container.find('.event-thumbnail'),\r\n\t\t\t\tadjustMode: 'width',\r\n\t\t\t\tinitComplete: function () {\r\n\t\t\t\t\ttriggerLazyLoading();\r\n\t\t\t\t},\r\n\t\t\t\tresizeStart: function () {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tresizeComplete: function () {\r\n\t\t\t\t\tjQuery(window).trigger('scroll');\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// initialize the imagelist\r\n\t\t\tnew Eventgallery.SquareList(options);\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * sets the radio button if one clicks in a table row.\r\n\t\t */\r\n\t\tjQuery('.eventgallery-imagetype-selection-row').click(function(e){\r\n\t\t\tvar $target = jQuery(e.target);\r\n\t\t\t$target.closest('tr').find('input').prop(\"checked\", true);\r\n\t\t});\r\n\r\n\t\tjQuery( document ).on('touchend click', '.eventgallery-cart-connector', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar link = jQuery(e.target);\r\n\r\n\t\t\tif (!link.attr('data-href')) {\r\n\t\t\t\tlink = link.parent('SPAN');\r\n\t\t\t}\r\n\r\n\t\t\twindow.location.href = link.attr('data-href');\r\n\t\t});\r\n\r\n        /**\r\n\t\t * Lightbox init\r\n         * @type {PhotoSwipeGallery}\r\n         */\r\n        Eventgallery.lightbox = new PhotoSwipeGallery();\r\n        Eventgallery.lightbox.initPhotoSwipe();\r\n\r\n        /**\r\n\t\t * Single Image Page\r\n         */\r\n        jQuery('.singleimage-zoom').click(function(e){\r\n            e.preventDefault();\r\n            jQuery('#bigimagelink').click();\r\n        });\r\n\r\n        /**\r\n\t\t * content overlay\r\n         */\r\n        jQuery('a[data-eventgallery-overlay]').each(function(item){\r\n        \tlet contentId = this.getAttribute('href');\r\n        \tjQuery(this).click(function(e){\r\n                let overlay = new Overlay();\r\n\r\n                overlay.openOverlay(document.getElementById(contentId.replace(\"#\",\"\")).innerHTML);\r\n            })\r\n        });\r\n\r\n        if (window.EventGalleryLightboxConfiguration && window.EventGalleryLightboxConfiguration.doPreventRightClick) {\r\n            jQuery(document).on(\"contextmenu\", 'a[data-eg-lightbox] img, img.pswp__img', function(){\r\n                return false;\r\n            });\r\n        }\r\n\r\n        let googlePhotosProcessor = new Eventgallery.GooglePhotosProcessor();\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n\r\n\r\n        let sliderElements = document.querySelectorAll('div[data-slider=\"1\"]');\r\n\r\n\r\n        for(let i=0; i<sliderElements.length; i++) {\r\n            let sliderStarter = new SliderStarter(sliderElements[i]);\r\n            let timer = null;\r\n            sliderStarter.start();\r\n\r\n            window.addEventListener(\"resize\", () => {\r\n            \tif (timer != null) {\r\n            \t\tclearTimeout(timer);\r\n\t\t\t\t}\r\n            \ttimer = setTimeout(() => sliderStarter.start(), 1000);\r\n            }, false);\r\n        }\r\n\r\n\r\n\r\n    }); //end domready\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","import Overlay from \"./Overlay\";\r\nimport Polyfill from \"./Polyfill\";\r\n\r\n(function(Eventgallery, jQuery){\r\n\r\n\r\n    Eventgallery.Cart = function(newOptions) {\r\n        this.cart = [];\r\n        this.isMultiline = false;\r\n        this.options = {\r\n            buttonShowType: 'block',\r\n            emptyCartSelector: '.eventgallery-cart-empty',\r\n            cartSelector: '.eventgallery-ajaxcart',\r\n            cartItemContainerSelector: '.cart-items-container',\r\n            cartItemsSelector: '.eventgallery-ajaxcart .cart-items',\r\n            cartItemSelector: '.eventgallery-ajaxcart .cart-items .cart-item',\r\n            cartCountSelector: '.itemscount',\r\n            buttonDownSelector: '.toggle-down',\r\n            buttonUpSelector: '.toggle-up',\r\n            cartItemsMinHeight: null,\r\n            removeUrl: \"\",\r\n            add2cartUrl: \"\",\r\n            getCartUrl: \"\",\r\n            removeLinkTitle: \"Remove\"\r\n        };\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n        this.initialize();\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.slideUp = function() {\r\n        jQuery(this.options.cartItemContainerSelector).animate({height: this.options.cartItemsMinHeight});\r\n        jQuery(this.options.buttonUpSelector).css('display', 'none');\r\n        if (this.isMultiline) {\r\n            jQuery(this.options.buttonDownSelector).css('display', this.options.buttonShowType);\r\n        } else {\r\n            jQuery(this.options.buttonDownSelector).css('display', 'none');\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.slideDown = function() {\r\n        jQuery(this.options.cartItemContainerSelector).animate({height: jQuery(this.options.cartItemsSelector).height()});\r\n        jQuery(this.options.buttonDownSelector).css('display', 'none');\r\n        jQuery(this.options.buttonUpSelector).css('display', this.options.buttonShowType);\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.initialize = function() {\r\n\r\n        jQuery(this.options.buttonDownSelector).click(jQuery.proxy(function (event) {\r\n            event.preventDefault();\r\n            this.slideDown();\r\n        }, this));\r\n\r\n        jQuery(this.options.buttonUpSelector).click(jQuery.proxy(function (event) {\r\n            event.preventDefault();\r\n            this.slideUp();\r\n        }, this));\r\n\r\n        let $document = jQuery( document );\r\n\r\n        $document.off('change', '.eventgallery-cartquantity');\r\n        $document.on ('change', '.eventgallery-cartquantity', jQuery.proxy(this.updateQuantity, this));\r\n\r\n\r\n        $document.off('click', '.eventgallery-openAdd2cart');\r\n        $document.on ('click', '.eventgallery-openAdd2cart', jQuery.proxy(this.openOverlay, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-opencart');\r\n        $document.on ('touchend click', '.eventgallery-opencart', jQuery.proxy(this.openCart, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-qtyplus');\r\n        $document.on ('touchend click', '.eventgallery-qtyplus', jQuery.proxy(this.quantityPlus, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-qtyminus');\r\n        $document.on ('touchend click', '.eventgallery-qtyminus', jQuery.proxy(this.quantityMinus, this));\r\n\r\n        $document.off('touchend click', '.eventgallery-removeFromCart');\r\n        $document.on ('touchend click', '.eventgallery-removeFromCart', jQuery.proxy(this.removeFromCart, this));\r\n\r\n        $document.on('updatecartlinks', jQuery.proxy(function (event) {\r\n            this.populateCart(true);\r\n        }, this));\r\n\r\n        $document.on('updatecart', jQuery.proxy(function (event, cart) {\r\n            this.cart = cart;\r\n            this.populateCart(false);\r\n        }, this));\r\n\r\n        this.updateCart();\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.openOverlay = function(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        var link = jQuery(e.target);\r\n        if (!link.attr('data-id')) {\r\n            link = link.parent('[data-id]');\r\n        }\r\n\r\n        let overlay = new Overlay();\r\n        overlay.openOverlay(EventGalleryCartConfiguration.add2carturl + '&' + link.attr('data-id'));\r\n\r\n        return false;\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.openCart = function(e) {\r\n        let $button;\r\n        if (e.target.tagName !== 'BUTTON') {\r\n            $button = jQuery(e.target).parent('button');\r\n        } else {\r\n            $button = jQuery(e.target);\r\n        }\r\n        e.preventDefault();\r\n        window.location.href = $button.attr('data-href');\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateCartItemContainer = function () {\r\n\r\n        // detect multiple rows\r\n\r\n        this.isMultiline = false;\r\n        var y = -1;\r\n        var currentObject =  this;\r\n\r\n        jQuery(this.options.cartItemSelector).each(function () {\r\n            var posY = jQuery(this).position().top;\r\n            if (y < 0) {\r\n                y = posY;\r\n            } else if (y != posY) {\r\n                currentObject.isMultiline = true;\r\n            }\r\n        });\r\n\r\n        if (this.isMultiline) {\r\n            // prevent showing the wrong button. Basically this is an inital action if a second row is created.\r\n            var down = jQuery(this.options.buttonDownSelector);\r\n            var up = jQuery(this.options.buttonUpSelector);\r\n\r\n            if (down.css('display') == 'none' && up.css('display') == 'none') {\r\n                down.css('display', this.options.buttonShowType);\r\n            } else {\r\n                // update if a third or more row is created\r\n                if (up.css('display') != 'none') {\r\n                    // timeout to avoid any size issues because of a slow browser\r\n                    setTimeout(jQuery.proxy(function() {\r\n                        this.slideDown();\r\n                    }, this), 1000);\r\n                }\r\n            }\r\n        } else {\r\n            this.slideUp();\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.populateCart = function (linksOnly) {\r\n\r\n        if (this.cart.length === 0) {\r\n            jQuery(this.options.cartSelector).slideUp();\r\n            jQuery(this.options.emptyCartSelector).slideDown();\r\n        } else {\r\n            jQuery(this.options.cartSelector).slideDown();\r\n            jQuery(this.options.emptyCartSelector).slideUp();\r\n        }\r\n        // define where all the cart html items are located\r\n\r\n        var cartHTML = jQuery(this.options.cartItemsSelector);\r\n        if (cartHTML === null) {\r\n            return;\r\n        }\r\n        // clear the html showing the current cart\r\n        if (!linksOnly) {\r\n            cartHTML.html(\"\");\r\n        }\r\n\r\n        // reset cart button icons\r\n        jQuery('.eventgallery-add2cart i.egfa').addClass('egfa-cart-plus').removeClass('egfa-shopping-cart');\r\n\r\n\r\n        for (var i = this.cart.length - 1; i >= 0; i--) {\r\n            //create the id. It's always folder=foo&file=bar\r\n            var id = 'folder=' + encodeURIComponent(this.cart[i].folder) + '&file=' + encodeURIComponent(this.cart[i].file);\r\n            //add the item to the cart. Currently we simple refresh the whole cart.\r\n            if (!linksOnly) {\r\n                cartHTML.html(cartHTML.html() +\r\n                    '<div class=\"cart-item\"><span class=\"badge badge-pill badge-info\">'+this.cart[i].count+'</span>' +\r\n                    this.cart[i].imagetag +\r\n                    '<a href=\"#\" title=\"' + this.options.removeLinkTitle + '\" class=\"button-removeFromCart eventgallery-removeFromCart\" data-id=\"lineitemid=' + this.cart[i].lineitemid + '\">'+\r\n                    '<i class=\"egfa egfa-2x egfa-remove\"></i>' +\r\n                    '</a></div>');\r\n            }\r\n            // mark the add2cart link to show the item is already in the cart\r\n            jQuery('.eventgallery-add2cart[data-id*=\\'' + id + '\\'] i.egfa').addClass('egfa-shopping-cart').removeClass('egfa-cart-plus');\r\n        }\r\n\r\n        if (!linksOnly) {\r\n            cartHTML.html(cartHTML.html() + '<div style=\"clear:both\"></div>');\r\n            if (null === this.options.cartItemsMinHeight) {\r\n                this.options.cartItemsMinHeight = jQuery(this.options.cartItemContainerSelector).height();\r\n            }\r\n            this.updateCartItemContainer();\r\n        }\r\n\r\n        jQuery('.itemscount').html(this.cart.length);\r\n\r\n        if (Eventgallery !== undefined && Eventgallery.lightbox !== undefined) {\r\n            Eventgallery.lightbox.reload();\r\n        }\r\n\r\n        // tigger the loading of Google Photos images for example.\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateCart = function () {\r\n        jQuery.getJSON(\r\n            this.options.getCartUrl,\r\n            {json: 'yes'},\r\n            function (data) {\r\n                if (data !== undefined) {\r\n                    jQuery(document).trigger( 'updatecart', [data] );\r\n                }\r\n            }\r\n        );\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.removeFromCart = function (event) {\r\n        return this.doRequest(event, this.options.removeUrl);\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.updateQuantity = function (event) {\r\n\r\n        var $inputFild = jQuery(event.target),\r\n            imagetypeid = $inputFild.data('imagetypeid'),\r\n            quantity = parseInt($inputFild.val()),\r\n            data = $inputFild.data('id');\r\n\r\n        event.preventDefault();\r\n        data = data + '&quantity=' + quantity;\r\n        return this.doRequest(event, this.options.add2cartUrl, data);\r\n\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.quantityPlus = function(e) {\r\n        e.preventDefault();\r\n\r\n        var fieldName = jQuery(e.target).attr('field'),\r\n            inputField = jQuery('input[name='+fieldName+']'),\r\n            currentVal = parseInt(inputField.val());\r\n\r\n        if (!isNaN(currentVal)) {\r\n            var maxOrderQuantity = inputField.data('maxorderquantity');\r\n            if (maxOrderQuantity === 0 || inputField.val()<maxOrderQuantity) {\r\n                inputField.val(currentVal + 1);\r\n            }\r\n            inputField.change();\r\n        } else {\r\n            inputField.val(0);\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.quantityMinus = function(e) {\r\n        e.preventDefault();\r\n\r\n        var fieldName = jQuery(e.target).attr('field'),\r\n            inputField = jQuery('input[name='+fieldName+']'),\r\n            currentVal = parseInt(inputField.val());\r\n\r\n        if (!isNaN(currentVal) && currentVal > 0) {\r\n            inputField.val(currentVal - 1).change();\r\n        } else {\r\n            inputField.val(0);\r\n        }\r\n    };\r\n\r\n    Eventgallery.Cart.prototype.doRequest = function (event, url, data) {\r\n\r\n        event.preventDefault();\r\n\r\n        var linkElement = jQuery(event.target);\r\n\r\n        if (!linkElement.attr('data-id')) {\r\n            linkElement = linkElement.parent('[data-id]');\r\n        }\r\n\r\n        var iconElement = linkElement.children('i');\r\n        if (data === undefined) {\r\n            data = linkElement.attr('data-id');\r\n        }\r\n\r\n        iconElement.removeClass(\"egfa-cart-plus\").removeClass(\"egfa-shopping-cart\").addClass('egfa-spin egfa-gear');\r\n\r\n        jQuery.getJSON(\r\n            url,\r\n            data,\r\n            function (data) {\r\n\r\n                if (data !== undefined) {\r\n                    jQuery(document).trigger( 'updatecart', [data] );\r\n                }\r\n\r\n                iconElement.removeClass('egfa-spin').removeClass('egfa-gear').addClass('');\r\n\r\n            }\r\n        );\r\n\r\n        return true;\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","(function(){\r\n\r\n    function switchStates(e) {\r\n        let target = e.target;\r\n        let id = target.id;\r\n        let countryId = target.options[target.selectedIndex].value;\r\n        let stateId = id.replace('_country','_state');\r\n        let stateField = document.getElementById(stateId);\r\n\r\n        if (!stateField) {\r\n            return;\r\n        }\r\n\r\n        let optGroups = stateField.querySelectorAll('optgroup');\r\n\r\n        for (let i=0; i<optGroups.length; i++) {\r\n            console.log(i);\r\n            let optGroup = optGroups[i];\r\n            if (optGroup.id === stateId + '_' + countryId || optGroup.id === stateId + '_nocountry') {\r\n                optGroup.style.display = 'block';\r\n            } else {\r\n                optGroup.style.display = 'none';\r\n            }\r\n        }\r\n\r\n        let selectedStateOption = stateField.options[stateField.selectedIndex];\r\n        if (selectedStateOption.parentElement.style.display === 'none') {\r\n            stateField.selectedIndex = 0;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    document.addEventListener('checkout-address-country-changed', (e) => {\r\n        console.log(e);\r\n        switchStates(e);\r\n    })\r\n\r\n})();\r\n\r\n","(function(Eventgallery, jQuery){\r\n\r\nEventgallery.EventsList = function(newOptions) {\r\n    Eventgallery.Imagelist.call(this, newOptions);\r\n};\r\n\r\nEventgallery.EventsList.prototype = new Eventgallery.Imagelist();\r\nEventgallery.EventsList.prototype.constructor = Eventgallery.EventsList;\r\n\r\n\r\nEventgallery.EventsList.prototype.processList = function() {\r\n    /* processes the image list*/    \r\n    var width = this.width;\r\n    var currentObject = this;\r\n    jQuery.each(this.images, function () {\r\n        var height = Math.ceil(width * currentObject.options.rowHeightPercentage / 100);\r\n        this.setSize(width, height);\r\n    });\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n/* processes a list of images and tries to resize separately*/\r\nEventgallery.EventsTiles = function(newOptions) {\r\n    Eventgallery.Imagelist.call(this, newOptions);\r\n};\r\n\r\nEventgallery.EventsTiles.prototype = new Eventgallery.Imagelist();\r\nEventgallery.EventsTiles.prototype.constructor = Eventgallery.EventsTiles;\r\n\r\nEventgallery.EventsTiles.prototype.processList = function() {\r\n    var width = this.width;\r\n    var currentObject = this;\r\n      \t \r\n    jQuery.each(this.images, function () {\r\n        var newHeight = Math.round(this.height / this.width * width);\r\n        var newWidth = width;\r\n        if (currentObject.options.adjustMode == \"height\" && this.height>this.width) {\r\n            newHeight = width;\r\n            newWidth = Math.round(this.width / this.height * newHeight);\r\n        }\r\n\r\n        this.setSize(newWidth, newHeight);\r\n        \r\n    });\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n\r\n","import URLHelper from \"./URLHelper\";\r\n\r\n(function(Eventgallery){\r\n\r\n    const LOADING_MATCHER = 'gp.svg';\r\n    const MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE = 'data-eg-gp-processing';\r\n\r\nEventgallery.GooglePhotosProcessor = class {\r\n\r\n\r\n\r\n    constructor() {\r\n\r\n        this.albumUrl = \"\";\r\n        this.albumsUrl = \"\";\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if (window.EventGalleryGooglePhotosConfiguration) {\r\n            this.albumUrl = window.EventGalleryGooglePhotosConfiguration.albumUrl;\r\n            this.albumsUrl = window.EventGalleryGooglePhotosConfiguration.albumsUrl;\r\n        }\r\n\r\n        this.imageAddedCallback = () => this.processImages();\r\n        document.addEventListener(\"eventgallery-images-added\", this.imageAddedCallback, true);\r\n    };\r\n\r\n    destroy() {\r\n        document.removeEventListener(\"eventgallery-images-added\", this.imageAddedCallback, true);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    processImages() {\r\n        let albums = this._groupByAlbum(this._collectHTMLElements());\r\n        this._markImagesAsInProgress(albums);\r\n        this._getMainImageDataFromServer(albums);\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    /**\r\n     * Grabs IMG tag items from the DOM for Google Photos image placeholder.\r\n     *\r\n     * @returns <Element>[]\r\n     * @private\r\n     */\r\n     _collectHTMLElements() {\r\n        let htmlCollection = document.getElementsByTagName('IMG');\r\n\r\n        let foundImageHTMLElements = /** @type {HTMLElement} */[...htmlCollection];\r\n\r\n        let result = foundImageHTMLElements.filter(img => {\r\n            let backgroundImage = img.style.backgroundImage;\r\n            let dataSrc = img.getAttribute('data-src');\r\n            let src = img.src;\r\n\r\n            if (img.getAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE) === '1') {\r\n                return false;\r\n            }\r\n\r\n            return (backgroundImage && backgroundImage.indexOf(LOADING_MATCHER)>0)\r\n                || (dataSrc && dataSrc.indexOf(LOADING_MATCHER)>0)\r\n                || (src && src.indexOf(LOADING_MATCHER)>0);\r\n        });\r\n\r\n        htmlCollection = document.getElementsByTagName('A');\r\n        let foundLinkHTMLElements = /** @type {HTMLElement} */[...htmlCollection];\r\n        result = result.concat(foundLinkHTMLElements.filter(a => {\r\n            let dataSrc = a.getAttribute('data-src');\r\n            let rel = a.getAttribute('rel');\r\n            let href = a.getAttribute('href');\r\n\r\n            if (a.getAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE) === '1') {\r\n                return false;\r\n            }\r\n            return (href && href.indexOf(LOADING_MATCHER)>0)\r\n                || (dataSrc && dataSrc.indexOf(LOADING_MATCHER)>0)\r\n                || (rel && rel.indexOf(LOADING_MATCHER)>0);\r\n        }));\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param albums {Map<any, any>}\r\n     * @private\r\n     */\r\n    _markImagesAsInProgress(albums) {\r\n        for (let [foldername, album] of albums) {\r\n            /**\r\n             * @var ParsedHTMLElement parsedHTMLElement\r\n             */\r\n            album.forEach(parsedHTMLElement => {\r\n              parsedHTMLElement.getHTMLElement().setAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE, 1);\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sorts all found images into a map: key=folder, value=array of\r\n     *\r\n     * @param htmlElements\r\n     * @returns {Map<any, any>}\r\n     * @private\r\n     */\r\n    _groupByAlbum(htmlElements) {\r\n        let albums = new Map();\r\n        htmlElements.forEach((imageHTMLElement) => {\r\n           let parsedHTMLElement = this._parseHTMLElement(imageHTMLElement);\r\n            parsedHTMLElement.updateParameters();\r\n           let folder = parsedHTMLElement.parameters.get('folder');\r\n\r\n           if (!albums.get(folder)) {\r\n             albums.set(folder, []);\r\n           }\r\n\r\n           albums.get(folder).push(parsedHTMLElement);\r\n        });\r\n\r\n        return albums;\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    /**\r\n     *\r\n     * @param htmlElement\r\n     * @returns {ParsedHTMLElement}\r\n     * @private\r\n     */\r\n    _parseHTMLElement(htmlElement) {\r\n        if (htmlElement.tagName === 'IMG') {\r\n            return new ParsedImageHTMLElement(htmlElement);\r\n        }\r\n        return new ParsedLinkHTMLElement(htmlElement);\r\n    }\r\n\r\n\r\n    /**\r\n     * starts several requests to the server to determine\r\n     *\r\n     * @param albums\r\n     * @private\r\n     */\r\n    _getAlbumDataFromServer(albums) {\r\n        for (let [foldername, album] of albums) {\r\n            this._doAlbumRequest(foldername, album);\r\n        }\r\n    }\r\n\r\n    _doAlbumRequest(foldername, album) {\r\n        if (!this.albumUrl) return;\r\n        fetch(this.albumUrl + '&folder=' + foldername)\r\n            .then(response => response.json())\r\n            .then(data => this._processAlbumResult(album, data));\r\n    }\r\n\r\n    _processAlbumResult(album, data) {\r\n        this._replaceImages(album, data);\r\n    }\r\n\r\n    _getMainImageDataFromServer(albums) {\r\n        let albumsWithMainImagesOnly = this._filterForAlbumsWithMainImageOnly(albums);\r\n\r\n        if (albumsWithMainImagesOnly.size > 0) {\r\n            this._doAlbumsRequest(albumsWithMainImagesOnly, albums);\r\n            for (let [foldername, album] of albumsWithMainImagesOnly) {\r\n                albums.delete(foldername);\r\n            }\r\n        }\r\n\r\n        this._getAlbumDataFromServer(albums);\r\n    }\r\n\r\n    _doAlbumsRequest(albumsWithMainImagesOnly, albums) {\r\n        if (!this.albumsUrl) return;\r\n        fetch(this.albumsUrl)\r\n            .then(response => response.json())\r\n            .then(data => this._processAlbumsResult(albumsWithMainImagesOnly, albums, data));\r\n    }\r\n\r\n    _processAlbumsResult(albumsWithMainImagesOnly, albums, data) {\r\n        for (let [key, album] of albumsWithMainImagesOnly) {\r\n            this._replaceImages(album, data[key]);\r\n        }\r\n        this._getAlbumDataFromServer(albums);\r\n    }\r\n\r\n    // noinspection JSMethodCanBeStatic\r\n    _filterForAlbumsWithMainImageOnly(albums) {\r\n        let newAlbums = new Map();\r\n        for(let [key, album] of albums) {\r\n            let mainImages = album.filter(image => image.isMainImage());\r\n\r\n            if (mainImages.length> 0 && mainImages.length === album.length) {\r\n                newAlbums.set(key, album);\r\n            }\r\n        }\r\n        return newAlbums;\r\n    }\r\n\r\n    _replaceImages(album, serverResult) {\r\n        if (album === undefined || serverResult === undefined) {\r\n            return;\r\n        }\r\n\r\n        album.forEach(parsedImageHTMLElement => {\r\n            let imageUrl = serverResult[parsedImageHTMLElement.getFile()];\r\n            if (imageUrl === undefined) {\r\n                return false;\r\n            }\r\n\r\n            parsedImageHTMLElement.updateParameters();\r\n            parsedImageHTMLElement.replaceElementLinks(imageUrl);\r\n            parsedImageHTMLElement.getHTMLElement().setAttribute(MARKER_IMAGE_IS_IN_PROGRESS_ATTRIBUTE, 0);\r\n\r\n        });\r\n\r\n        if (Eventgallery.lightbox) {\r\n            if (Eventgallery.lightbox.isOpen()) {\r\n                let link = Eventgallery.lightbox.getCurrentSlide().thumbnailContainer;\r\n                Eventgallery.lightbox._gallery.close();\r\n                setTimeout(()=>link.click(),500);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nclass ParsedHTMLElement {\r\n    constructor(htmlElement) {\r\n        this.htmlElement = htmlElement;\r\n        this.parameters = null;\r\n        this.attributeNames = new Set();\r\n        this.styleAttributeNames = new Set();\r\n    }\r\n\r\n    updateParametersWithUrl(url) {\r\n        let parameterString = url.substring(url.indexOf('#')+1);\r\n        this.parameters = URLHelper.parseURLParameter(parameterString);\r\n    }\r\n\r\n    updateParameters() {\r\n        for(let n of this.attributeNames) {\r\n            let url = this.getHTMLElement().getAttribute(n);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.updateParametersWithUrl(url);\r\n                return;\r\n            }\r\n        }\r\n\r\n        for(let n of this.styleAttributeNames) {\r\n            let url = URLHelper.extractBackgroudUrl(this.getHTMLElement().style[n]);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.updateParametersWithUrl(url);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    replaceElementLinks(imageUrl) {\r\n\r\n        for(let n of this.attributeNames) {\r\n            let url = this.getHTMLElement().getAttribute(n);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.getHTMLElement().setAttribute(n, this.getImageUrl(imageUrl, this.getWidth(url)));\r\n            }\r\n        }\r\n\r\n        for(let n of this.styleAttributeNames) {\r\n            let url = URLHelper.extractBackgroudUrl(this.getHTMLElement().style[n]);\r\n            if (url && url.indexOf(LOADING_MATCHER)>0) {\r\n                this.getHTMLElement().style[n] = 'url(' + this.getImageUrl(imageUrl, this.getWidth(url)) + ')';\r\n            }\r\n        }\r\n    }\r\n\r\n    getHTMLElement() {\r\n        return this.htmlElement;\r\n    }\r\n\r\n    getFolder() {\r\n        return this.parameters.get('folder');\r\n    }\r\n\r\n    getFile() {\r\n        return this.parameters.get('file');\r\n    }\r\n\r\n\r\n    getWidth(url) {\r\n        return URLHelper.parseURLParameter(url).get('width');\r\n    }\r\n\r\n    getImageUrl(imageUrl, width) {\r\n        return imageUrl + '=w' + width;\r\n    }\r\n\r\n    isMainImage() {\r\n        return this.parameters.get('m') === '1';\r\n    }\r\n}\r\n\r\nclass ParsedLinkHTMLElement extends ParsedHTMLElement {\r\n\r\n    constructor(htmlElement) {\r\n        super(htmlElement);\r\n        this.attributeNames = new Set(['href', 'data-src', 'rel']);\r\n    }\r\n\r\n}\r\n\r\nclass ParsedImageHTMLElement extends ParsedHTMLElement{\r\n\r\n    constructor(htmlElement) {\r\n        super(htmlElement);\r\n        this.attributeNames = new Set(['src', 'data-src']);\r\n        this.styleAttributeNames = new Set(['backgroundImage']);\r\n    }\r\n}\r\n\r\n\r\n})(Eventgallery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n    /*\r\n     Class to manage an image. This can be the img tag or a container. It has to manage glue itself.\r\n     */\r\n    Eventgallery.Image = function(image, index, newOptions) {\r\n\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n        this.tag = jQuery(image);\r\n        this.index = index;\r\n        this.calculatedWidth = 0;\r\n        this.calcSize();\r\n    };\r\n\r\n    Eventgallery.Image.prototype.calcSize = function () {\r\n        // glue includes everything but the image width/heigt: margin, padding, border\r\n        var image = this.tag.find('img').first();\r\n\r\n        if (image.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var elements = [this.tag, image];\r\n\r\n        this.glueLeft = Eventgallery.Tools.calcBorderWidth(elements, ['padding-left', 'margin-left', 'border-left-width']);\r\n        this.glueRight = Eventgallery.Tools.calcBorderWidth(elements, ['padding-right', 'margin-right', 'border-right-width']);\r\n        this.glueTop = Eventgallery.Tools.calcBorderWidth(elements, ['padding-top', 'margin-top', 'border-top-width']);\r\n        this.glueBottom = Eventgallery.Tools.calcBorderWidth(elements, ['padding-bottom', 'margin-bottom', 'border-bottom-width']);\r\n\r\n        // get image size from data- attributes\r\n\r\n        this.width = image.data(\"width\");\r\n        this.height = image.data(\"height\");\r\n\r\n\r\n        // fallback of data- attributes are not there\r\n        if (this.width === undefined) {\r\n            this.width = this.tag.width() - this.glueLeft - this.glueRight;\r\n        }\r\n\r\n        if (this.height === undefined) {\r\n            this.height = this.tag.height() - this.glueTop - this.glueBottom;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * calculates the height of that image container. This includes the image and the gap on top/bottom\r\n     *\r\n     * @returns float\r\n     */\r\n    Eventgallery.Image.prototype.getImageTagHeight = function() {\r\n        return parseFloat(window.getComputedStyle(this.tag[0]).height) + this.glueTop + this.glueBottom;\r\n    };\r\n\r\n    Eventgallery.Image.prototype.setSize = function (width, height) {\r\n\r\n        var isFlickr = false;\r\n        var newWidth = width - this.glueLeft - this.glueRight;\r\n        var newHeight = height - this.glueTop - this.glueBottom;\r\n\r\n\r\n        var ratio = this.width / this.height;\r\n\r\n        //console.log(\"the size of the image should be: \"+width+\"x\"+height+\" so I have to set it to: \"+newWidth+\"x\"+newHeight);\r\n        //adjust background images\r\n        var image = this.tag.find('img');\r\n        if (image.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var sizeCalculator = new Eventgallery.SizeCalculator();\r\n\r\n        // set a new background image\r\n        var backgroundImageStyle = image.css('background-image');\r\n        var dataSrc = image.attr('data-src');\r\n        if (!dataSrc) {\r\n            dataSrc = \"\";\r\n        }\r\n\r\n        var secret = image.data('secret');\r\n\r\n        if (secret !== undefined) {\r\n            var secret_o = image.data('secret_o'),\r\n                secret_h = image.data('secret_h'),\r\n                secret_k = image.data('secret_k'),\r\n                farm = image.data('farm'),\r\n                server = image.data('server'),\r\n                id = image.data('id');\r\n            var imageUrl = sizeCalculator.getFlickrURL(farm,  server, secret, secret_h, secret_k, secret_o, id, newWidth, newHeight, this.width, this.height);\r\n\r\n            if (backgroundImageStyle !== 'none' ) {\r\n                backgroundImageStyle = \"url('\" + imageUrl + \"')\";\r\n            }\r\n            dataSrc = imageUrl;\r\n\r\n            isFlickr = true;\r\n\r\n        } else {\r\n\r\n            var googleWidth = sizeCalculator.getSize(newWidth, newHeight, ratio);\r\n\r\n            backgroundImageStyle = sizeCalculator.adjustImageURL(backgroundImageStyle, googleWidth);\r\n            dataSrc = sizeCalculator.adjustImageURL(dataSrc, googleWidth);\r\n        }\r\n\r\n        image.css('background-image', backgroundImageStyle);\r\n        image.attr('data-src', dataSrc);\r\n        image.css('display', 'block');\r\n        image.css('margin', 'auto');\r\n\r\n        // IE8 fix: check the width/height first\r\n        if (newWidth>0) {\r\n            image.css('width', newWidth);\r\n        }\r\n        if (newHeight>0) {\r\n            image.css('height', newHeight);\r\n        }\r\n\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery, jQuery){\r\n\r\nEventgallery.Imagelist = function(newOptions) {\r\n\r\n    this.options = {\r\n        rowHeightPercentage: 100,\r\n        rowHeight: 150,\r\n        rowHeightJitter: 0,\r\n        minImageWidth: 150,\r\n        // resize the last image to full width\r\n        doFillLastRow: false,\r\n        // the object where we try to get the width from\r\n        imagesetContainer: null,\r\n\t\t// the object containing all the images elements. Usually they are retieved with a selector like '.imagelist a',\r\n        imageset: null,\r\n        firstImageRowHeight: 2,\r\n        initComplete: function () {\r\n        },\r\n        resizeStart: function () {\r\n        },\r\n        resizeComplete: function () {\r\n        }\r\n    };\r\n\tthis.images = [];\r\n\t// used to compare for width changes\r\n\tthis.eventgalleryPageWidth = 0;\r\n\t// the width of the container. This is kind of tricky since there can be many containers or just one.\r\n\tthis.width = null;\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    if (undefined !== newOptions) {\r\n        this.initialize();\r\n    }\r\n};\r\n\r\nEventgallery.Imagelist.prototype.initialize = function () {\r\n    var currentObject = this;\r\n    this.width = jQuery(this.options.imagesetContainer).width();\r\n\r\n    // save the current width so we don't react on an resize event if not necessary\r\n    this.eventgalleryPageWidth = this.width;\r\n\r\n    var images_tags = this.options.imageset;\r\n    this.images = [];\r\n\r\n    jQuery.each(images_tags, function (index, item) {\r\n        currentObject.images.push(new Eventgallery.Image(item, index));\r\n    });\r\n\r\n    window.addEventListener('resize', () => {\r\n        window.clearTimeout(this.eventgalleryTimer);\r\n\r\n        this.eventgalleryTimer = setTimeout(() => {\r\n            let new_width = jQuery(this.options.imagesetContainer).width();\r\n            this.width = new_width;\r\n            if (this.eventgalleryPageWidth !== new_width) {\r\n                this.options.resizeStart();\r\n                this.eventgalleryPageWidth = new_width;\r\n\r\n                jQuery(this.options.imagesetContainer).css('min-height', this.options.rowHeight*this.images.length);\r\n\r\n                this.processList();\r\n\r\n                jQuery(this.options.imagesetContainer).css('min-height','0px');\r\n\r\n                this.options.resizeComplete();\r\n            }\r\n        }, 500);\r\n\r\n    });\r\n\r\n\tjQuery(this.options.imagesetContainer).css('min-height', this.options.rowHeight*this.images.length);\r\n\r\n    this.processList();\r\n\r\n\tjQuery(this.options.imagesetContainer).css('min-height','0px');\r\n\r\n    //add a tiny timeout. This prevents some issue with lazyload\r\n\t//where images didn't load since the offset was wrong.\r\n    window.setTimeout(this.options.initComplete, 1);\r\n};\r\n\r\n/*calculated the with of an element*/\r\nEventgallery.Imagelist.prototype.getRowWidth = function () {\r\n    var rowWidth = this.width;\r\n\r\n    /* fix for the internet explorer if width if 45.666% == 699.87px*/\r\n    if (window.getComputedStyle) {\r\n        rowWidth = Math.floor(parseFloat(window.getComputedStyle(this.options.imagesetContainer).width) ) - 1;\r\n    } else {\r\n        rowWidth = rowWidth - 1;\r\n    }\r\n\r\n    return rowWidth;\r\n};\r\n\r\n/* processes the image list*/\r\nEventgallery.Imagelist.prototype.processList = function () {\r\n\r\n\tvar options;\r\n\r\n    /* find out how much space we have*/\r\n    var rowWidth = this.getRowWidth();\r\n\r\n\r\n    /* get a copy of the image list because we will pop the image during iteration*/\r\n    var imagesToProcess = this.images.slice(0);\r\n\r\n    if (imagesToProcess.length === 0) {\r\n        return;\r\n    }\r\n\r\n    /* display the first image larger */\r\n    if (this.options.firstImageRowHeight > 1) {\r\n        var image = imagesToProcess.shift();\r\n\r\n        /*if we have a large image, we have to hide it to get the real available space*/\r\n        image.tag.css('display', 'none');\r\n        rowWidth = this.getRowWidth();\r\n        image.tag.css('display', 'block');\r\n\r\n        var imageHeight = this.options.firstImageRowHeight * this.options.rowHeight;\r\n        var imageWidth = Math.floor(image.width / image.height * imageHeight);\r\n\r\n        if (imageWidth + this.options.minImageWidth >= rowWidth) {\r\n            imageWidth = rowWidth;\r\n        }\r\n\r\n        image.setSize(imageWidth, imageHeight);\r\n\r\n        let rowHeightForRightSideImages = this.options.rowHeight;\r\n\r\n        // in case the browser zooms to 110%, we need to make sure, the first image is smaller thand\r\n        // the images to the right. We do this by checking if there is a height difference between the\r\n        // height we want to get and the actual height. If there is one, we add a pixel to the rows\r\n        // on the right side.\r\n        if (imageHeight > image.getImageTagHeight()) {\r\n            rowHeightForRightSideImages = (imageHeight + 1) / this.options.firstImageRowHeight;\r\n        }\r\n\r\n        options = {\r\n            maxWidth: rowWidth - imageWidth,\r\n            maxHeight: rowHeightForRightSideImages,\r\n            adjustHeight: false\r\n        };\r\n\r\n        if (options.maxWidth > 0) {\r\n            this.generateRows(imagesToProcess, this.options.firstImageRowHeight, options, false);\r\n        }\r\n    }\r\n\r\n    options = {\r\n        maxWidth: rowWidth,\r\n        maxHeight: this.options.rowHeight,\r\n        heightJitter: this.options.rowHeightJitter,\r\n        doFillLastRow: this.options.doFillLastRow\r\n    };\r\n\r\n    this.generateRows(imagesToProcess, 99999, options, true);\r\n\r\n};\r\n\r\n    /**\r\n     * @param imagesToProcess\r\n     * @param numberOfRowsToCreate\r\n     * @param options\r\n     * @param finalRows\r\n     */\r\nEventgallery.Imagelist.prototype.generateRows = function (imagesToProcess, numberOfRowsToCreate, options, finalRows) {\r\n\tvar currentRow = new Eventgallery.Row(options);\r\n\r\n    while (imagesToProcess.length > 0 && numberOfRowsToCreate > 0) {\r\n        var addSuccessfull = currentRow.add(imagesToProcess[0]);\r\n        if (addSuccessfull) {\r\n            imagesToProcess.shift();\r\n        } else {\r\n            currentRow.processRow();\r\n            numberOfRowsToCreate--;\r\n            if (numberOfRowsToCreate === 0) break;\r\n            currentRow = new Eventgallery.Row(options);\r\n        }\r\n    }\r\n\r\n\tif (finalRows) {currentRow.isLastRow = true;}\r\n    currentRow.processRow();\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","import PhotoSwipe from \"../../photoswipe/photoswipe\";\r\nimport PhotoSwipeUIDefault from \"../../photoswipe/photoswipe-ui-default\";\r\n\r\n(function(Eventgallery, jQuery){\r\n    /*\r\n     *    Constructor. Starts up the whole thing :-)\r\n     *\r\n     *    This script is free to use. It has been created by http://www.aplusmedia.de and\r\n     *    can be downloaded on http://www.esteak.net.\r\n     *    License: GNU GPL 2.0: http://creativecommons.org/licenses/GPL/2.0/\r\n     *    Example on: http://blog.aplusmedia.de/moo-gallery2\r\n     *    Known issues:\r\n     *    - preloading does not care about initialIndex param\r\n     *    - hovering to a control over the border of the big image will make the other one flickering\r\n     *    - if you enter and leave the control area very quickly, the control flickers sometimes\r\n     *    - does not work in IE6\r\n     *\r\n     *    @param {Array} thumbs, An array of HTML elements\r\n     *    @param {HTMLelement} bigImageContainer, the full size image\r\n     *    @param {HTMLelement} pageContainer, If you have several pages, put them in this container\r\n     *    @param {Object} options, You have to pass imagesPerPage if you have more than one!\r\n     */\r\n    Eventgallery.JSGallery2 = function(thumbs, bigImageContainer, pageContainer, newOptions) {\r\n\r\n        this.options = {\r\n            'prevHandle': null,\t\t\t//if you pass a previous page handle in here, it will be hidden if it's not needed\r\n            'nextHandle': null,\t\t\t//like above, but for next page\r\n            'countHandle': null,\t\t//handle of the counter variable\r\n            'titleTarget': null,\t\t//target HTML element where image texts are copied into\r\n            'initialIndex': -1,\t\t\t//which thumb to select after init. you could create deep links with it.\r\n            'maxOpacity': 0.8,\t\t\t//maximum opacity before cursor reaches prev/next control, then it will be set to 1 instantly.\r\n            'showSocialMediaButton': true,\r\n            'showCartButton': true,\r\n            'showCartConnector': false,\r\n            'cartConnectorLinkRel': '',\r\n            'activeClass': 'thumbnail-active', // the css class for the active thumbnail\r\n            'lightboxRel': 'lightbo2', // the trigger rel for the lightbox script\r\n            'touchContainerSelector' : '#bigimageContainer'\r\n        };\r\n\r\n        this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n\r\n        var pages = jQuery(pageContainer).children('div');\r\n\r\n\t\t// defines if thumbs are currently running\r\n\t\tthis.running = false;\r\n        this.currentPageNumber = 0;\r\n\r\n        this.blockKeys = false;\r\n        this.imagesPerFirstPage = jQuery(pages[0]).find('div.ajax-thumbnail-container').length;\r\n        this.imagesPerPage = this.imagesPerFirstPage;\r\n\r\n        if (pages.length>1 && jQuery(pages[1]).find('div.ajax-thumbnail-container').length>0)  {\r\n            this.imagesPerPage = jQuery(pages[1]).find('div.ajax-thumbnail-container').length;\r\n        }\r\n\r\n        this.thumbs = thumbs;\r\n\r\n        this.bigImage = jQuery(bigImageContainer);\r\n        this.pageContainer = jQuery(pageContainer);\r\n        this.convertThumbs();\r\n\r\n        this.lastPage = Math.ceil((this.thumbs.length - this.imagesPerFirstPage) / this.imagesPerPage) + 1;\r\n\r\n        var url = document.location.href;\r\n        this.initialIndex = parseInt(Eventgallery.Tools.getUrlHashParameterValue(url, 'imageno'));\r\n        if (isNaN(this.initialIndex)) {\r\n            this.initialIndex = 0;\r\n        }\r\n\r\n\r\n        this.createControls();\r\n\r\n        this.createGallerySlides();\r\n\r\n        this.gotoPage(0);\r\n\r\n        if (this.options.initialIndex !== -1) {\r\n            this.unBlockKeys();\r\n            this.selectByIndex(this.options.initialIndex);\r\n        } else if (this.initialIndex !== 0) {\r\n\r\n            this.unBlockKeys();\r\n            this.selectByIndex(this.initialIndex);\r\n        }\r\n\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.createGallerySlides = function() {\r\n        this.slides = [];\r\n        jQuery.each(this.thumbs, (count, thumbContainer) => {\r\n            let lightboxLinkElement = thumbContainer.getElementsByTagName('A')[0];\r\n\r\n            let newSrc = lightboxLinkElement.getAttribute('rel');\r\n            let title =  decodeURIComponent(lightboxLinkElement.getAttribute('data-description'));\r\n            let slide =    {\r\n                w: lightboxLinkElement.getAttribute('data-width'),\r\n                h: lightboxLinkElement.getAttribute('data-height'),\r\n                src: lightboxLinkElement.getAttribute('href'),\r\n                title: title\r\n            };\r\n            this.slides.push(slide)\r\n        });\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.createControls = function () {\r\n        this.prevLink = jQuery('<a href=\"#\" class=\"link jsgallery-prev\"></a>');\r\n        this.prevLink.bind('click', jQuery.proxy(this.prevImage, this));\r\n        this.prevLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.prevLink.mouseover( jQuery.proxy( function (e) {\r\n            this.focusControl(e, this.prevLink);\r\n        }, this));\r\n\r\n        this.zoomLink = jQuery('<a href=\"#\" class=\"link jsgallery-zoom\"></a>');\r\n        this.zoomLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.zoomLink.mouseover( jQuery.proxy(function (e) {\r\n            this.focusControl(e, this.zoomLink);\r\n        }, this));\r\n\r\n        this.nextLink = jQuery('<a href=\"#\" class=\"link jsgallery-next\"></a>');\r\n        this.nextLink.bind('click', jQuery.proxy(this.nextImage, this));\r\n        this.nextLink.mouseleave(jQuery.proxy(this.mouseLeaveHandler, this));\r\n\r\n        this.nextLink.mouseover(jQuery.proxy(function (e) {\r\n            this.focusControl(e, this.nextLink);\r\n        }, this));\r\n\r\n\t\tthis.bigImage.parent().append(this.prevLink);\r\n        this.bigImage.parent().append(this.zoomLink);\r\n        this.bigImage.parent().append(this.nextLink);\r\n\r\n        this.bigImage.on('load', ()=>this.showBigImage());\r\n\r\n        if (this.options.showCartButton) {\r\n            this.add2cartLink = jQuery('<a href=\"#\" class=\"eventgallery-add2cart eventgallery-openAdd2cart jsgallery-add2cart\"><i class=\"egfa egfa-2x egfa-cart-plus\"></i></a>');\r\n            this.bigImage.parent().append(this.add2cartLink);\r\n            jQuery('body').trigger('updatecartlinks');\r\n        }\r\n\r\n        if (this.options.showCartConnector) {\r\n\r\n            this.cartConnectorLink = jQuery('<a href=\"#\" id=\"ajax-cartconnector\" class=\"button-cart-connector jsgallery-cartconnector\"><i class=\"egfa egfa-2x egfa-cart-plus\"></i></a>');\r\n            this.cartConnectorLink.attr('rel', this.options.cartConnectorLinkRel);\r\n            this.bigImage.parent().append(this.cartConnectorLink);\r\n        }\r\n\r\n        if (this.options.showSocialMediaButton) {\r\n            this.socialmediabutton = jQuery('<a id=\"ajax-social-media-button\" class=\"social-share-button social-share-button-open jsgallery-socialmedia\" rel=\"nofollow\" href=\"#\"><i class=\"egfa egfa-2x egfa-share-alt-square\"></i></a>');\r\n            this.socialmediabutton.click((e)=>Eventgallery.SocialShareButton.openShareDialog(e));\r\n            this.bigImage.parent().append(this.socialmediabutton);\r\n        }\r\n\r\n        jQuery(document).keydown(jQuery.proxy(this.keyboardHandler, this));\r\n\r\n\r\n\t\tvar options = {\r\n\t\t  dragLockToAxis: true,\r\n\t\t  dragBlockHorizontal: true,\r\n\t\t  swipeVelocityX: 0.2\r\n\t\t};\r\n\r\n\r\n\r\n\r\n\t\tvar swipeleft =  jQuery.proxy(function(e) {\r\n\t\t    this.nextImage(e);\r\n\t\t}, this);\r\n\r\n\t\tvar swiperight = jQuery.proxy(function(e) {\r\n\t\t    this.prevImage(e);\r\n\t\t}, this);\r\n\r\n        var tabaction = function(e) {\r\n            event.target.click();\r\n        };\r\n\r\n        Eventgallery.Touch.addTouch(this.options.touchContainerSelector,\r\n            swiperight,\r\n            swipeleft,\r\n            tabaction,\r\n            true\r\n        );\r\n\r\n        this.mouseLeaveHandler();\r\n    };\r\n\r\n    /**\r\n     * Focuses one control\r\n     *\r\n     * @param {Event} event\r\n     * @param {HTMLElement} control\r\n    */\r\n    Eventgallery.JSGallery2.prototype.focusControl = function (event, control) {\r\n        control.css('opacity', 1);\r\n    };\r\n\r\n    /**\r\n     * Hides the controls.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.mouseLeaveHandler = function () {\r\n        jQuery(this.nextLink).css('opacity', 0);\r\n        jQuery(this.prevLink).css('opacity', 0);\r\n        jQuery(this.zoomLink).css('opacity', 0);\r\n    };\r\n\r\n    /**\r\n     * Handles keyboard interactions.\r\n     * @param {Event} event\r\n     */\r\n    Eventgallery.JSGallery2.prototype.keyboardHandler = function (event) {\r\n\r\n\r\n        if (!this.blockKeys && Eventgallery.lightbox.isOpen() !== true) {\r\n            if (event.keyCode >= 49 && event.keyCode <= 57) {\r\n                this.gotoPage(event.key - 1);\r\n            } else if (event.keyCode == 37) {\r\n                this.prevImage(event);\r\n            } else if (event.keyCode == 39) {\r\n                this.nextImage(event);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     *    Returns the distance to the mouse from the middle of a given element.\r\n     *    @param {HTMLelement} element\r\n     *    @param {Event} event\r\n     *    @return integer\r\n     */\r\n    Eventgallery.JSGallery2.prototype.getDistanceToMouse = function (element, event) {\r\n        var s = jQuery(element);\r\n        var xDiff = Math.abs(event.clientX - (s.position().left + s.width() / 2));\r\n        var yDiff = Math.abs(event.clientY - (s.position().top + s.height() / 2));\r\n        return Math.sqrt(Math.pow(xDiff, 2) + Math.pow(yDiff, 2));\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.resetThumbs = function () {\r\n       \tthis.running = false;\r\n\r\n\t\tthis.convertThumbs();\r\n\r\n        //if we like to select another image on that page than the first one\r\n        this.select(this.selectedContainer, true);\r\n    };\r\n\r\n    /**\r\n     *    Adds the border to the thumbs and so on. (conversion of static thumbs)\r\n     */\r\n    Eventgallery.JSGallery2.prototype.convertThumbs = function () {\r\n        var currentObject = this;\r\n        jQuery.each(this.thumbs, function (count, thumbContainer) {\r\n            currentObject.convertThumb(thumbContainer, count);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Converts one single thumb.\r\n     * @param {HTMLelement} thumbContainer\r\n     * @param {Integer} count\r\n     */\r\n    Eventgallery.JSGallery2.prototype.convertThumb = function (thumbContainer, count) {\r\n\r\n        if (thumbContainer === undefined) {\r\n            return;\r\n        }\r\n\r\n        var container = jQuery(thumbContainer);\r\n\r\n        container.click(jQuery.proxy(function(e) {\r\n            e.preventDefault();\r\n            this.select(container);\r\n        }, this));\r\n\r\n\r\n        container.css('position', 'relative');\r\n        container.attr('data-counter', count);\r\n        container.attr('href', '#');\r\n    };\r\n\r\n    /**\r\n     *    Removes key blocking.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.unBlockKeys = function () {\r\n        this.blockKeys = false;\r\n    };\r\n\r\n    /**\r\n     *    Selects a certain image. (You have to pass the outer container of the image)\r\n     *    @param container\r\n     *    @param forceReload\r\n     */\r\n    Eventgallery.JSGallery2.prototype.select = function (container, forceReload) {\r\n        forceReload = typeof forceReload !== 'undefined' ? forceReload : false;\r\n\r\n        if (this.blockKeys || container === null) {\r\n            return false;\r\n        }\r\n\r\n\r\n        this.blockKeys = true;\r\n        if ( this.selectedContainer !== undefined ) {\r\n            //this prevents an ugly effect if you click on the currently selected item\r\n            if (container == this.selectedContainer && !forceReload) {\r\n                this.unBlockKeys();\r\n                return false;\r\n            }\r\n            this.deselect(this.selectedContainer);\r\n        }\r\n\r\n        // handle URL\r\n        if (history && history.pushState) {\r\n            history.pushState('', '', Eventgallery.Tools.addUrlHashParameter(window.location.href, 'imageno', this.thumbs.index(container)));\r\n        }\r\n\r\n        //if target image is not on current page, we have to go there first\r\n        var targetPage = Math.floor((jQuery(container).data('counter') - this.imagesPerFirstPage) / this.imagesPerPage) + 1;\r\n\r\n        if (this.currentPageNumber != targetPage) {\r\n            this.gotoPage(targetPage, container);\r\n        }\r\n        this.selectedContainer = container;\r\n\r\n        jQuery(container).addClass(this.options.activeClass);\r\n\r\n        //first link in the container\r\n        var source = jQuery(container).children().first();\r\n\r\n\r\n        // prepare the add2cart button\r\n        if (this.options.showCartButton) {\r\n            this.add2cartLink.attr('data-id', source.attr('data-id'));\r\n            //jQuery('.eventgallery-add2cart').attr('data-id', source.data('id'));\r\n        }\r\n\r\n        if (this.options.showCartConnector) {\r\n            this.cartConnectorLink.attr('data-folder', source.data('folder'));\r\n            this.cartConnectorLink.attr('data-file', source.data('file'));\r\n            this.cartConnectorLink.attr('href', decodeURIComponent(source.data('cart-connector-link')));\r\n        }\r\n\r\n        if (this.options.showSocialMediaButton) {\r\n            this.socialmediabutton.attr('data-link', decodeURIComponent(source.data('social-sharing-link')) );\r\n        }\r\n\r\n        jQuery(document).trigger('updatecartlinks');\r\n\r\n        // now lets set the image\r\n        this.setImage(source);\r\n    };\r\n\r\n\r\n    /**\r\n     * Selects an image by its thumbnail index.\r\n     * @param {integer} index of the thumbnail, starting with 0\r\n     */\r\n    Eventgallery.JSGallery2.prototype.selectByIndex = function (index) {\r\n        //this.mouseLeaveHandler();\r\n        if (index < 0 || this.thumbs.length <= index) {\r\n            index = 0;\r\n        }\r\n        this.select(this.thumbs[index]);\r\n    };\r\n\r\n    /**\r\n     *    Opposite to method above.\r\n     *    @param {HTMLelement} container\r\n     */\r\n    Eventgallery.JSGallery2.prototype.deselect = function (container) {\r\n        jQuery(container).removeClass(this.options.activeClass);\r\n    };\r\n\r\n    /**\r\n     *    Changes the full size image to given one.\r\n     *    @param lightboxLinkElement\r\n     */\r\n    Eventgallery.JSGallery2.prototype.setImage = function (lightboxLinkElement) {\r\n\r\n            this.bigImage.css('opacity', '0.1');\r\n            let newSrc = lightboxLinkElement.attr('rel');\r\n            let title =  decodeURIComponent(lightboxLinkElement.attr('data-description'));\r\n\r\n            this.zoomLink.unbind('click');\r\n\r\n            let currentIndex = this.thumbs.index(this.selectedContainer);\r\n\r\n            this.zoomLink.click((e) => {\r\n                this.createGallerySlides();\r\n\r\n                Eventgallery.lightbox.openPhotoSwipe(\r\n                    currentIndex, this.slides, true, false\r\n                );\r\n                Eventgallery.lightbox.setAfterChangeEventListener(() => {\r\n                    let gid = Eventgallery.lightbox.getCurrentSlide().gid;\r\n                    if (this.slides.length>0 && gid === this.slides[0].gid) {\r\n                        this.selectByIndex(Eventgallery.lightbox.getCurrentIndex());\r\n                    }\r\n                });\r\n            });\r\n            if (Eventgallery.lightbox.isOpen() === true) {\r\n               Eventgallery.lightbox.gotoSlide(currentIndex);\r\n            }\r\n\r\n            jQuery(this.options.titleTarget).html(title);\r\n\r\n            this.bigImage.attr('src', newSrc);\r\n            this.unBlockKeys();\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.showBigImage= function() {\r\n        this.bigImage.css('opacity', '1');\r\n    };\r\n\r\n    /**\r\n     *    Navigates to previous page.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.prevPage = function () {\r\n        this.gotoPage(this.currentPageNumber - 1);\r\n    };\r\n    /**\r\n     *    Navigates to next page.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.nextPage = function () {\r\n        this.gotoPage(this.currentPageNumber + 1);\r\n    };\r\n    /**\r\n     *    Selects the previous image.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.prevImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n        this.selectByIndex(this.thumbs.index(this.selectedContainer) - 1);\r\n    };\r\n    /**\r\n     *    Selects the next image.\r\n     */\r\n    Eventgallery.JSGallery2.prototype.nextImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n        this.selectByIndex(this.thumbs.index(this.selectedContainer) + 1);\r\n    };\r\n\r\n    /**\r\n     * Zooms an image\r\n     */\r\n    Eventgallery.JSGallery2.prototype.zoomImage = function (e) {\r\n        if (e !== undefined) {\r\n            e.preventDefault();\r\n        }\r\n    };\r\n\r\n    /**\r\n     *    Navigates to given page and selects the first image of it.\r\n     *    Also hides the handles (if set).\r\n     *    @param {Integer} pageNumber, index of the target page (0-n)\r\n     *  @param {HTMLElement} selectImage, optionally receives a particular image to select\r\n     */\r\n    Eventgallery.JSGallery2.prototype.gotoPage = function (pageNumber, selectImage) {\r\n        //if we like to select another image on that page than the first one\r\n        if (pageNumber === 0) {\r\n            selectImage = selectImage === undefined ? this.thumbs[0] : selectImage;\r\n        } else {\r\n            let i = (pageNumber - 1) * this.imagesPerPage + this.imagesPerFirstPage;\r\n            selectImage = this.thumbs[i] === undefined ? selectImage : this.thumbs[i];\r\n        }\r\n\r\n        if (pageNumber >= 0 && pageNumber < this.lastPage) {\r\n\r\n            this.pageContainer.css('margin-left',\r\n            this.pageContainer.children().width() * pageNumber * -1);\r\n\r\n            // fix height of the page-container\r\n            var maxHeight = 0;\r\n            this.pageContainer.children().each(function (index, page) {\r\n                var height = jQuery(page).height();\r\n                if (height > maxHeight) {\r\n                    maxHeight = height;\r\n                }\r\n            });\r\n\r\n            this.pageContainer.css('height', maxHeight);\r\n\r\n            this.currentPageNumber = pageNumber;\r\n            this.select(selectImage);\r\n            this.updateHandles();\r\n\r\n        }\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.updateHandles = function () {\r\n        //update handles\r\n        var dummy;\r\n\r\n        if (this.options.prevHandle !== undefined) {\r\n            dummy = this.currentPageNumber === 0 ? this.options.prevHandle.fadeOut():this.options.prevHandle.fadeIn();\r\n        }\r\n        if (this.options.nextHandle !== undefined) {\r\n            dummy = this.currentPageNumber == this.lastPage - 1 ? this.options.nextHandle.fadeOut():this.options.nextHandle.fadeIn();\r\n        }\r\n\r\n        if (this.options.countHandle !== undefined) {\r\n            dummy = this.updatePagingBar(this.options.countHandle, this.currentPageNumber, this.lastPage);\r\n        }\r\n\r\n    };\r\n\r\n    Eventgallery.JSGallery2.prototype.updatePagingBar = function (countHandle, currentPage, pageCount) {\r\n\t\tvar i;\r\n\r\n        //init the pagingbar\r\n        if (pageCount > 1 && countHandle.html() === '') {\r\n\r\n            for (i = 0; i < pageCount; i++) {\r\n                this.createCountLink(this, countHandle, i);\r\n            }\r\n        }\r\n\r\n        var pageSpeed = this.options.pageSpeed;\r\n\r\n\r\n        if (pageCount > 9) {\r\n\r\n            for (i = 0; i < pageCount; i++) {\r\n                jQuery('#count' + i).css('display', 'inline');\r\n            }\r\n\r\n            var skipFromRight = pageCount;\r\n            var skipFromLeft = 0;\r\n\r\n            var spaceToRight = pageCount - currentPage - 1;\r\n            var spaceToLeft = currentPage;\r\n\r\n            if (spaceToLeft > 4 && spaceToRight > 4) {\r\n                skipFromLeft = currentPage - 4;\r\n                skipFromRight = currentPage + 5;\r\n            } else {\r\n                if (spaceToLeft <= 4) {\r\n                    skipFromLeft = 0;\r\n                    skipFromRight = currentPage + 5 + (4 - spaceToLeft);\r\n                }\r\n                if (spaceToRight <= 4) {\r\n                    skipFromLeft = currentPage - 4 - (4 - spaceToRight);\r\n                    skipFromRight = pageCount;\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < skipFromLeft; i++) {\r\n                jQuery('#count' + i).css('display', 'none');\r\n            }\r\n\r\n            for (i = skipFromRight; i < pageCount; i++) {\r\n                jQuery('#count' + i).css('display', 'none');\r\n\r\n            }\r\n        }\r\n\r\n        jQuery(countHandle).children('.active').removeClass('active');\r\n        jQuery('#count' + currentPage).addClass('active');\r\n\r\n    };\r\n\r\n\r\n    Eventgallery.JSGallery2.prototype.createCountLink = function (gallery, countHandle, currentPageNumber) {\r\n\r\n        var myAnchor = jQuery('<a class=\"page-link\" href=\"#\">' + (currentPageNumber + 1) + '</a>');\r\n\r\n\r\n        myAnchor.click(jQuery.proxy(function (e) {\r\n            this.gotoPage(currentPageNumber);\r\n            return false;\r\n        }, gallery));\r\n\r\n\r\n        var myListItem = jQuery('<li class=\"count page-item\" id=\"count' + currentPageNumber + '\"></li>');\r\n\r\n        myListItem.append(myAnchor);\r\n\r\n        countHandle.append(myListItem);\r\n\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","export default class EventgalleryLazyload {\r\n\r\n    static instance = null;\r\n    static knownImageUrls = [];\r\n\r\n    constructor() {\r\n        this.options = {\r\n            elementSelector: 'img.eventgallery-lazyme',\r\n            classForLoaded: 'eventgallery-lazyload-loaded',\r\n            classForLoading: 'eventgallery-lazyload-loading'\r\n        }\r\n\r\n        if ('IntersectionObserver' in window &&\r\n            'IntersectionObserverEntry' in window &&\r\n            'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\r\n\r\n            // Minimal polyfill for Edge 15's lack of `isIntersecting`\r\n            // See: https://github.com/w3c/IntersectionObserver/issues/211\r\n            if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\r\n                Object.defineProperty(window.IntersectionObserverEntry.prototype,\r\n                    'isIntersecting', {\r\n                        get: function () {\r\n                            return this.intersectionRatio > 0;\r\n                        }\r\n                    });\r\n            }\r\n\r\n\r\n            this.imageObserver = new IntersectionObserver((entries, imgObserver) => {\r\n                entries.forEach((entry) => {\r\n                    if (entry.isIntersecting) {\r\n                        const lazyImage = entry.target;\r\n                        if (lazyImage.dataset.src) {\r\n\r\n                            lazyImage.style.backgroundImage = EventgalleryLazyload.createBackgroundImageUrl(lazyImage.dataset.src);\r\n\r\n                            if (!EventgalleryLazyload.knownImageUrls.includes(lazyImage.dataset.src)) {\r\n                                EventgalleryLazyload.knownImageUrls.push(lazyImage.dataset.src);\r\n                                lazyImage.classList.add('eventgallery-lazyload-loading');\r\n                                lazyImage.classList.remove('eventgallery-lazyload-loaded');\r\n\r\n                                let img = document.createElement('img');\r\n                                img.src = lazyImage.dataset.src;\r\n                                img.onload = () => {\r\n                                    console.log('image loaded');\r\n                                    lazyImage.classList.remove('eventgallery-lazyload-loading');\r\n                                    lazyImage.classList.add('eventgallery-lazyload-loaded');\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    static createBackgroundImageUrl(backgroundImageUrl) {\r\n        return 'url(\"' + backgroundImageUrl + '\")';\r\n    }\r\n\r\n    static watchImages() {\r\n\r\n        if (!EventgalleryLazyload.instance) {\r\n            EventgalleryLazyload.instance = new EventgalleryLazyload();\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        let lazyImages = document.querySelectorAll(EventgalleryLazyload.instance.options.elementSelector);\r\n\r\n        for (let i = 0; i < lazyImages.length; i++) {\r\n            let lazyImage = lazyImages[i];\r\n\r\n            if (lazyImage.dataset.src) {\r\n                if (EventgalleryLazyload.instance.imageObserver) {\r\n                    EventgalleryLazyload.instance.imageObserver.observe(lazyImage);\r\n                } else {\r\n                    lazyImage.style.backgroundImage = EventgalleryLazyload.createBackgroundImageUrl(lazyImage.dataset.src);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","(function(Eventgallery, jQuery){\r\n\t\r\n/* processes a row is a image list */\r\nEventgallery.Row = function(newOptions) {\r\n\r\n\tthis.options = {\r\n        maxWidth: 960,\r\n        maxHeight: 250,\r\n        heightJitter: 0,\r\n        adjustHeight: true,\r\n        doFillLastRow: true\r\n    };\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    this.isLastRow = false;\r\n    this.images = [];\r\n    this.width = 0;\r\n    if (this.options.heightJitter > 0) {\r\n        this.options.maxHeight = Math.floor(this.options.maxHeight + (Math.random() * 2 * this.options.heightJitter) - this.options.heightJitter);\r\n    }\r\n};\r\n\r\nEventgallery.Row.prototype.add = function (eventgalleryImage) {\r\n    let imageWidth =eventgalleryImage.width / eventgalleryImage.height * this.options.maxHeight;\r\n\r\n    // determine the number of images per line. return false if the row if full.\r\n\r\n    let addThisImage = this.width + imageWidth <= this.options.maxWidth || this.images.length === 0;\r\n\r\n    if (!addThisImage) {\r\n        let gap = Math.abs(this.options.maxWidth - this.width - imageWidth) / this.options.maxWidth;\r\n        if (gap<0.2) {\r\n            addThisImage = true;\r\n        }\r\n    }\r\n\r\n    // determine the number of images per line. return false if the row if full.\r\n    if (addThisImage) {\r\n        this.images.push(eventgalleryImage);\r\n        eventgalleryImage.calculatedWidth = imageWidth;\r\n        this.width = this.width + imageWidth;\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\nEventgallery.Row.prototype.processRow = function () {\r\n    let gap, rowHeight, i;\r\n\r\n    gap = this.options.maxWidth - this.width;\r\n\r\n    // if there is no gap to fill, we need to resize the last row to fit the image.\r\n    if (this.isLastRow && this.options.doFillLastRow === false && gap >=0 ) {\r\n        if (gap>=0) {\r\n            gap = 0;\r\n        }\r\n        rowHeight = this.options.maxHeight;\r\n    } else {\r\n\r\n        rowHeight = this.options.maxHeight / (this.width/this.options.maxWidth);\r\n    }\r\n\r\n    if (this.options.adjustHeight === false) {\r\n        rowHeight = this.options.maxHeight;\r\n    }\r\n\r\n    for (i=0; i < this.images.length; i++) {\r\n        var image = this.images[i];\r\n\r\n        var calculatedWidth = image.calculatedWidth;\r\n\r\n        // how much of the gap does this element need to fill?\r\n        var gapToClose = (calculatedWidth / this.width ) * gap;\r\n\r\n        image.setSize(calculatedWidth + gapToClose, rowHeight);\r\n    }\r\n\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery){\r\n/* determines the size of an image so a image server can deliver it. */\r\n\r\nEventgallery.SizeCalculator = function(newOptions) {\r\n\tthis.options = {\r\n        // to be able to handle internal and google picasa images, we need to restrict the availabe image sizes.\r\n        availableSizes: [48, 104, 160, 288, 320, 400, 512, 640, 720, 800, 1024, 1280, 1440],\r\n        flickrSizes:   {100 : 't', 240 : 'm', 320 : 'n', 500 : '-', 640 : 'z', 800 : 'c', 1024 : 'b', 1600 : 'h', 2048 : 'k'}\r\n\r\n};\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);   \r\n};\r\n\r\nEventgallery.SizeCalculator.prototype.adjustImageURL = function (url, size) {\r\n    url = url.replace(/=w(\\d+)/, '=w' + size);\r\n    url = url.replace(/width=(\\d+)/, 'width=' + size);\r\n    url = url.replace(/\\/s(\\d*)\\//, '/s' + size + '/');\r\n    url = url.replace(/\\/s(\\d*)-c\\//, '/s' + size + '-c/');\r\n\r\n    return url;\r\n};\r\n\r\n\r\nEventgallery.SizeCalculator.prototype.getFlickrURL = function(farm, server, secret,  secret_h, secret_k, secret_o, id, width, height, originalwidth, originalheight) {\r\n    var longSideSize,\r\n        originalLongSideSize,\r\n        sizeCode,\r\n        secretString,\r\n        sizeString,\r\n        ratio;\r\n\r\n    let minSizes = this.getMinSizes(width, height, originalwidth, originalheight);\r\n\r\n\r\n    if (originalwidth > originalheight) {\r\n        longSideSize = minSizes.width;\r\n        originalLongSideSize = originalwidth;\r\n    } else {\r\n        longSideSize = minSizes.height;\r\n        originalLongSideSize = originalheight;\r\n    }\r\n\r\n    if (originalLongSideSize < longSideSize) {\r\n        sizeCode = 'o';\r\n    } else {\r\n\r\n        for (var size in this.options.flickrSizes) {\r\n            if (size > longSideSize) {\r\n                sizeCode = this.options.flickrSizes[size];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (sizeCode === 'h' && secret_h === '') {\r\n        sizeCode = 'o'\r\n    }\r\n\r\n    if (sizeCode === 'k' && secret_k === '') {\r\n        sizeCode = 'o'\r\n    }\r\n\r\n    switch (sizeCode) {\r\n        case \"o\":\r\n            secretString = secret_o;\r\n            break;\r\n        case \"h\":\r\n            secretString = secret_h;\r\n            break;\r\n        case \"k\":\r\n            secretString = secret_k;\r\n            break;\r\n        default:\r\n            secretString = secret;\r\n    }\r\n\r\n    sizeString = sizeCode == '-' ? '' : '_' + sizeCode;\r\n    return 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secretString + sizeString + '.jpg';\r\n};\r\n\r\nEventgallery.SizeCalculator.prototype.getSize = function (width, height, ratio) {\r\n\t\r\n    var googleWidth = this.options.availableSizes[0];\r\n\t\r\n\tfor(var index=0; index < this.options.availableSizes.length; index++) {\r\n\t\tvar item = \tthis.options.availableSizes[index];\r\n    \tvar widthOkay;\r\n        var heightOkay;\r\n        \r\n        if (googleWidth > this.options.availableSizes[0]){\r\n        \tbreak;\r\n        }\r\n        \r\n        var lastItem = index == this.options.availableSizes.length - 1;\r\n\r\n        if (ratio >= 1) {\r\n            widthOkay = item > width;\r\n            heightOkay = item / ratio > height;\r\n\r\n            if ((widthOkay && heightOkay) || lastItem) {\r\n                googleWidth = item;\r\n            }\r\n        } else {\r\n            heightOkay = item > height;\r\n            widthOkay = item * ratio > width;\r\n\r\n            if ((widthOkay && heightOkay) || lastItem) {\r\n                googleWidth = item;\r\n            }\r\n        }\r\n    }\r\n\t\r\n    return googleWidth;\r\n};\r\n\r\n    /**\r\n     * returns the minimum values for height and width to fill the given box size.\r\n     * @param boxWidth\r\n     * @param boxHeight\r\n     * @param originalWidth\r\n     * @param originalHeight\r\n     */\r\n    Eventgallery.SizeCalculator.prototype.getMinSizes = function (boxWidth, boxHeight, originalWidth, originalHeight) {\r\n\r\n\r\n          let ratio = originalWidth / originalHeight;\r\n\r\n          let height, width;\r\n\r\n          if (originalWidth > originalHeight) {\r\n              if (boxWidth > boxHeight) {\r\n                  width = boxWidth;\r\n                  height = boxWidth / ratio;\r\n                  if (height < boxHeight) {\r\n                      height = boxHeight;\r\n                      width = boxHeight * ratio;\r\n                  }\r\n              } else {\r\n                  height = boxHeight;\r\n                  width = boxHeight * ratio;\r\n                  if (width < boxWidth) {\r\n                      width = boxWidth;\r\n                      height = boxHeight * ratio;\r\n                  }\r\n              }\r\n          } else {\r\n              if (boxWidth > boxHeight) {\r\n                  width = boxWidth;\r\n                  height = boxWidth / ratio;\r\n                  if (height < boxHeight) {\r\n                      height = boxHeight;\r\n                      width = boxHeight * ratio;\r\n                  }\r\n              } else {\r\n                  height = boxHeight;\r\n                  width = boxHeight * ratio;\r\n                  if (width < boxWidth) {\r\n                      width = boxWidth;\r\n                      height = boxWidth / ratio;\r\n                  }\r\n              }\r\n          }\r\n\r\n          return {width: Math.ceil(width), height: Math.ceil(height)};\r\n    };\r\n\r\n})(Eventgallery);   ","(function(Eventgallery, jQuery){\r\n\r\n\tEventgallery.DownloadButton = class {\r\n\t\tstatic download(e, href, download) {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet a = document.createElement('a');\r\n\t\t\ta.href = href;\r\n\t\t\ta.download = download;\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\tdocument.body.removeChild(a)\r\n\t\t}\r\n\t};\r\n\r\n\tEventgallery.ClickableButton = class {\r\n\t\tstatic click(e, href) {\r\n\t\t\te.preventDefault();\r\n\t\t\tdocument.location.href = href;\r\n\t\t}\r\n\t};\r\n\r\n\tEventgallery.SocialShareButton = class {\r\n\t\tstatic openShareDialog(e) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tvar link = jQuery(e.target);\r\n\t\t\tif (!link.attr('data-link')) {\r\n\t\t\t\tlink = link.parent('[data-link]');\r\n\t\t\t}\r\n\r\n\t\t\tvar id = 'id_' + Math.ceil(Math.random()*10000000);\r\n\r\n\t\t\tvar targetPos = link.offset();\r\n\t\t\tvar myDiv = jQuery('<div><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></div>');\r\n\t\t\tmyDiv.attr('id', id);\r\n\t\t\tmyDiv.addClass('social-sharing-toolbox');\r\n\r\n\t\t\tmyDiv.css( {\r\n\t\t\t\t'opacity': '1 !important',\r\n\t\t\t\t'position': 'absolute',\r\n\t\t\t\t'top': targetPos.top-10,\r\n\t\t\t\t'left': targetPos.left-10\r\n\t\t\t});\r\n\r\n\t\t\tjQuery('body').append(myDiv);\r\n\r\n\t\t\tmyDiv.fadeIn();\r\n\r\n\t\t\tmyDiv.load(link.attr('data-link'));\r\n\r\n\t\t\tvar timer = null;\r\n\r\n\t\t\tvar closeFunction = function(){\r\n\t\t\t\tmyDiv.fadeOut(300, function() {\r\n\t\t\t\t\tjQuery(this).remove();\r\n\t\t\t\t});\r\n\t\t\t\tjQuery(document).off('touchend click', closeFunction2);\r\n\t\t\t};\r\n\r\n\t\t\tmyDiv.mouseleave( function(){\r\n\t\t\t\ttimer = window.setTimeout(closeFunction, 1000);\r\n\t\t\t});\r\n\r\n\t\t\tmyDiv.mouseenter( function() {\r\n\t\t\t\twindow.clearTimeout(timer);\r\n\t\t\t});\r\n\r\n\t\t\t// this method is used to close the sharing windows if we click somewhere else.\r\n\t\t\tvar closeFunction2 = function(e) {\r\n\t\t\t\tif (e.target.id != id && jQuery(e.target).parents('#' + id).length === 0) {\r\n\t\t\t\t\tcloseFunction();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tjQuery(document).on('touchend click', closeFunction2);\r\n\r\n\t\t}\r\n\t};\r\n\r\n\tjQuery( document ).ready(function() {\r\n\r\n\r\n\t\tjQuery(document).on('touchend click', '.social-share-button-close', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar myDivs = jQuery(e.target).parents('.social-sharing-toolbox');\r\n\t\t\tmyDivs.fadeOut(300, function() {\r\n\t\t\t\tjQuery(this).remove();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n        let elements = document.querySelectorAll('.social-share-button-open');\r\n        for (let i=0; i<elements.length;i++) {\r\n            elements[i].addEventListener(\"click\", (e) => {\r\n\t\t\t\tEventgallery.SocialShareButton.openShareDialog(e);\r\n            }, true);\r\n        }\r\n\r\n\r\n\t\telements = document.querySelectorAll('.eg-download');\r\n\t\tfor (let i=0; i<elements.length;i++) {\r\n\t\t\tlet element = elements[i];\r\n\t\t\tlet href = element.getAttribute('data-href');\r\n\t\t\tlet download = element.getAttribute('data-download');\r\n\r\n\t\t\tif (download != null) {\r\n\t\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\tEventgallery.DownloadButton.download(e, href, download);\r\n\t\t\t\t}, true);\r\n\t\t\t} else {\r\n\t\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\tEventgallery.ClickableButton.click(e, href);\r\n\t\t\t\t}, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    });\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(Eventgallery, jQuery){\r\n\r\n    /**\r\n     * Formats a list of images to appear square sized. This class is doing something like the Grid layout for events.\r\n     * @param newOptions\r\n     * @constructor\r\n     */\r\n    Eventgallery.SquareList = function(newOptions) {\r\n        Eventgallery.Imagelist.call(this, newOptions);\r\n    };\r\n\r\n    Eventgallery.SquareList.prototype = new Eventgallery.Imagelist();\r\n    Eventgallery.SquareList.prototype.constructor = Eventgallery.SquareList;\r\n\r\n\r\n    Eventgallery.SquareList.prototype.processList = function() {\r\n        /* processes the image list*/\r\n        var width = this.width;\r\n        var currentObject = this;\r\n        jQuery.each(this.images, function () {\r\n            this.setSize(width, width);\r\n        });\r\n    };\r\n\r\n})(Eventgallery, Eventgallery.jQuery);","(function(Eventgallery, jQuery){\r\n\r\n// create a tile layout and centers images in a tile\r\nEventgallery.TilesCollection = function(newOptions) {\r\n    this.options = {\r\n        tiles: jQuery('#events-tiles .event'),\r\n        tilesContainer: jQuery('#events-tiles .event-tiles')\r\n    };\r\n\t\r\n \tthis.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n    this.tiles = this.options.tiles;\r\n    this.tilesContainer = this.options.tilesContainer;\r\n\t\r\n};\r\n\r\nEventgallery.TilesCollection.prototype.calculate = function() {\r\n\t\tvar i;\r\n\t\tvar currentObject = this;\r\n    \tvar tilesPerRow = 1;\r\n        var tile = jQuery(this.tiles[0]);\r\n    \t // reset grid to support resize and media queries\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            jQuery(tile).css( {\r\n                'visibility' : 'hidden',\r\n                'position' : 'static',\r\n                'float' : 'left'\r\n            });\r\n        });\r\n\r\n        // calculate tiles per row    \r\n        var y = tile.position().top;\r\n\r\n\r\n        for(i=1; i<this.tiles.length; i++) {\r\n            if (jQuery(this.tiles[i]).position().top != y) {\r\n                break;\r\n            }\r\n            tilesPerRow++;\r\n\r\n        }\r\n\r\n        // create array of height values for the columns\r\n        var columnHeight = [];\r\n        for (i=0; i<tilesPerRow; i++) {\r\n            columnHeight.push(0);\r\n        }\r\n\r\n        var columnWidth = tile.outerWidth();\r\n\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            var $tile = jQuery(tile);\r\n            $tile.data('height', $tile.outerHeight());\r\n        });\r\n\r\n        jQuery.each(this.tiles, function(index, tile) {\r\n\r\n            var $tile =  jQuery(tile),\r\n                smallestColumn = currentObject.getSmallestColumn(columnHeight);\r\n\r\n            $tile.css({\r\n                'left' : smallestColumn * columnWidth,\r\n                'top' : columnHeight[smallestColumn]\r\n            });\r\n\r\n            columnHeight[smallestColumn] = columnHeight[smallestColumn] + $tile.data('height');\r\n        });\r\n        \r\n        jQuery.each(this.tiles, function(index, tile) {\r\n            jQuery(tile).css({\r\n                'visibility' : 'visible',\r\n                'position' : 'absolute',\r\n                'float' : 'none'\r\n            });\r\n        });\r\n\r\n        jQuery(this.tilesContainer).css('height', columnHeight[this.getHighestColumn(columnHeight)]);\r\n\r\n};\r\n    \r\n/* \r\n* returns the position of the smallest value in the array\r\n*/\t\r\nEventgallery.TilesCollection.prototype.getSmallestColumn = function(columnHeight) {\r\n\r\n    var smallestColumnValue = columnHeight[0];\r\n    var smallestColumnNumber = 0;\r\n    \r\n    for(var i=0; i<columnHeight.length; i++) {\r\n        if (smallestColumnValue>columnHeight[i]) {\r\n            smallestColumnValue=columnHeight[i];\r\n            smallestColumnNumber = i;\r\n        }\r\n    \r\n    }\r\n    return smallestColumnNumber;\r\n\r\n};\r\n    \r\n/* \r\n* returns the position of the highest value in the array\r\n*/\r\nEventgallery.TilesCollection.prototype.getHighestColumn = function(columnHeight) {\r\n\r\n    var columnValue = columnHeight[0];\r\n    var columnNumber = 0;\r\n    \r\n    for(var i=0; i<columnHeight.length; i++) {\r\n        if (columnValue<columnHeight[i]) {\r\n            columnValue=columnHeight[i];\r\n            columnNumber = i;\r\n        }\r\n    \r\n    }\r\n    return columnNumber;\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);   ","(function(Eventgallery, jQuery){\r\n/**\r\n * Touch navigation\r\n */\r\n\r\nEventgallery.Touch = function(newOptions) {\r\n\r\n    this.options = {\r\n    };\r\n    this.options = Eventgallery.Tools.mergeObjects(this.options, newOptions);\r\n};\r\n\r\nEventgallery.Touch.removeTouch = function (elementSelector) {\r\n    jQuery( elementSelector ).unbind( 'touchstart');\r\n    jQuery( elementSelector ).unbind( 'touchmove');\r\n    jQuery( elementSelector ).unbind( 'touchend');\r\n};\r\n\r\nEventgallery.Touch.addTouch = function (elementSelector, leftAction, rightAction, tabAction, allowScrolling) {\r\n\r\n    var index,\r\n        hDistance,\r\n        vDistance,\r\n        hDistanceLast,\r\n        vDistanceLast,\r\n        hDistancePercent,\r\n        vSwipe = false,\r\n        hSwipe = false,\r\n        hSwipMinDistance = 10,\r\n        vSwipMinDistance = 50,\r\n        startCoords = {},\r\n        endCoords = {},\r\n        winWidth = window.innerWidth ? window.innerWidth : $( window ).width(),\r\n        winHeight = window.innerHeight ? window.innerHeight : $( window ).height();\r\n\r\n    jQuery( elementSelector ).bind( 'touchstart', function( event ) {\r\n\r\n        jQuery( this ).addClass( 'touching' );\r\n\r\n        endCoords = event.originalEvent.targetTouches[0];\r\n        startCoords.pageX = event.originalEvent.targetTouches[0].pageX;\r\n        startCoords.pageY = event.originalEvent.targetTouches[0].pageY;\r\n\r\n\r\n\r\n        jQuery( '.touching' ).bind( 'touchmove',function( event ) {\r\n            if (allowScrolling !== true) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n            endCoords = event.originalEvent.targetTouches[0];\r\n\r\n            if ( ! hSwipe ) {\r\n                vDistanceLast = vDistance;\r\n                vDistance = endCoords.pageY - startCoords.pageY;\r\n                if ( Math.abs( vDistance ) >= vSwipMinDistance || vSwipe ) {\r\n                    vSwipe = true;\r\n                }\r\n            }\r\n\r\n            hDistanceLast = hDistance;\r\n            hDistance = endCoords.pageX - startCoords.pageX;\r\n            hDistancePercent = hDistance * 100 / winWidth;\r\n\r\n            if ( ! hSwipe && ! vSwipe && Math.abs( hDistance ) >= hSwipMinDistance ) {\r\n                hSwipe = true;\r\n            }\r\n\r\n        } );\r\n\r\n        return allowScrolling===true;\r\n\r\n    } ).bind( 'touchend',function( event ) {\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        vDistance = endCoords.pageY - startCoords.pageY;\r\n        hDistance = endCoords.pageX - startCoords.pageX;\r\n        hDistancePercent = hDistance*100/winWidth;\r\n\r\n        // Swipe to bottom to close\r\n        if ( vSwipe ) {\r\n            vSwipe = false;\r\n            if ( Math.abs( vDistance ) >= 2 * vSwipMinDistance && Math.abs( vDistance ) > Math.abs( vDistanceLast ) ) {\r\n            } else {\r\n\r\n            }\r\n\r\n        } else if ( hSwipe ) {\r\n\r\n            hSwipe = false;\r\n\r\n            // swipeLeft\r\n            if( hDistance >= hSwipMinDistance && hDistance >= hDistanceLast) {\r\n                leftAction();\r\n\r\n                // swipeRight\r\n            } else if ( hDistance <= -hSwipMinDistance && hDistance <= hDistanceLast) {\r\n                rightAction();\r\n            }\r\n\r\n        } else { // Top and bottom bars have been removed on touchable devices\r\n            if (undefined !== tabAction)\r\n            {\r\n                tabAction();\r\n            } else {\r\n                jQuery(event.target).trigger(\"click\");\r\n            }\r\n        }\r\n\r\n\r\n        jQuery( '.touching' ).off( 'touchmove' ).removeClass( 'touching' );\r\n\r\n    } );\r\n\r\n};\r\n\r\n})(Eventgallery, Eventgallery.jQuery);\r\n","(function(jQuery) {\r\n\r\n\r\n}(eventgallery.jQuery));\r\n","import Polyfill from \"./Polyfill\";\r\n\r\n/**\r\n * this class is the basic modal of Event Gallery.\r\n */\r\nexport default class Overlay {\r\n\r\n    constructor() {\r\n        this.myDiv = null;\r\n        this.background = null;\r\n        this.$body = jQuery('body');\r\n        this.onClosed = undefined;\r\n        this.onLoad = undefined;\r\n        this.repositionTimer = null;\r\n        this.windowWidth = 0;\r\n    }\r\n\r\n    /**\r\n     * opens an overlay. The content can be a url or content.\r\n     * Url start with http or /\r\n     *\r\n     * @param dataUrl\r\n     */\r\n    openOverlay(dataUrl) {\r\n\r\n        this.myDiv = jQuery('<div id=\"eventgallery-overlay\"><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></div>');\r\n        this.background = jQuery('<div id=\"eventgallery-overlay-background\"></div>');\r\n        this.background[0].onclick = () => {this.closeOverlay()};\r\n\r\n        this.myDiv.css( {\r\n            'opacity': '1 !important',\r\n            'position': 'absolute',\r\n            'max-width' : '100%'\r\n        });\r\n\r\n        this.$body.append(this.background);\r\n        this.$body.append(this.myDiv);\r\n\r\n        this.reposition(true);\r\n\r\n        if (dataUrl.startsWith('http') || dataUrl.startsWith('/')) {\r\n            Overlay._getRemoteData(dataUrl, (data) => {\r\n                this._addContent(data);\r\n            })\r\n        } else {\r\n            this._addContent(`<button class=\"btn-close-overlay eventgallery-close-overlay\"><i class=\"egfa egfa-2x egfa-times-circle\"></i></button>` + dataUrl);\r\n        }\r\n\r\n\r\n        jQuery(window).on('resize.overlay', () => {\r\n            this._setRositionTimer(false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * triggers a timeout for the repositioning. This will avoid too much flickering.\r\n     *\r\n     * @param force\r\n     * @private\r\n     */\r\n    _setRositionTimer(force) {\r\n        if (this.repositionTimer) {\r\n            clearTimeout(this.repositionTimer)\r\n        }\r\n        this.repositionTimer = setTimeout(() => this.reposition(force), 500);\r\n    }\r\n\r\n    static _getRemoteData(url, callback) {\r\n        jQuery.ajax({url: url}).done(callback);\r\n    }\r\n\r\n    /**\r\n     * moves the given content into the content overlay. Executes the onload method when finished.\r\n     *\r\n     * @param content\r\n     * @private\r\n     */\r\n    _addContent(content) {\r\n        this.myDiv.html(content);\r\n\r\n        let elements = this.myDiv[0].getElementsByClassName('eventgallery-close-overlay');\r\n        for(let i=0; i<elements.length;i++) {\r\n            elements[i].onclick = () => {this.closeOverlay()};\r\n        }\r\n\r\n        this.reposition(true);\r\n\r\n        if (this.onLoad !== undefined) {\r\n            this.onLoad();\r\n        }\r\n\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-images-added'));\r\n    }\r\n\r\n    /**\r\n     * Closes the overlay and fires the onclose method if defined.\r\n     */\r\n    closeOverlay() {\r\n        jQuery(window).off('.overlay');\r\n        this.myDiv.fadeOut(150, () => {\r\n            jQuery(this.myDiv).remove();\r\n                this.background.fadeOut(200, () => {\r\n                    jQuery(this.background).remove();\r\n                    if (this.onClosed !== undefined) {\r\n                        this.onClosed();\r\n                    }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Move the overlay to a good position.\r\n     *\r\n     * @param force defines if we force the reposition. If set to false, we do it only in case the width of the window changed.\r\n     */\r\n    reposition(force) {\r\n\r\n        if (this.repositionTimer !== null) {\r\n            clearTimeout(this.repositionTimer);\r\n        }\r\n\r\n        let maxWidth = jQuery(window).width();\r\n\r\n        if (!force) {\r\n            if (this.windowWidth === maxWidth) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.windowWidth = maxWidth;\r\n\r\n        this.myDiv.hide();\r\n\r\n        this.myDiv.css( {\r\n            'top': 0,\r\n            'left': 0\r\n        });\r\n\r\n        let maxHeight = jQuery(window).height(),\r\n            width = this.myDiv.outerWidth(),\r\n            height = this.myDiv.outerHeight(),\r\n            scrollTop = jQuery(window).scrollTop(),\r\n            left = 0,\r\n            top = scrollTop;\r\n\r\n        if (maxWidth-width>0) {\r\n            left = (maxWidth - width) / 2;\r\n        }\r\n\r\n        if (maxHeight - height > 0) {\r\n            top = scrollTop + (maxHeight - height) / 2;\r\n        }\r\n\r\n        this.myDiv.css( {\r\n            'top': top,\r\n            'left': left\r\n        });\r\n\r\n        this.myDiv.show();\r\n    };\r\n}\r\n","import PhotoSwipeGallerySlide from \"./PhotoSwipeGallerySlide.js\";\r\nimport PhotoSwipe from \"../../photoswipe/photoswipe\";\r\nimport PhotoSwipeUIDefault from \"../../photoswipe/photoswipe-ui-default.js\";\r\nimport Polyfill from \"./Polyfill\";\r\nimport Overlay from \"./Overlay\";\r\nimport SlideShow from \"./SlideShow\";\r\nimport {getParents} from \"../../common/js/Helpers\";\r\n\r\nconst PSWP_CONTROLS_MAIN_ELEMENT_CLASS = 'pswp';\r\nconst PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS = 'pswp__button--playpause';\r\nconst PSW_HIDE_CLASS = 'pswp_hide';\r\n\r\nconst PSWP_CONTROLS = `<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n\t    \t<div class=\"pswp__bg\"></div>\r\n\t    \t<div class=\"pswp__scroll-wrap\">\r\n\t        <div class=\"pswp__container\">\r\n\t            <div class=\"pswp__item\"></div>\r\n\t            <div class=\"pswp__item\"></div>\r\n\t            <div class=\"pswp__item\"></div>\r\n\t        </div>\r\n\t        <div class=\"pswp__ui pswp__ui--hidden\">\r\n\t            <div class=\"pswp__top-bar\">\r\n\t                <div class=\"pswp__counter\"></div>\r\n\t                <button class=\"pswp__button pswp__button--close\" title=\"{{CLOSE}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--share\" title=\"{{SHARE}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--download\" title=\"{{DOWNLOAD}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--add2cart\" title=\"{{BUY}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--fs\" title=\"{{FULLSCREEN}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--playpause pswp_hide\" data-title-pause=\"{{PAUSESLIDESHOW}}\" data-title-play=\"{{PLAYSLIDESHOW}}\" title=\"{{PLAYSLIDESHOW}}\"></button>\r\n\t                <button class=\"pswp__button pswp__button--zoom\" title=\"{{ZOOM}}\"></button>\r\n\t                <div class=\"pswp__preloader\">\r\n\t                    <div class=\"pswp__preloader__icn\">\r\n\t                      <div class=\"pswp__preloader__cut\">\r\n\t                        <div class=\"pswp__preloader__donut\"></div>\r\n\t                      </div>\r\n\t                    </div>\r\n\t                </div>\r\n\t            </div>\r\n\t            <div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\r\n\t                <div class=\"pswp__share-tooltip\"></div> \r\n\t            </div>\r\n\t            <button class=\"pswp__button pswp__button--arrow--left\" title=\"{{PREVIOUS}}\">\r\n\t            </button>\r\n\t            <button class=\"pswp__button pswp__button--arrow--right\" title=\"{{NEXT}}\">\r\n\t            </button>\r\n\t            <div class=\"pswp__caption\">\r\n\t                <div class=\"pswp__caption__center\"></div>\r\n\t            </div>\r\n\t          </div>\r\n\t        </div>\r\n\t\t</div>`;\r\n\r\nexport default class PhotoSwipeGallery {\r\n\r\n    constructor() {\r\n        this._isOpen = false;\r\n        this._gallery = null;\r\n    }\r\n\r\n    /**\r\n     * Finds all thumbnail containers on the page\r\n     * @returns {NodeListOf<Element>}\r\n     */\r\n    static getThumbnailContainers() {\r\n        let thumbnailContainer = document.querySelectorAll( 'a[data-eg-lightbox]' );\r\n\r\n        // don't add images from the clone slides. They are not clickable but will add duplicates to the lightbox => #818\r\n        return Array.from(thumbnailContainer).filter((tc => {\r\n            let parents = getParents(tc);\r\n            let thumbnailContainerIsAllowed = true;\r\n            parents.forEach(parent => {\r\n                if (thumbnailContainerIsAllowed && parent.classList.contains('glide__slide--clone')) {\r\n                    thumbnailContainerIsAllowed = false;\r\n                }\r\n            });\r\n            return thumbnailContainerIsAllowed;\r\n        }))\r\n    }\r\n\r\n    static translate(input) {\r\n        let result = input;\r\n\r\n        if (window.EventGalleryLightboxConfiguration) {\r\n            result = result.replace('{{CLOSE}}', EventGalleryLightboxConfiguration.KEY_CLOSE);\r\n            result = result.replace('{{SHARE}}', EventGalleryLightboxConfiguration.KEY_SHARE);\r\n            result = result.replace('{{DOWNLOAD}}', EventGalleryLightboxConfiguration.KEY_DOWNLOAD);\r\n            result = result.replace('{{BUY}}', EventGalleryLightboxConfiguration.KEY_BUY);\r\n            result = result.replace('{{ZOOM}}', EventGalleryLightboxConfiguration.KEY_ZOOM);\r\n            result = result.replace('{{PREVIOUS}}', EventGalleryLightboxConfiguration.KEY_PREVIOUS);\r\n            result = result.replace('{{NEXT}}', EventGalleryLightboxConfiguration.KEY_NEXT);\r\n            result = result.replace('{{FULLSCREEN}}', EventGalleryLightboxConfiguration.KEY_FULLSCREEN);\r\n            result = result.replace('{{PLAYSLIDESHOW}}', EventGalleryLightboxConfiguration.KEY_PLAYSLIDESHOW);\r\n            result = result.replace('{{PAUSESLIDESHOW}}', EventGalleryLightboxConfiguration.KEY_PAUSESLIDESHOW);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * append the photoswipe controls to the body element. If there is already a control element, we delete it.\r\n     */\r\n    static appendControlls() {\r\n        let controllElements = document.getElementsByClassName(PSWP_CONTROLS_MAIN_ELEMENT_CLASS);\r\n        for(let i=0;i<controllElements.length; i++) {\r\n            Polyfill.removeHtmlElementNode(controllElements[i]);\r\n        }\r\n        let div = document.createElement('div');\r\n        div.innerHTML = PhotoSwipeGallery.translate(PSWP_CONTROLS);\r\n        document.getElementsByTagName('body')[0].appendChild(div);\r\n    }\r\n\r\n    static closest(el, fn) {\r\n        return el && ( fn(el) ? el : PhotoSwipeGallery.closest(el.parentNode, fn) );\r\n    };\r\n\r\n    static parseHash() {\r\n        return PhotoSwipeGallery._parseHashString(window.location.hash.substring(1));\r\n    }\r\n\r\n    /**\r\n     * splits a hash value into its elements. returns an empty object if there is nothing in\r\n     */\r\n    static _parseHashString(hash) {\r\n        let params = {};\r\n\r\n        if(hash.length < 5) {\r\n            return params;\r\n        }\r\n\r\n        let vars = hash.split('&');\r\n        for (let i = 0; i < vars.length; i++) {\r\n            if(!vars[i]) {\r\n                continue;\r\n            }\r\n            let pair = vars[i].split('=');\r\n            if(pair.length < 2) {\r\n                continue;\r\n            }\r\n            params[pair[0]] = pair[1];\r\n        }\r\n\r\n        return params;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param thumbnailContainer Node\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    static parseThumbnailElement(thumbnailContainer) {\r\n        let item,\r\n            imgEl,\r\n            height,\r\n            width,\r\n            pid,\r\n            gid;\r\n\r\n        // include only element nodes\r\n        if(thumbnailContainer.nodeType !== 1) {\r\n            return null;\r\n        }\r\n\r\n        imgEl = thumbnailContainer.getElementsByTagName('IMG')[0];\r\n\r\n        if (imgEl === undefined) {\r\n            return null;\r\n        }\r\n\r\n        height = thumbnailContainer.getAttribute('data-height');\r\n        width = thumbnailContainer.getAttribute('data-width');\r\n        pid = thumbnailContainer.getAttribute('data-pid');\r\n        gid = thumbnailContainer.getAttribute('data-gid');\r\n\r\n        if (height === null || width === null || pid === null) {\r\n            return null;\r\n        }\r\n\r\n        // create slide object\r\n        item = new PhotoSwipeGallerySlide();\r\n        item.src = thumbnailContainer.getAttribute('href');\r\n        item.w = parseInt(width, 10);\r\n        item.h = parseInt(height, 10);\r\n\r\n        item.title = decodeURIComponent(thumbnailContainer.getAttribute('data-title'));\r\n\r\n        item.pid = parseInt(pid, 10);\r\n\r\n        item.gid = gid;\r\n\r\n        item.thumbnailContainer = thumbnailContainer; // save link to element for getThumbBoundsFn\r\n\r\n        return item;\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * searches the galleries for a thumbnail container and returns the\r\n     * Slide object\r\n     *\r\n     * @param thumbnailContainer\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    getSlideBy(thumbnailContainer) {\r\n        let galleries = this.getGalleries();\r\n\r\n        for(let gallery of galleries.values()) {\r\n            for (let i = 0, l = gallery.length; i < l; i++) {\r\n                if (gallery[i].thumbnailContainer === thumbnailContainer) {\r\n                    return gallery[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param slide PhotoSwipeGallerySlide\r\n     * @returns {*|number}\r\n     */\r\n    getIndexOfSlide(slide) {\r\n        let slides = this.getGalleries().get(slide.gid);\r\n        return slides.map(function(e) { return e.hash(); }).indexOf(slide.hash());\r\n    }\r\n\r\n    /**\r\n     * Parses all elements on the page so we know which triggers for a lightbox exist.\r\n     * Returns a mal containing the gallery and all elements\r\n     * @returns {Map<String, Array>}\r\n     */\r\n    getGalleries() {\r\n        let galleries = new Map(),\r\n            thumbnails = PhotoSwipeGallery.getThumbnailContainers();\r\n\r\n        for(let i=0; i<thumbnails.length; i++) {\r\n            let thumbnailContainer = thumbnails[i];\r\n            let gallery;\r\n\r\n            let item = PhotoSwipeGallery.parseThumbnailElement(thumbnailContainer);\r\n            if (item !== null) {\r\n                if (galleries.get(item.gid) === undefined) {\r\n                    galleries.set(item.gid, []);\r\n                }\r\n                gallery = galleries.get(item.gid);\r\n                gallery.push(item);\r\n                galleries.set(item.gid, gallery);\r\n            }\r\n        }\r\n\r\n        return galleries;\r\n    }\r\n\r\n    onThumbnailsClick(e) {\r\n        e = e || window.event;\r\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n\r\n        let eTarget = e.target || e.srcElement;\r\n\r\n        // leave the icons for cart&sharing alone\r\n        let iconContainer = PhotoSwipeGallery.closest(eTarget, function(el) {\r\n            return (el.classList && el.classList.contains('eventgallery-icon-container'));\r\n        });\r\n        if (iconContainer !== null) {\r\n            return;\r\n        }\r\n\r\n        // find root element of slide\r\n        let clickedListItem = PhotoSwipeGallery.closest(eTarget, function(el) {\r\n            return (el.tagName && el.tagName.toUpperCase() === 'A');\r\n        });\r\n\r\n        if(!clickedListItem) {\r\n            return;\r\n        }\r\n\r\n        let slide = this.getSlideBy(clickedListItem);\r\n        let index = this.getIndexOfSlide(slide);\r\n        let slides = this.getGalleries().get(slide.gid);\r\n\r\n        if(index >= 0) {\r\n            // open PhotoSwipe if valid index found\r\n            this.openPhotoSwipe( index, slides );\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param index\r\n     * @param slides\r\n     * @param disableAnimation\r\n     * @param fromURL\r\n     */\r\n    openPhotoSwipe(index, slides, disableAnimation, fromURL) {\r\n        let pswpElement = document.querySelectorAll('.pswp')[0],\r\n            options;\r\n\r\n        if (slides === undefined || slides.length === 0 ) {\r\n            return;\r\n        }\r\n\r\n        // define options (if needed)\r\n        options = {\r\n            galleryPIDs:true,\r\n\r\n            // define gallery index (for URL)\r\n            galleryUID: slides[0].gid,\r\n\r\n            shareEl: slides[0].thumbnailContainer ? slides[0].thumbnailContainer.getElementsByClassName('social-share-button').length>0 : false,\r\n\r\n            downloadEl : slides[0].thumbnailContainer ? slides[0].thumbnailContainer.getElementsByClassName('eg-download').length>0 : false,\r\n\r\n            add2cartEl: slides[0].thumbnailContainer ? slides[0].thumbnailContainer.getElementsByClassName('eventgallery-add2cart').length>0 : false,\r\n\r\n            getThumbBoundsFn: disableAnimation? null: function(index) {\r\n                // See Options -> getThumbBoundsFn section of documentation for more info\r\n                let slide = slides[index],\r\n                    thumbnail = slide.thumbnailContainer.getElementsByTagName('img')[0], // find thumbnail\r\n                    pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                    rect = thumbnail.getBoundingClientRect();\r\n\r\n                let w = rect.width,\r\n                    h = rect.height,\r\n                    x,\r\n                    y,\r\n                    ratio = slide.w/slide.h;\r\n\r\n                if (slide.h > slide.w) {\r\n                    x = rect.left;\r\n                    y = rect.top - Math.ceil( ((w / ratio)-h) / 2) + pageYScroll;\r\n                } else {\r\n                    x = rect.left - Math.ceil( ((h * ratio)-w) / 2  );\r\n                    y = rect.top + pageYScroll;\r\n                    w = Math.ceil(h * ratio);\r\n                }\r\n                return {x, y, w};\r\n            },\r\n            overlayClass : Overlay\r\n\r\n\r\n\r\n        };\r\n\r\n        // disable close gestures to avoid trouble with the add2cart dialog.\r\n        options.pinchToClose = !options.add2cartEl;\r\n        options.closeOnVerticalDrag = !options.add2cartEl;\r\n        options.closeOnScroll = !options.add2cartEl;\r\n\r\n        if (window.EventGalleryLightboxConfiguration) {\r\n            if (parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay) > 0) {\r\n                options.timeToIdle = parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay);\r\n                options.timeToIdleOutside = parseInt(window.EventGalleryLightboxConfiguration.navigationFadeDelay);\r\n            }\r\n        }\r\n\r\n        // PhotoSwipe opened from URL\r\n        if(fromURL) {\r\n            if(options.galleryPIDs) {\r\n                index = parseInt(index, 10);\r\n                // parse real index when custom PIDs are used\r\n                // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\r\n                for(let j = 0; j < slides.length; j++) {\r\n                    if(slides[j].pid === index) {\r\n                        options.index = j;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                // in URL indexes start from 1\r\n                options.index = parseInt(index, 10) - 1;\r\n            }\r\n        } else {\r\n            options.index = parseInt(index, 10);\r\n        }\r\n\r\n        // exit if index not found\r\n        if( isNaN(options.index) ) {\r\n            return;\r\n        }\r\n\r\n        if(disableAnimation) {\r\n            options.showAnimationDuration = 0;\r\n        }\r\n\r\n        // Pass data to PhotoSwipe and initialize it\r\n        this._gallery = new PhotoSwipe( pswpElement, PhotoSwipeUIDefault, slides, options);\r\n        this._gallery.init();\r\n\r\n        this.initSlideShow();\r\n\r\n        this._isOpen = true;\r\n        this._gallery.listen('close', () => {\r\n            return this._isOpen = false;\r\n        });\r\n\r\n        this._gallery.listen('afterChange', () => {\r\n            document.dispatchEvent(Polyfill.createNewEvent('eventgallery-lightbox-changed'));\r\n        });\r\n\r\n        document.dispatchEvent(Polyfill.createNewEvent('eventgallery-lightbox-opened'));\r\n    };\r\n\r\n    initPhotoSwipe() {\r\n        PhotoSwipeGallery.appendControlls();\r\n\r\n        this._registerClickEvents();\r\n\r\n        // Parse URL and open gallery if it contains #&pid=3&gid=1\r\n        let hashData = PhotoSwipeGallery.parseHash();\r\n        if(hashData.pid && hashData.gid) {\r\n            this.openPhotoSwipe( hashData.pid ,  this.getGalleries().get(hashData.gid), true, true );\r\n        }\r\n    };\r\n\r\n    _registerClickEvents() {\r\n        // loop through all gallery elements and bind events\r\n        let galleries = this.getGalleries();\r\n\r\n        for(let gallery of galleries.values()) {\r\n            for (let i = 0, l = gallery.length; i < l; i++) {\r\n                gallery[i].thumbnailContainer.onclick = (e) => {this.onThumbnailsClick(e)};\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * grabs the current slide from the lightbox\r\n     * @returns PhotoSwipeGallerySlide\r\n     */\r\n    getCurrentSlide() {\r\n        return this._gallery.currItem;\r\n    }\r\n\r\n    /**\r\n     * Returns the index if the current item in the lightbox\r\n     *\r\n     * @returns {int}\r\n     */\r\n    getCurrentIndex() {\r\n        return this._gallery.getCurrentIndex();\r\n    }\r\n\r\n    /**\r\n     * reinitiate the lightbox. Register the click events for existing and new elements.\r\n     */\r\n    reload() {\r\n        this._registerClickEvents();\r\n    }\r\n\r\n    /**\r\n     * reports back if the lightbox is currently open\r\n     * @returns {boolean}\r\n     */\r\n    isOpen() {\r\n        return this._isOpen;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param afterChangeFunction\r\n     */\r\n    setAfterChangeEventListener(afterChangeFunction) {\r\n        this._gallery.listen('afterChange', afterChangeFunction);\r\n    }\r\n\r\n    /**\r\n     * jump to a specific slide.\r\n     * @param index\r\n     */\r\n    gotoSlide(index) {\r\n        this._gallery.goTo(index);\r\n    }\r\n\r\n    /**\r\n     * Adds a slide to the slide deck of the current _gallery\r\n     * @param slide PhotoSwipeGallerySlide\r\n     */\r\n    pushSlide(slide) {\r\n        this._gallery.items.push(slide);\r\n    }\r\n\r\n    /**\r\n     * removes a slide from the slide deck of the current _gallery\r\n     * @returns {PhotoSwipeGallerySlide}\r\n     */\r\n    popSlide() {\r\n        return this._gallery.items.pop();\r\n    }\r\n\r\n    /**\r\n     * reloads a slide after a modification\r\n     */\r\n    reloadSlide() {\r\n        this._gallery.invalidateCurrItems();\r\n        this._gallery.updateSize(true);\r\n    }\r\n\r\n    /**\r\n     * switch to the next slide\r\n     */\r\n    nextSlide() {\r\n        this._gallery.next();\r\n    }\r\n\r\n    /**\r\n     * Fire up the slide show stuff\r\n     */\r\n    initSlideShow() {\r\n        if (!window.EventGalleryLightboxConfiguration) {\r\n            return;\r\n        }\r\n\r\n        if (!window.EventGalleryLightboxConfiguration.doUseSlideshow) {\r\n\r\n            return;\r\n        }\r\n\r\n        document.getElementsByClassName(PSW_CONTROLS_SLIDESHOW_BUTTON_ELEMENT_CLASS)[0].classList.remove(PSW_HIDE_CLASS);\r\n\r\n        let slideShow = new SlideShow(this);\r\n        slideShow.setDelay(window.EventGalleryLightboxConfiguration.slideshowSpeed);\r\n\r\n        if (window.EventGalleryLightboxConfiguration.doUseAutoplay) {\r\n            slideShow.toggleSlideShowState();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * make the listen function of PhotoSwipe available\r\n     *\r\n     * @param eventName\r\n     * @param fn\r\n     */\r\n    listen(eventName, fn) {\r\n        this._gallery.listen(eventName, fn);\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n/* override handling of Esc key to stop slideshow on first esc (note Esc to leave fullscreen never gets here) */\r\n\r\n/*$(document).keydown(function(e) {\r\n    if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;\r\n    if ((e.key === \"Escape\" || e.which == 27 ) && !!lightBox) {\r\n        if (e.preventDefault)  e.preventDefault();\r\n        else  e.returnValue = false;\r\n        if (ssRunning) {\r\n            setSlideshowState(ssButtonClass, false);\r\n        } else {\r\n            lightBox.close();\r\n        }\r\n    }\r\n});\r\n*/\r\n","\r\nexport default class PhotoSwipeGallerySlide {\r\n    constructor() {\r\n        this.w = 0;\r\n        this.h = 0;\r\n        this.src = '';\r\n        this.title = '';\r\n        this.pid = '';\r\n        this.gid = '';\r\n        this.thumbnailContainer = null;\r\n        this.msrc= '';\r\n    }\r\n\r\n    hash() {\r\n        return this.gid + this.src;\r\n    }\r\n}\r\n","import PhotoSwipeGallery from \"./PhotoSwipeGallery\";\r\n\r\n/**\r\n * Builds a slide show on top of PhotoSwipe.\r\n */\r\nexport default class SlideShow {\r\n\r\n    /**\r\n     *\r\n     * @param photoSwipeGallery PhotoSwipeGallery\r\n     */\r\n    constructor(photoSwipeGallery) {\r\n        this._photoSwipeGallery = photoSwipeGallery;\r\n        this._SlideShow_Running = false;\r\n        this._currentTimer = null;\r\n        this._SlideShow_Delay = 2000 /*ms*/;\r\n        this._SlideShow_Button = document.getElementsByClassName('pswp__button--playpause')[0];\r\n\r\n        let interactionHandler = (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return this.toggleSlideShowState();\r\n        };\r\n\r\n        // take care about both click and touch.\r\n        this._SlideShow_Button.onclick = interactionHandler;\r\n        this._SlideShow_Button.ontouchstart = interactionHandler;\r\n\r\n        this._photoSwipeGallery.listen('afterChange', () => {\r\n            this._planNextSwitch(false);\r\n        });\r\n\r\n        this._photoSwipeGallery.listen('destroy', () => this._photoSwipeGallery=null);\r\n\r\n        this._photoSwipeGallery.listen('userInteractionHappened', () => this._stopSlideshow());\r\n        this._photoSwipeGallery.listen('mainScrollAnimStart', () => this._stopSlideshow());\r\n\r\n\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param delay int\r\n     */\r\n    setDelay(delay) {\r\n        this._SlideShow_Delay = delay;\r\n    }\r\n\r\n    /**\r\n     * switches the slide show on/off depending on the current state\r\n     */\r\n    toggleSlideShowState() {\r\n\r\n        if (this._SlideShow_Running) {\r\n            this._stopSlideshow();\r\n        } else {\r\n            this._startSlideshow();\r\n        }\r\n    }\r\n\r\n    _stopSlideshow() {\r\n        this._SlideShow_Running = false;\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    _startSlideshow() {\r\n        this._SlideShow_Running = true;\r\n        this._planNextSwitch(true);\r\n        this._adjustNavigation();\r\n    }\r\n\r\n    /**\r\n     * make sure the navigation displays the current slide show state.\r\n     */\r\n    _adjustNavigation() {\r\n        this._SlideShow_Button.classList.remove(this._SlideShow_Running ? \"play\" : \"pause\");\r\n        this._SlideShow_Button.classList.add(this._SlideShow_Running ? \"pause\" : \"play\");\r\n        this._SlideShow_Button.setAttribute('title', this._SlideShow_Running ? this._SlideShow_Button.getAttribute('data-title-pause'): this._SlideShow_Button.getAttribute('data-title-play'));\r\n    }\r\n\r\n    /**\r\n     * create the timeout for the next switch.\r\n     *\r\n     * @param isForTheFirstSwitch Boolean changes the switch time so the first switch can be faster\r\n     */\r\n    _planNextSwitch(isForTheFirstSwitch)  {\r\n        clearTimeout(this._currentTimer);\r\n        this._currentTimer = setTimeout(() => this._nextSlide(), isForTheFirstSwitch ? this._SlideShow_Delay / 2.0 :this._SlideShow_Delay);\r\n    }\r\n\r\n    /**\r\n     * change to the next slide\r\n     */\r\n    _nextSlide() {\r\n        if (this._photoSwipeGallery === null) {\r\n            return;\r\n        }\r\n\r\n        if (!this._SlideShow_Running) {\r\n            return;\r\n        }\r\n\r\n        this._photoSwipeGallery.nextSlide();\r\n    }\r\n}","export default class URLHelper {\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * splits a URL parameter like foo=bar&1=2 into a parameter map\r\n     *\r\n     * @param urlParameterString\r\n     * @returns {Map<any, any>}\r\n     */\r\n    static parseURLParameter(urlParameterString) {\r\n        let pairs = urlParameterString.split('&');\r\n        let parameters = new Map();\r\n\r\n        pairs.forEach(pair => {\r\n            let splittedPair = pair.split('=');\r\n            if (splittedPair.length === 2) {\r\n                parameters.set(splittedPair[0], splittedPair[1]);\r\n            }\r\n        });\r\n\r\n        return parameters;\r\n    }\r\n\r\n    /**\r\n     * returns a map of the query string of an full url\r\n     *\r\n     * @param urlSring\r\n     * @returns {URLSearchParams}\r\n     */\r\n    static getParameters(urlSring) {\r\n        let parts = urlSring.split('?');\r\n        if (parts.length < 2) {\r\n            return new Map();\r\n        }\r\n        let queryParts = parts[1].split('#');\r\n        return URLHelper.parseURLParameter(queryParts[0]);\r\n    }\r\n\r\n    /**\r\n     * returns the url from strings like \"url ('foobar.jpg')\"\r\n     *\r\n     * @param urlString\r\n     * @returns {*}\r\n     */\r\n    static extractBackgroudUrl(urlString) {\r\n        return urlString.replace(/(url\\(|\\)|\"|')/g, '');\r\n    }\r\n};\r\n\r\n\r\n","import EventsHandler from \"../utils/eventshandler\";\r\n\r\nexport default function (Glide, Components, Events) {\r\n    /**\r\n     * Instance of the binder for DOM Events.\r\n     *\r\n     * @type {EventsHandler}\r\n     */\r\n    const Binder = new EventsHandler();\r\n\r\n    /**\r\n     * Holds preventing status of anchors.\r\n     * If `true` redirection after click will be disabled.\r\n     *\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    let prevented = false;\r\n\r\n    let isSwiping = false;\r\n\r\n    const Anchors = {\r\n        /**\r\n         * Setups a initial state of anchors component.\r\n         *\r\n         */\r\n        mount () {\r\n            /**\r\n             * Holds collection of anchors elements.\r\n             *\r\n             * @private\r\n             * @type {HTMLCollection}\r\n             */\r\n            this._a = Components.Html.wrapper.querySelectorAll('a,span,img');\r\n\r\n            this.bind();\r\n            isSwiping = false;\r\n        },\r\n\r\n        /**\r\n         * Binds events to anchors inside a track.\r\n         *\r\n         */\r\n        bind () {\r\n            Binder.on('click', Components.Html.wrapper, this.click, true)\r\n        },\r\n\r\n        /**\r\n         * Unbinds events attached to anchors inside a track.\r\n         *\r\n         */\r\n        unbind () {\r\n            Binder.off('click', Components.Html.wrapper)\r\n        },\r\n\r\n        /**\r\n         * Handler for click event. Prevents clicks when glide is in `prevent` status.\r\n         *\r\n         * @param  {Object} event\r\n         */\r\n        click (event) {\r\n            if (prevented) {\r\n                event.stopPropagation();\r\n                event.preventDefault()\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Detaches anchors click event inside glide.\r\n         *\r\n         * @return {self}\r\n         */\r\n        detach () {\r\n            prevented = true;\r\n\r\n            return this\r\n        },\r\n\r\n        /**\r\n         * Attaches anchors click events inside glide.\r\n         *\r\n         * @return {self}\r\n         */\r\n        attach () {\r\n            prevented = false;\r\n\r\n            return this\r\n        }\r\n    };\r\n\r\n    Object.defineProperty(Anchors, 'items', {\r\n        /**\r\n         * Gets collection of the arrows HTML elements.\r\n         *\r\n         * @return {HTMLElement[]}\r\n         */\r\n        get () {\r\n            return Anchors._a\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Detach anchors inside slides:\r\n     * - on swiping, so they won't redirect to its `href` attributes\r\n     */\r\n    Events.on('swipe.move', () => {\r\n        Anchors.detach();\r\n    });\r\n\r\n    /**\r\n     * Attach anchors inside slides:\r\n     * - after swiping and transitions ends, so they can redirect after click again\r\n     */\r\n    Events.on('swipe.end', () => {\r\n        Components.Transition.after(() => {\r\n            Anchors.attach()\r\n        });\r\n    });\r\n\r\n    /**\r\n     * Unbind anchors inside slides:\r\n     * - on destroying, to bring anchors to its initial state\r\n     */\r\n    Events.on('destroy', () => {\r\n        Anchors.attach();\r\n        Anchors.unbind();\r\n        Binder.destroy()\r\n    });\r\n\r\n    return Anchors\r\n}\r\n","import CamelCaseConverter from \"../utils/camelCaseConverter\";\r\n\r\nconst prefix = \"data-slider-\";\r\n\r\nexport default class SliderOptions {\r\n\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.options = Object.assign({\r\n            autoplay: false,\r\n            slidesElementsSelector: '',\r\n            numberOfRowsPerSlide: 1,\r\n            showNav: 'true',\r\n        }, SliderOptions._parseOptions(element));\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param element HTMLElement\r\n     * @private\r\n     */\r\n    static _parseOptions(element) {\r\n        let options = {};\r\n\r\n        let attributes = element.attributes;\r\n        for (let i =0; i< attributes.length; i++) {\r\n            if (attributes[i].name.indexOf(prefix) === 0) {\r\n                options[CamelCaseConverter.toCamelCase(attributes[i].name.replace(prefix,''))] = attributes[i].value;\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    getAutoPlay() {\r\n\r\n        if (this.options.autoplay === false) {\r\n            return false;\r\n        }\r\n        return parseInt(this.options.autoplay);\r\n    }\r\n\r\n    getSlidesElementsSelector() {\r\n        return this.options.slidesElementsSelector;\r\n    }\r\n\r\n    doShowNav() {\r\n        return this.options.showNav === 'true';\r\n    }\r\n\r\n    getNumberOfRowsPerSlide() {\r\n        return parseInt(this.options.numberOfRowsPerSlide);\r\n    }\r\n}\r\n","import Anchor from \"../glide_modules/anchor\"\r\nimport Glide, { Controls, Breakpoints, Swipe, Autoplay, Images  } from '@glidejs/glide/dist/glide.modular.esm'\r\nimport SliderTransformator from \"./SliderTransformator\";\r\nimport SliderOptions from \"./SliderOptions\";\r\nimport ElementSize from \"../utils/ElementSize\";\r\nimport EventgalleryLazyload from \"../EventgalleryLazyload\";\r\n\r\nexport default class SliderStarter {\r\n\r\n    constructor(sourceGroupElement) {\r\n        this.sourceGroupElement = sourceGroupElement;\r\n        this.sliderTransformator = null;\r\n    }\r\n\r\n    start() {\r\n\r\n        this.sliderOptions = SliderStarter._loadOptions(this.sourceGroupElement);\r\n\r\n        let sourceElementSelector = this.sliderOptions.getSlidesElementsSelector();\r\n        let autoplay = this.sliderOptions.getAutoPlay();\r\n        let doShowNav = this.sliderOptions.doShowNav();\r\n        let numberOfItemsPerSlide = ElementSize.calclateNumberOfFittingItemsPerSlide(this.sourceGroupElement, this.sourceGroupElement.querySelector(sourceElementSelector), this.sliderOptions.getNumberOfRowsPerSlide());\r\n\r\n        if (null == this.sliderTransformator) {\r\n            this.sliderTransformator = new SliderTransformator(this.sourceGroupElement, sourceElementSelector, doShowNav);\r\n        }\r\n        let rootElement = this.sliderTransformator.transform(numberOfItemsPerSlide);\r\n\r\n        if (rootElement === null) {\r\n            return;\r\n        }\r\n\r\n        EventgalleryLazyload.watchImages();\r\n\r\n        let glide = new Glide(rootElement, {\r\n            type: 'carousel',\r\n            perView: 1,\r\n            gap: 15,\r\n            keyboard: false,\r\n            autoplay: autoplay\r\n        });\r\n\r\n        glide.mount({ Swipe, Controls, Breakpoints, Autoplay, Anchor, Images  });\r\n\r\n    }\r\n\r\n    static _loadOptions(element) {\r\n        return new SliderOptions(element);\r\n    }\r\n\r\n\r\n}\r\n","import Polyfill from \"../Polyfill\";\r\n\r\nconst sliderRootSelector = '.glide';\r\nconst sliderGroupSelector = '.glide__slides';\r\nconst basicMarkup = `\r\n<div class=\"glide\">\r\n    <div class=\"glide__track\" data-glide-el=\"track\">\r\n        <ul class=\"glide__slides\">            \r\n        </ul>\r\n    </div>\r\n    <div class=\"glide__arrows\" data-glide-el=\"controls\">\r\n        <button class=\"glide__arrow glide__arrow--left\" data-glide-dir=\"<\">prev</button>\r\n        <button class=\"glide__arrow glide__arrow--right\" data-glide-dir=\">\">next</button>\r\n    </div>\r\n</div>`;\r\n\r\nexport default class SliderTransformator {\r\n\r\n    constructor(sourceGroupElement, sourceElementSelector, doShowNav) {\r\n        this.elementSelector = sourceElementSelector;\r\n        this.sourceGroupElement = sourceGroupElement;\r\n        this.doShowNav = doShowNav;\r\n        this.sourceElements = this.getSourceElements();\r\n    }\r\n\r\n    getSourceElements() {\r\n        if (this.sourceGroupElement === null) {\r\n            return null;\r\n        }\r\n        return this.sourceGroupElement.querySelectorAll(this.elementSelector);\r\n    }\r\n\r\n    transform(numberOfItemsPerSlide) {\r\n        if (this.sourceGroupElement === null || this.sourceElements === null) {\r\n            return null;\r\n        }\r\n\r\n        if (this.sourceElements.length === 0) {\r\n            return null;\r\n        }\r\n        // cleanup\r\n        let sliderRoot = this.sourceGroupElement.querySelector(sliderRootSelector);\r\n\r\n        if (sliderRoot !== null) {\r\n            sliderRoot.remove();\r\n        }\r\n        // transformation\r\n\r\n        let sliderMarkup = document.createRange().createContextualFragment(basicMarkup);\r\n        if (!this.doShowNav) {\r\n\r\n            let controlElement = sliderMarkup.querySelector('.glide__arrows');\r\n\r\n            Polyfill.removeHtmlElementNode(controlElement);\r\n        }\r\n        let sliderGroupElement = sliderMarkup.querySelector(sliderGroupSelector);\r\n        let currentSliderElement = null;\r\n\r\n        for(let index=0; index<this.sourceElements.length; index++) {\r\n            let element = this.sourceElements[index];\r\n            if (index % numberOfItemsPerSlide === 0) {\r\n                currentSliderElement = document.createElement('li');\r\n                currentSliderElement.className = 'glide__slide';\r\n                sliderGroupElement.appendChild(currentSliderElement);\r\n            }\r\n            currentSliderElement.appendChild(element);\r\n        }\r\n\r\n        this.sourceGroupElement.appendChild(sliderMarkup);\r\n\r\n        return this.sourceGroupElement.querySelector(sliderRootSelector);\r\n\r\n    }\r\n\r\n}\r\n","export default class ElementSize {\r\n    /**\r\n     *\r\n     * @param element\r\n     * @returns float\r\n     */\r\n    static getOuterWidth(element) {\r\n        var domRect = element.getBoundingClientRect();\r\n        let computedStyle = getComputedStyle(element);\r\n        let marginLeft = parseFloat(computedStyle.marginLeft);\r\n        let marginRight = parseFloat(computedStyle.marginRight);\r\n        return domRect.width + marginLeft + marginRight;\r\n    }\r\n\r\n    /**\r\n     * Tries to find out, how many elements we can fit into the container so\r\n     * they do not wrap.\r\n     *\r\n     * @param containerElement\r\n     * @param element\r\n     * @param numberOfRows\r\n     * @returns {number}\r\n     */\r\n    static calclateNumberOfFittingItemsPerSlide(containerElement, element, numberOfRows) {\r\n\r\n        if (null == element || containerElement == null) {\r\n            return 1;\r\n        }\r\n\r\n        var domRect = containerElement.getBoundingClientRect();\r\n        let numberOfItemsPerSlide = Math.floor(domRect.width / ElementSize.getOuterWidth(element)) * numberOfRows;\r\n\r\n\r\n        if (numberOfItemsPerSlide < 1) {\r\n            numberOfItemsPerSlide = 1 * numberOfRows;\r\n        }\r\n\r\n        return numberOfItemsPerSlide;\r\n    }\r\n}\r\n","export default class CamelCaseConverter {\r\n\r\n    static toCamelCase(str) {\r\n        return str.replace(/-([a-z])/g, function (m, w) {\r\n            return w.toUpperCase();\r\n        });\r\n    }\r\n}\r\n","import {isString, isArray, isNodeList} from \"./units\";\r\n\r\nexport default class EventsHandler {\r\n    /**\r\n     * Construct a EventsHandler instance.\r\n     */\r\n    constructor (listeners = {}) {\r\n        this.listeners = listeners;\r\n    }\r\n\r\n    /**\r\n     * Adds events listeners to arrows HTML elements.\r\n     *\r\n     * @param  {String|Array} events\r\n     * @param  {NodeList|Element|Window|Document} el\r\n     * @param  {Function} closure\r\n     * @param  {boolean} capture\r\n     */\r\n    on (events, el, closure, capture = false) {\r\n        if (isString(events)) {\r\n            events = [events]\r\n        }\r\n\r\n        if (!isNodeList(el) && !isArray(el)) {\r\n            el = [el];\r\n        }\r\n\r\n        events.forEach((event)=> {\r\n            this.listeners[event] = {'closure': closure, 'capture': capture};\r\n\r\n            for (let i=0; i<el.length;i++) {\r\n                el[i].addEventListener(event, this.listeners[event].closure, this.listeners[event].capture)\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Removes event listeners from arrows HTML elements.\r\n     *\r\n     * @param  {String|Array} events\r\n     * @param  {NodeList|Element|Window|Document} el\r\n     */\r\n    off (events, el) {\r\n        if (isString(events)) {\r\n            events = [events]\r\n        }\r\n\r\n        if (!isNodeList(el) && !isArray(el)) {\r\n            el = [el];\r\n        }\r\n\r\n        events.forEach((event) => {\r\n            for (let i=0; i<el.length;i++) {\r\n                let listener = this.listeners[event];\r\n                if (listener === undefined) {\r\n                    continue;\r\n                }\r\n                el[i].removeEventListener(event, listener.closure, listener.capture)\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Destroy collected listeners.\r\n     *\r\n     */\r\n    destroy () {\r\n        delete this.listeners\r\n    }\r\n}\r\n","\r\n/**\r\n * Indicates whether the specified value is a string.\r\n *\r\n * @param  {*}   value\r\n * @return {Boolean}\r\n */\r\nexport function isString (value) {\r\n    return typeof value === 'string'\r\n}\r\n\r\nexport function isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\n\r\nexport function isNodeList(value) {\r\n    return NodeList.prototype.isPrototypeOf(value);\r\n}\r\n","/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n/**\n*\n* UI on top of main sliding area (caption, arrows, close button, etc.).\n* Built just using public methods/properties of PhotoSwipe.\n* \n*/\nexport default function(pswp, framework) {\n\n\tvar ui = this;\n\tvar _overlayUIUpdated = false,\n\t\t_controlsVisible = true,\n\t\t_fullscrenAPI,\n\t\t_controls,\n\t\t_captionContainer,\n\t\t_fakeCaptionContainer,\n\t\t_indexIndicator,\n\t\t_shareButton,\n\t\t_shareModal,\n\t\t_add2cartButton,\n\t\t_add2cartOverlay,\n\t\t_shareModalHidden = true,\n        _add2cartModalHidden = true,\n\t\t_initalCloseOnScrollValue,\n\t\t_isIdle,\n\t\t_listen,\n\n\t\t_loadingIndicator,\n\t\t_loadingIndicatorHidden,\n\t\t_loadingIndicatorTimeout,\n\n\t\t_galleryHasOneSlide,\n\n\t\t_options,\n\t\t_defaultUIOptions = {\n\t\t\tbarsSize: {top:44, bottom:'auto'},\n\t\t\tcloseElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'], \n\t\t\ttimeToIdle: 4000, \n\t\t\ttimeToIdleOutside: 1000,\n\t\t\tloadingIndicatorDelay: 1000, // 2s\n\t\t\t\n\t\t\taddCaptionHTMLFn: function(item, captionEl /*, isFake */) {\n\t\t\t\tif(!item.title) {\n\t\t\t\t\tcaptionEl.children[0].innerHTML = '';\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcaptionEl.children[0].innerHTML = item.title;\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tcloseEl:true,\n\t\t\tcaptionEl: true,\n\t\t\tfullscreenEl: true,\n\t\t\tzoomEl: true,\n\t\t\tshareEl: true,\n\t\t\tdownloadEl: true,\n\t\t\tcounterEl: true,\n\t\t\tarrowEl: true,\n\t\t\tpreloaderEl: true,\n\n\t\t\ttapToClose: false,\n\t\t\ttapToToggleControls: true,\n\n\t\t\tclickToCloseNonZoomable: true,\n\n\t\t\tshareButtons: [\n\t\t\t\t{id:'facebook', label:'Share on Facebook', url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},\n\t\t\t\t{id:'twitter', label:'Tweet', url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},\n\t\t\t\t{id:'pinterest', label:'Pin it', url:'http://www.pinterest.com/pin/create/button/'+\n\t\t\t\t\t\t\t\t\t\t\t\t\t'?url={{url}}&media={{image_url}}&description={{text}}'},\n\t\t\t\t{id:'download', label:'Download image', url:'{{raw_image_url}}', download:true}\n\t\t\t],\n\t\t\tgetImageURLForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn pswp.currItem.src || '';\n\t\t\t},\n\t\t\tgetPageURLForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn window.location.href;\n\t\t\t},\n\t\t\tgetTextForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn pswp.currItem.title || '';\n\t\t\t},\n\t\t\t\t\n\t\t\tindexIndicatorSep: ' / ',\n\t\t\tfitControlsWidth: 1200\n\n\t\t},\n\t\t_blockControlsTap,\n\t\t_blockControlsTapTimeout;\n\n\n\n\tvar _onControlsTap = function(e) {\n\t\t\tif(_blockControlsTap) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\n\t\t\te = e || window.event;\n\n\t\t\tif(_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n\t\t\t\t// reset idle timer\n\t\t\t\t_onIdleMouseMove();\n\t\t\t}\n\n\n\t\t\tvar target = e.target || e.srcElement,\n\t\t\t\tuiElement,\n\t\t\t\tclickedClass = target.getAttribute('class') || '',\n\t\t\t\tfound;\n\n\t\t\tfor(var i = 0; i < _uiElements.length; i++) {\n\t\t\t\tuiElement = _uiElements[i];\n\t\t\t\tif(uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name ) > -1 ) {\n\t\t\t\t\tuiElement.onTap();\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(found) {\n\t\t\t\tif(e.stopPropagation) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\t_blockControlsTap = true;\n\n\t\t\t\t// Some versions of Android don't prevent ghost click event \n\t\t\t\t// when preventDefault() was called on touchstart and/or touchend.\n\t\t\t\t// \n\t\t\t\t// This happens on v4.3, 4.2, 4.1, \n\t\t\t\t// older versions strangely work correctly, \n\t\t\t\t// but just in case we add delay on all of them)\t\n\t\t\t\tvar tapDelay = framework.features.isOldAndroid ? 600 : 30;\n\t\t\t\t_blockControlsTapTimeout = setTimeout(function() {\n\t\t\t\t\t_blockControlsTap = false;\n\t\t\t\t}, tapDelay);\n\t\t\t}\n\n\t\t},\n\t\t_fitControlsInViewport = function() {\n\t\t\treturn !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n\t\t},\n\t\t_togglePswpClass = function(el, cName, add) {\n\t\t\tframework[ (add ? 'add' : 'remove') + 'Class' ](el, 'pswp__' + cName);\n\t\t},\n\n\t\t// add class when there is just one item in the gallery\n\t\t// (by default it hides left/right arrows and 1ofX counter)\n\t\t_countNumItems = function() {\n\t\t\tvar hasOneSlide = (_options.getNumItemsFn() === 1);\n\n\t\t\tif(hasOneSlide !== _galleryHasOneSlide) {\n\t\t\t\t_togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n\t\t\t\t_galleryHasOneSlide = hasOneSlide;\n\t\t\t}\n\t\t},\n\t\t_toggleShareModalClass = function() {\n\t\t\t_togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n\t\t},\n\t\t_toggleShareModal = function() {\n\n\t\t\t_shareModalHidden = !_shareModalHidden;\n\t\t\t\n\t\t\t\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModalClass();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(!_shareModalHidden) {\n\t\t\t\t\t\tframework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n\t\t\t\t\t}\n\t\t\t\t}, 30);\n\t\t\t} else {\n\t\t\t\tframework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(_shareModalHidden) {\n\t\t\t\t\t\t_toggleShareModalClass();\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t\t\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_updateShareURLs();\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n        _toggleAdd2cartModal = function() {\n\n            _add2cartModalHidden = !_add2cartModalHidden;\n\n\n            if(!_add2cartModalHidden) {\n                if(_fullscrenAPI.isFullscreen()) {\n                    _fullscrenAPI.exit();\n                }\n                _add2cartOverlay = new _options.overlayClass();\n                _add2cartOverlay.onClosed = () => {\n\t\t\t\t\tif (!_add2cartModalHidden) {\n\t\t\t\t\t\t_toggleAdd2cartModal();\n\t\t\t\t\t}\n\t\t\t\t}\n\n            } else {\n            \t_add2cartOverlay.closeOverlay();\n            }\n\n            if(!_add2cartModalHidden) {\n                _updateAdd2cartContent();\n            }\n            return false;\n        },\n\n\t\t_openWindowPopup = function(e) {\n\t\t\te = e || window.event;\n\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\tpswp.shout('shareLinkClick', e, target);\n\n\t\t\tif(!target.href) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif( target.hasAttribute('download') ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\twindow.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,'+\n\t\t\t\t\t\t\t\t\t\t'location=yes,width=550,height=420,top=100,left=' + \n\t\t\t\t\t\t\t\t\t\t(window.screen ? Math.round(screen.width / 2 - 275) : 100)  );\n\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModal();\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t},\n        /**\n         * EVENT GALLERY CUSTOMIZATION\n         * @private\n         */\n\t\t_updateShareURLs = function() {\n\t\t\tlet sharingButtons = pswp.currItem.thumbnailContainer.getElementsByClassName('social-share-button');\n\n\t\t\tif (sharingButtons.length > 0) {\n\t\t\t\tlet sharingButton = sharingButtons[0];\n\n                _shareModal.children[0].innerHTML = '<a><i class=\"egfa egfa-2x egfa-cog egfa-spin\"></i></a>';\n                Eventgallery.jQuery(_shareModal.children[0]).load(sharingButton.getAttribute('data-link'));\n            }\n\n\t\t\t_shareModal.children[0].onclick = (e) => {\n\n                if(!_shareModalHidden) {\n                    _toggleShareModal();\n                }\n\n\t\t\t}\n\t\t},\n        _updateAdd2cartContent = function() {\n            let add2cartButtons = pswp.currItem.thumbnailContainer.getElementsByClassName('eventgallery-add2cart');\n\n            if (add2cartButtons.length > 0) {\n                let add2cartButton = add2cartButtons[0];\n\t\t\t\tlet url = EventGalleryCartConfiguration.add2carturl + '&' + add2cartButton.getAttribute('data-id');\n                _add2cartOverlay.openOverlay(url);\n            }\n\n        },\n\t\t_hasCloseClass = function(target) {\n\t\t\tfor(var  i = 0; i < _options.closeElClasses.length; i++) {\n\t\t\t\tif( framework.hasClass(target, 'pswp__' + _options.closeElClasses[i]) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_idleInterval,\n\t\t_idleTimer,\n\t\t_idleIncrement = 0,\n\t\t_onIdleMouseMove = function() {\n\t\t\tclearTimeout(_idleTimer);\n\t\t\t_idleIncrement = 0;\n\t\t\tif(_isIdle) {\n\t\t\t\tui.setIdle(false);\n\t\t\t}\n\t\t},\n\t\t_onMouseLeaveWindow = function(e) {\n\t\t\te = e ? e : window.event;\n\t\t\tvar from = e.relatedTarget || e.toElement;\n\t\t\tif (!from || from.nodeName === 'HTML') {\n\t\t\t\tclearTimeout(_idleTimer);\n\t\t\t\t_idleTimer = setTimeout(function() {\n\t\t\t\t\tui.setIdle(true);\n\t\t\t\t}, _options.timeToIdleOutside);\n\t\t\t}\n\t\t},\n\t\t_setupFullscreenAPI = function() {\n\t\t\tif(_options.fullscreenEl && !framework.features.isOldAndroid) {\n\t\t\t\tif(!_fullscrenAPI) {\n\t\t\t\t\t_fullscrenAPI = ui.getFullscreenAPI();\n\t\t\t\t}\n\t\t\t\tif(_fullscrenAPI) {\n\t\t\t\t\tframework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\t\t\t\t\tui.updateFullscreen();\n\t\t\t\t\tframework.addClass(pswp.template, 'pswp--supports-fs');\n\t\t\t\t} else {\n\t\t\t\t\tframework.removeClass(pswp.template, 'pswp--supports-fs');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setupLoadingIndicator = function() {\n\t\t\t// Setup loading indicator\n\t\t\tif(_options.preloaderEl) {\n\t\t\t\n\t\t\t\t_toggleLoadingIndicator(true);\n\n\t\t\t\t_listen('beforeChange', function() {\n\n\t\t\t\t\tclearTimeout(_loadingIndicatorTimeout);\n\n\t\t\t\t\t// display loading indicator with delay\n\t\t\t\t\t_loadingIndicatorTimeout = setTimeout(function() {\n\n\t\t\t\t\t\tif(pswp.currItem && pswp.currItem.loading) {\n\n\t\t\t\t\t\t\tif( !pswp.allowProgressiveImg() || (pswp.currItem.img && !pswp.currItem.img.naturalWidth)  ) {\n\t\t\t\t\t\t\t\t// show preloader if progressive loading is not enabled, \n\t\t\t\t\t\t\t\t// or image width is not defined yet (because of slow connection)\n\t\t\t\t\t\t\t\t_toggleLoadingIndicator(false); \n\t\t\t\t\t\t\t\t// items-controller.js function allowProgressiveImg\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_toggleLoadingIndicator(true); // hide preloader\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, _options.loadingIndicatorDelay);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t_listen('imageLoadComplete', function(index, item) {\n\t\t\t\t\tif(pswp.currItem === item) {\n\t\t\t\t\t\t_toggleLoadingIndicator(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\t_toggleLoadingIndicator = function(hide) {\n\t\t\tif( _loadingIndicatorHidden !== hide ) {\n\t\t\t\t_togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n\t\t\t\t_loadingIndicatorHidden = hide;\n\t\t\t}\n\t\t},\n\t\t_applyNavBarGaps = function(item) {\n\t\t\tvar gap = item.vGap;\n\n\t\t\tif( _fitControlsInViewport() ) {\n\t\t\t\t\n\t\t\t\tvar bars = _options.barsSize; \n\t\t\t\tif(_options.captionEl && bars.bottom === 'auto') {\n\t\t\t\t\tif(!_fakeCaptionContainer) {\n\t\t\t\t\t\t_fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n\t\t\t\t\t\t_fakeCaptionContainer.appendChild( framework.createEl('pswp__caption__center') );\n\t\t\t\t\t\t_controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n\t\t\t\t\t\tframework.addClass(_controls, 'pswp__ui--fit');\n\t\t\t\t\t}\n\t\t\t\t\tif( _options.addCaptionHTMLFn(item, _fakeCaptionContainer, true) ) {\n\n\t\t\t\t\t\tvar captionSize = _fakeCaptionContainer.clientHeight;\n\t\t\t\t\t\tgap.bottom = parseInt(captionSize,10) || 44;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tgap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// height of top bar is static, no need to calculate it\n\t\t\t\tgap.top = bars.top;\n\t\t\t} else {\n\t\t\t\tgap.top = gap.bottom = 0;\n\t\t\t}\n\t\t},\n\t\t_setupIdle = function() {\n\t\t\t// Hide controls when mouse is used\n\t\t\tif(_options.timeToIdle) {\n\t\t\t\t_listen('mouseUsed', function() {\n\t\t\t\t\t\n\t\t\t\t\tframework.bind(document, 'mousemove', _onIdleMouseMove);\n\t\t\t\t\tframework.bind(document, 'mouseout', _onMouseLeaveWindow);\n\n\t\t\t\t\t_idleInterval = setInterval(function() {\n\t\t\t\t\t\t_idleIncrement++;\n\t\t\t\t\t\tif(_idleIncrement === 2) {\n\t\t\t\t\t\t\tui.setIdle(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, _options.timeToIdle / 2);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_setupHidingControlsDuringGestures = function() {\n\n\t\t\t// Hide controls on vertical drag\n\t\t\t_listen('onVerticalDrag', function(now) {\n\t\t\t\tif(_controlsVisible && now < 0.95) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t} else if(!_controlsVisible && now >= 0.95) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Hide controls when pinching to close\n\t\t\tvar pinchControlsHidden;\n\t\t\t_listen('onPinchClose' , function(now) {\n\t\t\t\tif(_controlsVisible && now < 0.9) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t\tpinchControlsHidden = true;\n\t\t\t\t} else if(pinchControlsHidden && !_controlsVisible && now > 0.9) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_listen('zoomGestureEnded', function() {\n\t\t\t\tpinchControlsHidden = false;\n\t\t\t\tif(pinchControlsHidden && !_controlsVisible) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\n\n\tvar _uiElements = [\n\t\t{ \n\t\t\tname: 'caption', \n\t\t\toption: 'captionEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_captionContainer = el; \n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'share-modal', \n\t\t\toption: 'shareEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_shareModal = el;\n\t\t\t},\n\t\t\tonTap: function() {\n\t\t\t\t_toggleShareModal();\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'button--share', \n\t\t\toption: 'shareEl',\n\t\t\tonInit: function(el) { \n\t\t\t\t_shareButton = el;\n\t\t\t},\n\t\t\tonTap: function() {\n                pswp.shout('userInteractionHappened');\n\t\t\t\t_toggleShareModal();\n\t\t\t} \n\t\t},\n\t\t{\n\t\t\tname: 'button--download',\n\t\t\toption: 'downloadEl',\n\t\t\tonTap: function() {\n\t\t\t\tpswp.shout('userInteractionHappened');\n\t\t\t\tlet downloadButtons = pswp.currItem.thumbnailContainer.getElementsByClassName('eg-download');\n\t\t\t\tif (downloadButtons.length>0) {\n\t\t\t\t\tdownloadButtons[0].click()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t{ \n            name: 'button--add2cart',\n            option: 'add2cartEl',\n            onInit: function(el) {\n                _add2cartButton = el;\n            },\n            onTap: function() {\n                pswp.shout('userInteractionHappened');\n                _toggleAdd2cartModal();\n            }\n        },\n\t\t{\n\t\t\tname: 'button--zoom',\n\t\t\toption: 'zoomEl',\n\t\t\tonTap: () => {\n                pswp.shout('userInteractionHappened');\n                pswp.toggleDesktopZoom()\n            }\n\t\t},\n\t\t{ \n\t\t\tname: 'counter', \n\t\t\toption: 'counterEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_indexIndicator = el;\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'button--close', \n\t\t\toption: 'closeEl',\n\t\t\tonTap: pswp.close\n\t\t},\n\t\t{ \n\t\t\tname: 'button--arrow--left', \n\t\t\toption: 'arrowEl',\n\t\t\tonTap: () => {\n                pswp.shout('userInteractionHappened');\n\t\t\t\tpswp.prev()\n\t\t\t}\n\t\t},\n\t\t{ \n\t\t\tname: 'button--arrow--right', \n\t\t\toption: 'arrowEl',\n\t\t\tonTap: () => {\n                pswp.shout('userInteractionHappened');\n\t\t\t\tpswp.next();\n            }\n\t\t},\n\t\t{ \n\t\t\tname: 'button--fs', \n\t\t\toption: 'fullscreenEl',\n\t\t\tonTap: function() {  \n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\n\t\t\t\t\t_fullscrenAPI.exit();\n\t\t\t\t} else {\n\t\t\t\t\t_fullscrenAPI.enter();\n\t\t\t\t}\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'preloader', \n\t\t\toption: 'preloaderEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_loadingIndicator = el;\n\t\t\t} \n\t\t}\n\n\t];\n\n\tvar _setupUIElements = function() {\n\t\tvar item,\n\t\t\tclassAttr,\n\t\t\tuiElement;\n\n\t\tvar loopThroughChildElements = function(sChildren) {\n\t\t\tif(!sChildren) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar l = sChildren.length;\n\t\t\tfor(var i = 0; i < l; i++) {\n\t\t\t\titem = sChildren[i];\n\t\t\t\tclassAttr = item.className;\n\n\t\t\t\tfor(var a = 0; a < _uiElements.length; a++) {\n\t\t\t\t\tuiElement = _uiElements[a];\n\n\t\t\t\t\tif(classAttr.indexOf('pswp__' + uiElement.name) > -1  ) {\n\n\t\t\t\t\t\tif( _options[uiElement.option] ) { // if element is not disabled from options\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tframework.removeClass(item, 'pswp__element--disabled');\n\t\t\t\t\t\t\tif(uiElement.onInit) {\n\t\t\t\t\t\t\t\tuiElement.onInit(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//item.style.display = 'block';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tframework.addClass(item, 'pswp__element--disabled');\n\t\t\t\t\t\t\t//item.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tloopThroughChildElements(_controls.children);\n\n\t\tvar topBar =  framework.getChildByClass(_controls, 'pswp__top-bar');\n\t\tif(topBar) {\n\t\t\tloopThroughChildElements( topBar.children );\n\t\t}\n\t};\n\n\n\t\n\n\tui.init = function() {\n\n\t\t// extend options\n\t\tframework.extend(pswp.options, _defaultUIOptions, true);\n\n\t\t// create local link for fast access\n\t\t_options = pswp.options;\n\n\t\t// find pswp__ui element\n\t\t_controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui');\n\n\t\t// create local link\n\t\t_listen = pswp.listen;\n\n\n\t\t_setupHidingControlsDuringGestures();\n\n\t\t// update controls when slides change\n\t\t_listen('beforeChange', ui.update);\n\n\t\t// toggle zoom on double-tap\n\t\t_listen('doubleTap', function(point) {\n\t\t\tvar initialZoomLevel = pswp.currItem.initialZoomLevel;\n\t\t\tif(pswp.getZoomLevel() !== initialZoomLevel) {\n\t\t\t\tpswp.zoomTo(initialZoomLevel, point, 333);\n\t\t\t} else {\n\t\t\t\tpswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n\t\t\t}\n\t\t});\n\n\t\t// Allow text selection in caption\n\t\t_listen('preventDragEvent', function(e, isDown, preventObj) {\n\t\t\tvar t = e.target || e.srcElement;\n\t\t\tif(\n\t\t\t\tt && \n\t\t\t\tt.getAttribute('class') && e.type.indexOf('mouse') > -1 && \n\t\t\t\t( t.getAttribute('class').indexOf('__caption') > 0 || (/(SMALL|STRONG|EM)/i).test(t.tagName) ) \n\t\t\t) {\n\t\t\t\tpreventObj.prevent = false;\n\t\t\t}\n\t\t});\n\n\t\t// bind events for UI\n\t\t_listen('bindEvents', function() {\n\t\t\tframework.bind(_controls, 'pswpTap click', _onControlsTap);\n\t\t\tframework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n\t\t\tif(!pswp.likelyTouchDevice) {\n\t\t\t\tframework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\t\t\t}\n\t\t});\n\n\t\t// unbind events for UI\n\t\t_listen('unbindEvents', function() {\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModal();\n\t\t\t}\n\n            if(!_add2cartModalHidden) {\n                _toggleAdd2cartModal();\n            }\n\n\t\t\tif(_idleInterval) {\n\t\t\t\tclearInterval(_idleInterval);\n\t\t\t}\n\t\t\tframework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n\t\t\tframework.unbind(document, 'mousemove', _onIdleMouseMove);\n\t\t\tframework.unbind(_controls, 'pswpTap click', _onControlsTap);\n\t\t\tframework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\t\t\tframework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n\t\t\tif(_fullscrenAPI) {\n\t\t\t\tframework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\n\t\t\t\t\t_options.hideAnimationDuration = 0;\n\t\t\t\t\t_fullscrenAPI.exit();\n\t\t\t\t}\n\t\t\t\t_fullscrenAPI = null;\n\t\t\t}\n\t\t});\n\n\n\t\t// clean up things when gallery is destroyed\n\t\t_listen('destroy', function() {\n\t\t\tif(_options.captionEl) {\n\t\t\t\tif(_fakeCaptionContainer) {\n\t\t\t\t\t_controls.removeChild(_fakeCaptionContainer);\n\t\t\t\t}\n\t\t\t\tframework.removeClass(_captionContainer, 'pswp__caption--empty');\n\t\t\t}\n\n\t\t\tif(_shareModal) {\n\t\t\t\t_shareModal.children[0].onclick = null;\n\t\t\t}\n\t\t\tframework.removeClass(_controls, 'pswp__ui--over-close');\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\n\t\t\tui.setIdle(false);\n\t\t});\n\t\t\n\n\t\tif(!_options.showAnimationDuration) {\n\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\n\t\t}\n\t\t_listen('initialZoomIn', function() {\n\t\t\tif(_options.showAnimationDuration) {\n\t\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\n\t\t\t}\n\t\t});\n\t\t_listen('initialZoomOut', function() {\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\n\t\t});\n\n\t\t_listen('parseVerticalMargin', _applyNavBarGaps);\n\t\t\n\t\t_setupUIElements();\n\n\t\tif(_options.shareEl && _shareButton && _shareModal) {\n\t\t\t_shareModalHidden = true;\n\t\t}\n\n        if(_options.add2cartEl && _add2cartButton) {\n            _add2cartModalHidden = true;\n        }\n\n\t\t_countNumItems();\n\n\t\t_setupIdle();\n\n\t\t_setupFullscreenAPI();\n\n\t\t_setupLoadingIndicator();\n\t};\n\n\tui.setIdle = function(isIdle) {\n\t\t_isIdle = isIdle;\n\t\t_togglePswpClass(_controls, 'ui--idle', isIdle);\n\t};\n\n\tui.update = function() {\n\t\t// Don't update UI if it's hidden\n\t\tif(_controlsVisible && pswp.currItem) {\n\t\t\t\n\t\t\tui.updateIndexIndicator();\n\n\t\t\tif(_options.captionEl) {\n\t\t\t\t_options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n\t\t\t\t_togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n\t\t\t}\n\n\t\t\t_overlayUIUpdated = true;\n\n\t\t} else {\n\t\t\t_overlayUIUpdated = false;\n\t\t}\n\n\t\tif(!_shareModalHidden) {\n\t\t\t_toggleShareModal();\n\t\t}\n\n        if(!_add2cartModalHidden) {\n            _toggleAdd2cartModal();\n        }\n\n\t\t_countNumItems();\n\t};\n\n\tui.updateFullscreen = function(e) {\n\n\t\tif(e) {\n\t\t\t// some browsers change window scroll position during the fullscreen\n\t\t\t// so PhotoSwipe updates it just in case\n\t\t\tsetTimeout(function() {\n\t\t\t\tpswp.setScrollOffset( 0, framework.getScrollY() );\n\t\t\t}, 50);\n\t\t}\n\t\t\n\t\t// toogle pswp--fs class on root element\n\t\tframework[ (_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class' ](pswp.template, 'pswp--fs');\n\t};\n\n\tui.updateIndexIndicator = function() {\n\t\tif(_options.counterEl) {\n\t\t\t_indexIndicator.innerHTML = (pswp.getCurrentIndex()+1) + \n\t\t\t\t\t\t\t\t\t\t_options.indexIndicatorSep + \n\t\t\t\t\t\t\t\t\t\t_options.getNumItemsFn();\n\t\t}\n\t};\n\t\n\tui.onGlobalTap = function(e) {\n\t\te = e || window.event;\n\t\tvar target = e.target || e.srcElement;\n\n\t\tif(_blockControlsTap) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.detail && e.detail.pointerType === 'mouse') {\n\n\t\t\t// close gallery if clicked outside of the image\n\t\t\tif(_hasCloseClass(target)) {\n\t\t\t\tpswp.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(framework.hasClass(target, 'pswp__img')) {\n\t\t\t\tif(pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n\t\t\t\t\tif(_options.clickToCloseNonZoomable) {\n\t\t\t\t\t\tpswp.close();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpswp.toggleDesktopZoom(e.detail.releasePoint);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t} else {\n\n\t\t\t// tap anywhere (except buttons) to toggle visibility of controls\n\t\t\tif(_options.tapToToggleControls) {\n\t\t\t\tif(_controlsVisible) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t} else {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// tap to close gallery\n\t\t\tif(_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target)) ) {\n\t\t\t\tpswp.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t}\n\t};\n\tui.onMouseOver = function(e) {\n\t\te = e || window.event;\n\t\tvar target = e.target || e.srcElement;\n\n\t\t// add class when mouse is over an element that should close the gallery\n\t\t_togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n\t};\n\n\tui.hideControls = function() {\n\t\tframework.addClass(_controls,'pswp__ui--hidden');\n\t\t_controlsVisible = false;\n\t};\n\n\tui.showControls = function() {\n\t\t_controlsVisible = true;\n\t\tif(!_overlayUIUpdated) {\n\t\t\tui.update();\n\t\t}\n\t\tframework.removeClass(_controls,'pswp__ui--hidden');\n\t};\n\n\tui.supportsFullscreen = function() {\n\t\tvar d = document;\n\t\treturn !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n\t};\n\n\tui.getFullscreenAPI = function() {\n\t\tvar dE = document.documentElement,\n\t\t\tapi,\n\t\t\ttF = 'fullscreenchange';\n\n\t\tif (dE.requestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'requestFullscreen',\n\t\t\t\texitK: 'exitFullscreen',\n\t\t\t\telementK: 'fullscreenElement',\n\t\t\t\teventK: tF\n\t\t\t};\n\n\t\t} else if(dE.mozRequestFullScreen ) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'mozRequestFullScreen',\n\t\t\t\texitK: 'mozCancelFullScreen',\n\t\t\t\telementK: 'mozFullScreenElement',\n\t\t\t\teventK: 'moz' + tF\n\t\t\t};\n\n\t\t\t\n\n\t\t} else if(dE.webkitRequestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'webkitRequestFullscreen',\n\t\t\t\texitK: 'webkitExitFullscreen',\n\t\t\t\telementK: 'webkitFullscreenElement',\n\t\t\t\teventK: 'webkit' + tF\n\t\t\t};\n\n\t\t} else if(dE.msRequestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'msRequestFullscreen',\n\t\t\t\texitK: 'msExitFullscreen',\n\t\t\t\telementK: 'msFullscreenElement',\n\t\t\t\teventK: 'MSFullscreenChange'\n\t\t\t};\n\t\t}\n\n\t\tif(api) {\n\t\t\tapi.enter = function() { \n\t\t\t\t// disable close-on-scroll in fullscreen\n\t\t\t\t_initalCloseOnScrollValue = _options.closeOnScroll; \n\t\t\t\t_options.closeOnScroll = false; \n\n\t\t\t\tif(this.enterK === 'webkitRequestFullscreen') {\n\t\t\t\t\tpswp.template[this.enterK]( Element.ALLOW_KEYBOARD_INPUT );\n\t\t\t\t} else {\n\t\t\t\t\treturn pswp.template[this.enterK](); \n\t\t\t\t}\n\t\t\t};\n\t\t\tapi.exit = function() { \n\t\t\t\t_options.closeOnScroll = _initalCloseOnScrollValue;\n\n\t\t\t\treturn document[this.exitK](); \n\n\t\t\t};\n\t\t\tapi.isFullscreen = function() { return document[this.elementK]; };\n\t\t}\n\n\t\treturn api;\n\t};\n\n\n\n};\n","/*! PhotoSwipe - v4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\nexport default function(template, UiClass, items, options){\n\n/*>>framework-bridge*/\n/**\n *\n * Set of generic functions used by gallery.\n * \n * You're free to modify anything here as long as functionality is kept.\n * \n */\nvar framework = {\n\tfeatures: null,\n\tbind: function(target, type, listener, unbind) {\n\t\tvar methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n\t\ttype = type.split(' ');\n\t\tfor(var i = 0; i < type.length; i++) {\n\t\t\tif(type[i]) {\n\t\t\t\ttarget[methodName]( type[i], listener, false);\n\t\t\t}\n\t\t}\n\t},\n\tisArray: function(obj) {\n\t\treturn (obj instanceof Array);\n\t},\n\tcreateEl: function(classes, tag) {\n\t\tvar el = document.createElement(tag || 'div');\n\t\tif(classes) {\n\t\t\tel.className = classes;\n\t\t}\n\t\treturn el;\n\t},\n\tgetScrollY: function() {\n\t\tvar yOffset = window.pageYOffset;\n\t\treturn yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n\t},\n\tunbind: function(target, type, listener) {\n\t\tframework.bind(target,type,listener,true);\n\t},\n\tremoveClass: function(el, className) {\n\t\tvar reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n\t\tel.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); \n\t},\n\taddClass: function(el, className) {\n\t\tif( !framework.hasClass(el,className) ) {\n\t\t\tel.className += (el.className ? ' ' : '') + className;\n\t\t}\n\t},\n\thasClass: function(el, className) {\n\t\treturn el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n\t},\n\tgetChildByClass: function(parentEl, childClassName) {\n\t\tvar node = parentEl.firstChild;\n\t\twhile(node) {\n\t\t\tif( framework.hasClass(node, childClassName) ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t},\n\tarraySearch: function(array, value, key) {\n\t\tvar i = array.length;\n\t\twhile(i--) {\n\t\t\tif(array[i][key] === value) {\n\t\t\t\treturn i;\n\t\t\t} \n\t\t}\n\t\treturn -1;\n\t},\n\textend: function(o1, o2, preventOverwrite) {\n\t\tfor (var prop in o2) {\n\t\t\tif (o2.hasOwnProperty(prop)) {\n\t\t\t\tif(preventOverwrite && o1.hasOwnProperty(prop)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\to1[prop] = o2[prop];\n\t\t\t}\n\t\t}\n\t},\n\teasing: {\n\t\tsine: {\n\t\t\tout: function(k) {\n\t\t\t\treturn Math.sin(k * (Math.PI / 2));\n\t\t\t},\n\t\t\tinOut: function(k) {\n\t\t\t\treturn - (Math.cos(Math.PI * k) - 1) / 2;\n\t\t\t}\n\t\t},\n\t\tcubic: {\n\t\t\tout: function(k) {\n\t\t\t\treturn --k * k * k + 1;\n\t\t\t}\n\t\t}\n\t\t/*\n\t\t\telastic: {\n\t\t\t\tout: function ( k ) {\n\n\t\t\t\t\tvar s, a = 0.1, p = 0.4;\n\t\t\t\t\tif ( k === 0 ) return 0;\n\t\t\t\t\tif ( k === 1 ) return 1;\n\t\t\t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\n\t\t\t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n\t\t\t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n\t\t\t\t},\n\t\t\t},\n\t\t\tback: {\n\t\t\t\tout: function ( k ) {\n\t\t\t\t\tvar s = 1.70158;\n\t\t\t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t*/\n\t},\n\n\t/**\n\t * \n\t * @return {object}\n\t * \n\t * {\n\t *  raf : request animation frame function\n\t *  caf : cancel animation frame function\n\t *  transfrom : transform property key (with vendor), or null if not supported\n\t *  oldIE : IE8 or below\n\t * }\n\t * \n\t */\n\tdetectFeatures: function() {\n\t\tif(framework.features) {\n\t\t\treturn framework.features;\n\t\t}\n\t\tvar helperEl = framework.createEl(),\n\t\t\thelperStyle = helperEl.style,\n\t\t\tvendor = '',\n\t\t\tfeatures = {};\n\n\t\t// IE8 and below\n\t\tfeatures.oldIE = document.all && !document.addEventListener;\n\n\t\tfeatures.touch = 'ontouchstart' in window;\n\n\t\tif(window.requestAnimationFrame) {\n\t\t\tfeatures.raf = window.requestAnimationFrame;\n\t\t\tfeatures.caf = window.cancelAnimationFrame;\n\t\t}\n\n\t\tfeatures.pointerEvent = !!(window.PointerEvent) || navigator.msPointerEnabled;\n\n\t\t// fix false-positive detection of old Android in new IE\n\t\t// (IE11 ua string contains \"Android 4.0\")\n\t\t\n\t\tif(!features.pointerEvent) { \n\n\t\t\tvar ua = navigator.userAgent;\n\n\t\t\t// Detect if device is iPhone or iPod and if it's older than iOS 8\n\t\t\t// http://stackoverflow.com/a/14223920\n\t\t\t// \n\t\t\t// This detection is made because of buggy top/bottom toolbars\n\t\t\t// that don't trigger window.resize event.\n\t\t\t// For more info refer to _isFixedPosition variable in core.js\n\n\t\t\tif (/iP(hone|od)/.test(navigator.platform)) {\n\t\t\t\tvar v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\t\t\t\tif(v && v.length > 0) {\n\t\t\t\t\tv = parseInt(v[1], 10);\n\t\t\t\t\tif(v >= 1 && v < 8 ) {\n\t\t\t\t\t\tfeatures.isOldIOSPhone = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Detect old Android (before KitKat)\n\t\t\t// due to bugs related to position:fixed\n\t\t\t// http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\t\t\t\n\t\t\tvar match = ua.match(/Android\\s([0-9\\.]*)/);\n\t\t\tvar androidversion =  match ? match[1] : 0;\n\t\t\tandroidversion = parseFloat(androidversion);\n\t\t\tif(androidversion >= 1 ) {\n\t\t\t\tif(androidversion < 4.4) {\n\t\t\t\t\tfeatures.isOldAndroid = true; // for fixed position bug & performance\n\t\t\t\t}\n\t\t\t\tfeatures.androidVersion = androidversion; // for touchend bug\n\t\t\t}\t\n\t\t\tfeatures.isMobileOpera = /opera mini|opera mobi/i.test(ua);\n\n\t\t\t// p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n\t\t}\n\t\t\n\t\tvar styleChecks = ['transform', 'perspective', 'animationName'],\n\t\t\tvendors = ['', 'webkit','Moz','ms','O'],\n\t\t\tstyleCheckItem,\n\t\t\tstyleName;\n\n\t\tfor(var i = 0; i < 4; i++) {\n\t\t\tvendor = vendors[i];\n\n\t\t\tfor(var a = 0; a < 3; a++) {\n\t\t\t\tstyleCheckItem = styleChecks[a];\n\n\t\t\t\t// uppercase first letter of property name, if vendor is present\n\t\t\t\tstyleName = vendor + (vendor ? \n\t\t\t\t\t\t\t\t\t\tstyleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : \n\t\t\t\t\t\t\t\t\t\tstyleCheckItem);\n\t\t\t\n\t\t\t\tif(!features[styleCheckItem] && styleName in helperStyle ) {\n\t\t\t\t\tfeatures[styleCheckItem] = styleName;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(vendor && !features.raf) {\n\t\t\t\tvendor = vendor.toLowerCase();\n\t\t\t\tfeatures.raf = window[vendor+'RequestAnimationFrame'];\n\t\t\t\tif(features.raf) {\n\t\t\t\t\tfeatures.caf = window[vendor+'CancelAnimationFrame'] || \n\t\t\t\t\t\t\t\t\twindow[vendor+'CancelRequestAnimationFrame'];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\n\t\tif(!features.raf) {\n\t\t\tvar lastTime = 0;\n\t\t\tfeatures.raf = function(fn) {\n\t\t\t\tvar currTime = new Date().getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\t\tvar id = window.setTimeout(function() { fn(currTime + timeToCall); }, timeToCall);\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\t\t\tfeatures.caf = function(id) { clearTimeout(id); };\n\t\t}\n\n\t\t// Detect SVG support\n\t\tfeatures.svg = !!document.createElementNS && \n\t\t\t\t\t\t!!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n\n\t\tframework.features = features;\n\n\t\treturn features;\n\t}\n};\n\nframework.detectFeatures();\n\n// Override addEventListener for old versions of IE\nif(framework.features.oldIE) {\n\n\tframework.bind = function(target, type, listener, unbind) {\n\t\t\n\t\ttype = type.split(' ');\n\n\t\tvar methodName = (unbind ? 'detach' : 'attach') + 'Event',\n\t\t\tevName,\n\t\t\t_handleEv = function() {\n\t\t\t\tlistener.handleEvent.call(listener);\n\t\t\t};\n\n\t\tfor(var i = 0; i < type.length; i++) {\n\t\t\tevName = type[i];\n\t\t\tif(evName) {\n\n\t\t\t\tif(typeof listener === 'object' && listener.handleEvent) {\n\t\t\t\t\tif(!unbind) {\n\t\t\t\t\t\tlistener['oldIE' + evName] = _handleEv;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(!listener['oldIE' + evName]) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener['oldIE' + evName]);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t};\n\t\n}\n\n/*>>framework-bridge*/\n\n/*>>core*/\n//function(template, UiClass, items, options)\n\nvar self = this;\n\n/**\n * Static vars, don't change unless you know what you're doing.\n */\nvar DOUBLE_TAP_RADIUS = 25, \n\tNUM_HOLDERS = 3;\n\n/**\n * Options\n */\nvar _options = {\n\tallowPanToNext:true,\n\tspacing: 0.12,\n\tbgOpacity: 1,\n\tmouseUsed: false,\n\tloop: true,\n\tpinchToClose: true,\n\tcloseOnScroll: true,\n\tcloseOnVerticalDrag: true,\n\tverticalDragRange: 0.75,\n\thideAnimationDuration: 333,\n\tshowAnimationDuration: 333,\n\tshowHideOpacity: false,\n\tfocus: true,\n\tescKey: true,\n\tarrowKeys: true,\n\tmainScrollEndFriction: 0.35,\n\tpanEndFriction: 0.35,\n\tisClickableElement: function(el) {\n        return el.tagName === 'A';\n    },\n    getDoubleTapZoom: function(isMouseClick, item) {\n    \tif(isMouseClick) {\n    \t\treturn 1;\n    \t} else {\n    \t\treturn item.initialZoomLevel < 0.7 ? 1 : 1.33;\n    \t}\n    },\n    maxSpreadZoom: 1.33,\n\tmodal: true,\n\n\t// not fully implemented yet\n\tscaleMode: 'fit' // TODO\n};\nframework.extend(_options, options);\n\n\n/**\n * Private helper variables & functions\n */\n\nvar _getEmptyPoint = function() { \n\t\treturn {x:0,y:0}; \n\t};\n\nvar _isOpen,\n\t_isDestroying,\n\t_closedByScroll,\n\t_currentItemIndex,\n\t_containerStyle,\n\t_containerShiftIndex,\n\t_currPanDist = _getEmptyPoint(),\n\t_startPanOffset = _getEmptyPoint(),\n\t_panOffset = _getEmptyPoint(),\n\t_upMoveEvents, // drag move, drag end & drag cancel events array\n\t_downEvents, // drag start events array\n\t_globalEventHandlers,\n\t_viewportSize = {},\n\t_currZoomLevel,\n\t_startZoomLevel,\n\t_translatePrefix,\n\t_translateSufix,\n\t_updateSizeInterval,\n\t_itemsNeedUpdate,\n\t_currPositionIndex = 0,\n\t_offset = {},\n\t_slideSize = _getEmptyPoint(), // size of slide area, including spacing\n\t_itemHolders,\n\t_prevItemIndex,\n\t_indexDiff = 0, // difference of indexes since last content update\n\t_dragStartEvent,\n\t_dragMoveEvent,\n\t_dragEndEvent,\n\t_dragCancelEvent,\n\t_transformKey,\n\t_pointerEventEnabled,\n\t_isFixedPosition = true,\n\t_likelyTouchDevice,\n\t_modules = [],\n\t_requestAF,\n\t_cancelAF,\n\t_initalClassName,\n\t_initalWindowScrollY,\n\t_oldIE,\n\t_currentWindowScrollY,\n\t_features,\n\t_windowVisibleSize = {},\n\t_renderMaxResolution = false,\n\t_orientationChangeTimeout,\n\n\n\t// Registers PhotoSWipe module (History, Controller ...)\n\t_registerModule = function(name, module) {\n\t\tframework.extend(self, module.publicMethods);\n\t\t_modules.push(name);\n\t},\n\n\t_getLoopedId = function(index) {\n\t\tvar numSlides = _getNumItems();\n\t\tif(index > numSlides - 1) {\n\t\t\treturn index - numSlides;\n\t\t} else  if(index < 0) {\n\t\t\treturn numSlides + index;\n\t\t}\n\t\treturn index;\n\t},\n\t\n\t// Micro bind/trigger\n\t_listeners = {},\n\t_listen = function(name, fn) {\n\t\tif(!_listeners[name]) {\n\t\t\t_listeners[name] = [];\n\t\t}\n\t\treturn _listeners[name].push(fn);\n\t},\n\t_shout = function(name) {\n\t\tvar listeners = _listeners[name];\n\n\t\tif(listeners) {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\targs.shift();\n\n\t\t\tfor(var i = 0; i < listeners.length; i++) {\n\t\t\t\tlisteners[i].apply(self, args);\n\t\t\t}\n\t\t}\n\t},\n\n\t_getCurrentTime = function() {\n\t\treturn new Date().getTime();\n\t},\n\t_applyBgOpacity = function(opacity) {\n\t\t_bgOpacity = opacity;\n\t\tself.bg.style.opacity = opacity * _options.bgOpacity;\n\t},\n\n\t_applyZoomTransform = function(styleObj,x,y,zoom,item) {\n\t\tif(!_renderMaxResolution || (item && item !== self.currItem) ) {\n\t\t\tzoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\t\n\t\t}\n\t\t\t\n\t\tstyleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n\t},\n\t_applyCurrentZoomPan = function( allowRenderResolution ) {\n\t\tif(_currZoomElementStyle) {\n\n\t\t\tif(allowRenderResolution) {\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\n\t\t\t\t\tif(!_renderMaxResolution) {\n\t\t\t\t\t\t_setImageSize(self.currItem, false, true);\n\t\t\t\t\t\t_renderMaxResolution = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(_renderMaxResolution) {\n\t\t\t\t\t\t_setImageSize(self.currItem);\n\t\t\t\t\t\t_renderMaxResolution = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\n\t\t\t_applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n\t\t}\n\t},\n\t_applyZoomPanToItem = function(item) {\n\t\tif(item.container) {\n\n\t\t\t_applyZoomTransform(item.container.style, \n\t\t\t\t\t\t\t\titem.initialPosition.x, \n\t\t\t\t\t\t\t\titem.initialPosition.y, \n\t\t\t\t\t\t\t\titem.initialZoomLevel,\n\t\t\t\t\t\t\t\titem);\n\t\t}\n\t},\n\t_setTranslateX = function(x, elStyle) {\n\t\telStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n\t},\n\t_moveMainScroll = function(x, dragging) {\n\n\t\tif(!_options.loop && dragging) {\n\t\t\tvar newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n\t\t\t\tdelta = Math.round(x - _mainScrollPos.x);\n\n\t\t\tif( (newSlideIndexOffset < 0 && delta > 0) || \n\t\t\t\t(newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) ) {\n\t\t\t\tx = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n\t\t\t} \n\t\t}\n\t\t\n\t\t_mainScrollPos.x = x;\n\t\t_setTranslateX(x, _containerStyle);\n\t},\n\t_calculatePanOffset = function(axis, zoomLevel) {\n\t\tvar m = _midZoomPoint[axis] - _offset[axis];\n\t\treturn _startPanOffset[axis] + _currPanDist[axis] + m - m * ( zoomLevel / _startZoomLevel );\n\t},\n\t\n\t_equalizePoints = function(p1, p2) {\n\t\tp1.x = p2.x;\n\t\tp1.y = p2.y;\n\t\tif(p2.id) {\n\t\t\tp1.id = p2.id;\n\t\t}\n\t},\n\t_roundPoint = function(p) {\n\t\tp.x = Math.round(p.x);\n\t\tp.y = Math.round(p.y);\n\t},\n\n\t_mouseMoveTimeout = null,\n\t_onFirstMouseMove = function() {\n\t\t// Wait until mouse move event is fired at least twice during 100ms\n\t\t// We do this, because some mobile browsers trigger it on touchstart\n\t\tif(_mouseMoveTimeout ) { \n\t\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\n\t\t\tframework.addClass(template, 'pswp--has_mouse');\n\t\t\t_options.mouseUsed = true;\n\t\t\t_shout('mouseUsed');\n\t\t}\n\t\t_mouseMoveTimeout = setTimeout(function() {\n\t\t\t_mouseMoveTimeout = null;\n\t\t}, 100);\n\t},\n\n\t_bindEvents = function() {\n\t\tframework.bind(document, 'keydown', self);\n\n\t\tif(_features.transform) {\n\t\t\t// don't bind click event in browsers that don't support transform (mostly IE8)\n\t\t\tframework.bind(self.scrollWrap, 'click', self);\n\t\t}\n\t\t\n\n\t\tif(!_options.mouseUsed) {\n\t\t\tframework.bind(document, 'mousemove', _onFirstMouseMove);\n\t\t}\n\n\t\tframework.bind(window, 'resize scroll orientationchange', self);\n\n\t\t_shout('bindEvents');\n\t},\n\n\t_unbindEvents = function() {\n\t\tframework.unbind(window, 'resize scroll orientationchange', self);\n\t\tframework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n\t\tframework.unbind(document, 'keydown', self);\n\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n\t\tif(_features.transform) {\n\t\t\tframework.unbind(self.scrollWrap, 'click', self);\n\t\t}\n\n\t\tif(_isDragging) {\n\t\t\tframework.unbind(window, _upMoveEvents, self);\n\t\t}\n\n\t\tclearTimeout(_orientationChangeTimeout);\n\n\t\t_shout('unbindEvents');\n\t},\n\t\n\t_calculatePanBounds = function(zoomLevel, update) {\n\t\tvar bounds = _calculateItemSize( self.currItem, _viewportSize, zoomLevel );\n\t\tif(update) {\n\t\t\t_currPanBounds = bounds;\n\t\t}\n\t\treturn bounds;\n\t},\n\t\n\t_getMinZoomLevel = function(item) {\n\t\tif(!item) {\n\t\t\titem = self.currItem;\n\t\t}\n\t\treturn item.initialZoomLevel;\n\t},\n\t_getMaxZoomLevel = function(item) {\n\t\tif(!item) {\n\t\t\titem = self.currItem;\n\t\t}\n\t\treturn item.w > 0 ? _options.maxSpreadZoom : 1;\n\t},\n\n\t// Return true if offset is out of the bounds\n\t_modifyDestPanOffset = function(axis, destPanBounds, destPanOffset, destZoomLevel) {\n\t\tif(destZoomLevel === self.currItem.initialZoomLevel) {\n\t\t\tdestPanOffset[axis] = self.currItem.initialPosition[axis];\n\t\t\treturn true;\n\t\t} else {\n\t\t\tdestPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel); \n\n\t\t\tif(destPanOffset[axis] > destPanBounds.min[axis]) {\n\t\t\t\tdestPanOffset[axis] = destPanBounds.min[axis];\n\t\t\t\treturn true;\n\t\t\t} else if(destPanOffset[axis] < destPanBounds.max[axis] ) {\n\t\t\t\tdestPanOffset[axis] = destPanBounds.max[axis];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t_setupTransforms = function() {\n\n\t\tif(_transformKey) {\n\t\t\t// setup 3d transforms\n\t\t\tvar allow3dTransform = _features.perspective && !_likelyTouchDevice;\n\t\t\t_translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n\t\t\t_translateSufix = _features.perspective ? ', 0px)' : ')';\t\n\t\t\treturn;\n\t\t}\n\n\t\t// Override zoom/pan/move functions in case old browser is used (most likely IE)\n\t\t// (so they use left/top/width/height, instead of CSS transform)\n\t\n\t\t_transformKey = 'left';\n\t\tframework.addClass(template, 'pswp--ie');\n\n\t\t_setTranslateX = function(x, elStyle) {\n\t\t\telStyle.left = x + 'px';\n\t\t};\n\t\t_applyZoomPanToItem = function(item) {\n\n\t\t\tvar zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n\t\t\t\ts = item.container.style,\n\t\t\t\tw = zoomRatio * item.w,\n\t\t\t\th = zoomRatio * item.h;\n\n\t\t\ts.width = w + 'px';\n\t\t\ts.height = h + 'px';\n\t\t\ts.left = item.initialPosition.x + 'px';\n\t\t\ts.top = item.initialPosition.y + 'px';\n\n\t\t};\n\t\t_applyCurrentZoomPan = function() {\n\t\t\tif(_currZoomElementStyle) {\n\n\t\t\t\tvar s = _currZoomElementStyle,\n\t\t\t\t\titem = self.currItem,\n\t\t\t\t\tzoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n\t\t\t\t\tw = zoomRatio * item.w,\n\t\t\t\t\th = zoomRatio * item.h;\n\n\t\t\t\ts.width = w + 'px';\n\t\t\t\ts.height = h + 'px';\n\n\n\t\t\t\ts.left = _panOffset.x + 'px';\n\t\t\t\ts.top = _panOffset.y + 'px';\n\t\t\t}\n\t\t\t\n\t\t};\n\t},\n\n\t_onKeyDown = function(e) {\n\t\tvar keydownAction = '';\n\t\tif(_options.escKey && e.keyCode === 27) { \n\t\t\tkeydownAction = 'close';\n\t\t} else if(_options.arrowKeys) {\n\t\t\tif(e.keyCode === 37) {\n\t\t\t\tkeydownAction = 'prev';\n\t\t\t} else if(e.keyCode === 39) { \n\t\t\t\tkeydownAction = 'next';\n\t\t\t}\n\t\t}\n\n\t\tif(keydownAction) {\n\t\t\t// don't do anything if special key pressed to prevent from overriding default browser actions\n\t\t\t// e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n\t\t\tif( !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey ) {\n\t\t\t\tif(e.preventDefault) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t} \n\t\t\t\tself[keydownAction]();\n\t\t\t}\n\t\t}\n\t},\n\n\t_onGlobalClick = function(e) {\n\t\tif(!e) {\n\t\t\treturn;\n\t\t}\n\n\t\t// don't allow click event to pass through when triggering after drag or some other gesture\n\t\tif(_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\n\t_updatePageScrollOffset = function() {\n\t\tself.setScrollOffset(0, framework.getScrollY());\t\t\n\t};\n\t\n\n\n\t\n\n\n\n// Micro animation engine\nvar _animations = {},\n\t_numAnimations = 0,\n\t_stopAnimation = function(name) {\n\t\tif(_animations[name]) {\n\t\t\tif(_animations[name].raf) {\n\t\t\t\t_cancelAF( _animations[name].raf );\n\t\t\t}\n\t\t\t_numAnimations--;\n\t\t\tdelete _animations[name];\n\t\t}\n\t},\n\t_registerStartAnimation = function(name) {\n\t\tif(_animations[name]) {\n\t\t\t_stopAnimation(name);\n\t\t}\n\t\tif(!_animations[name]) {\n\t\t\t_numAnimations++;\n\t\t\t_animations[name] = {};\n\t\t}\n\t},\n\t_stopAllAnimations = function() {\n\t\tfor (var prop in _animations) {\n\n\t\t\tif( _animations.hasOwnProperty( prop ) ) {\n\t\t\t\t_stopAnimation(prop);\n\t\t\t} \n\t\t\t\n\t\t}\n\t},\n\t_animateProp = function(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n\t\tvar startAnimTime = _getCurrentTime(), t;\n\t\t_registerStartAnimation(name);\n\n\t\tvar animloop = function(){\n\t\t\tif ( _animations[name] ) {\n\t\t\t\t\n\t\t\t\tt = _getCurrentTime() - startAnimTime; // time diff\n\t\t\t\t//b - beginning (start prop)\n\t\t\t\t//d - anim duration\n\n\t\t\t\tif ( t >= d ) {\n\t\t\t\t\t_stopAnimation(name);\n\t\t\t\t\tonUpdate(endProp);\n\t\t\t\t\tif(onComplete) {\n\t\t\t\t\t\tonComplete();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tonUpdate( (endProp - b) * easingFn(t/d) + b );\n\n\t\t\t\t_animations[name].raf = _requestAF(animloop);\n\t\t\t}\n\t\t};\n\t\tanimloop();\n\t};\n\t\n\n\nvar publicMethods = {\n\n\t// make a few local variables and functions public\n\tshout: _shout,\n\tlisten: _listen,\n\tviewportSize: _viewportSize,\n\toptions: _options,\n\n\tisMainScrollAnimating: function() {\n\t\treturn _mainScrollAnimating;\n\t},\n\tgetZoomLevel: function() {\n\t\treturn _currZoomLevel;\n\t},\n\tgetCurrentIndex: function() {\n\t\treturn _currentItemIndex;\n\t},\n\tisDragging: function() {\n\t\treturn _isDragging;\n\t},\t\n\tisZooming: function() {\n\t\treturn _isZooming;\n\t},\n\tsetScrollOffset: function(x,y) {\n\t\t_offset.x = x;\n\t\t_currentWindowScrollY = _offset.y = y;\n\t\t_shout('updateScrollOffset', _offset);\n\t},\n\tapplyZoomPan: function(zoomLevel,panX,panY,allowRenderResolution) {\n\t\t_panOffset.x = panX;\n\t\t_panOffset.y = panY;\n\t\t_currZoomLevel = zoomLevel;\n\t\t_applyCurrentZoomPan( allowRenderResolution );\n\t},\n\n\tinit: function() {\n\n\t\tif(_isOpen || _isDestroying) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar i;\n\n\t\tself.framework = framework; // basic functionality\n\t\tself.template = template; // root DOM element of PhotoSwipe\n\t\tself.bg = framework.getChildByClass(template, 'pswp__bg');\n\n\t\t_initalClassName = template.className;\n\t\t_isOpen = true;\n\t\t\t\t\n\t\t_features = framework.detectFeatures();\n\t\t_requestAF = _features.raf;\n\t\t_cancelAF = _features.caf;\n\t\t_transformKey = _features.transform;\n\t\t_oldIE = _features.oldIE;\n\t\t\n\t\tself.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n\t\tself.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n\n\t\t_containerStyle = self.container.style; // for fast access\n\n\t\t// Objects that hold slides (there are only 3 in DOM)\n\t\tself.itemHolders = _itemHolders = [\n\t\t\t{el:self.container.children[0] , wrap:0, index: -1},\n\t\t\t{el:self.container.children[1] , wrap:0, index: -1},\n\t\t\t{el:self.container.children[2] , wrap:0, index: -1}\n\t\t];\n\n\t\t// hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n\t\t_setupTransforms();\n\n\t\t// Setup global events\n\t\t_globalEventHandlers = {\n\t\t\tresize: self.updateSize,\n\n\t\t\t// Fixes: iOS 10.3 resize event\n\t\t\t// does not update scrollWrap.clientWidth instantly after resize\n\t\t\t// https://github.com/dimsemenov/PhotoSwipe/issues/1315\n\t\t\torientationchange: function() {\n\t\t\t\tclearTimeout(_orientationChangeTimeout);\n\t\t\t\t_orientationChangeTimeout = setTimeout(function() {\n\t\t\t\t\tif(_viewportSize.x !== self.scrollWrap.clientWidth) {\n\t\t\t\t\t\tself.updateSize();\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\tscroll: _updatePageScrollOffset,\n\t\t\tkeydown: _onKeyDown,\n\t\t\tclick: _onGlobalClick\n\t\t};\n\n\t\t// disable show/hide effects on old browsers that don't support CSS animations or transforms, \n\t\t// old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n\t\tvar oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n\t\tif(!_features.animationName || !_features.transform || oldPhone) {\n\t\t\t_options.showAnimationDuration = _options.hideAnimationDuration = 0;\n\t\t}\n\n\t\t// init modules\n\t\tfor(i = 0; i < _modules.length; i++) {\n\t\t\tself['init' + _modules[i]]();\n\t\t}\n\t\t\n\t\t// init\n\t\tif(UiClass) {\n\t\t\tvar ui = self.ui = new UiClass(self, framework);\n\t\t\tui.init();\n\t\t}\n\n\t\t_shout('firstUpdate');\n\t\t_currentItemIndex = _currentItemIndex || _options.index || 0;\n\t\t// validate index\n\t\tif( isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems() ) {\n\t\t\t_currentItemIndex = 0;\n\t\t}\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\n\t\t\n\t\tif(_features.isOldIOSPhone || _features.isOldAndroid) {\n\t\t\t_isFixedPosition = false;\n\t\t}\n\t\t\n\t\ttemplate.setAttribute('aria-hidden', 'false');\n\t\tif(_options.modal) {\n\t\t\tif(!_isFixedPosition) {\n\t\t\t\ttemplate.style.position = 'absolute';\n\t\t\t\ttemplate.style.top = framework.getScrollY() + 'px';\n\t\t\t} else {\n\t\t\t\ttemplate.style.position = 'fixed';\n\t\t\t}\n\t\t}\n\n\t\tif(_currentWindowScrollY === undefined) {\n\t\t\t_shout('initialLayout');\n\t\t\t_currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n\t\t}\n\t\t\n\t\t// add classes to root element of PhotoSwipe\n\t\tvar rootClasses = 'pswp--open ';\n\t\tif(_options.mainClass) {\n\t\t\trootClasses += _options.mainClass + ' ';\n\t\t}\n\t\tif(_options.showHideOpacity) {\n\t\t\trootClasses += 'pswp--animate_opacity ';\n\t\t}\n\t\trootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n\t\trootClasses += _features.animationName ? ' pswp--css_animation' : '';\n\t\trootClasses += _features.svg ? ' pswp--svg' : '';\n\t\tframework.addClass(template, rootClasses);\n\n\t\tself.updateSize();\n\n\t\t// initial update\n\t\t_containerShiftIndex = -1;\n\t\t_indexDiff = null;\n\t\tfor(i = 0; i < NUM_HOLDERS; i++) {\n\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n\t\t}\n\n\t\tif(!_oldIE) {\n\t\t\tframework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n\t\t}\t\n\n\t\t_listen('initialZoomInEnd', function() {\n\t\t\tself.setContent(_itemHolders[0], _currentItemIndex-1);\n\t\t\tself.setContent(_itemHolders[2], _currentItemIndex+1);\n\n\t\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n\t\t\tif(_options.focus) {\n\t\t\t\t// focus causes layout, \n\t\t\t\t// which causes lag during the animation, \n\t\t\t\t// that's why we delay it untill the initial zoom transition ends\n\t\t\t\ttemplate.focus();\n\t\t\t}\n\t\t\t \n\n\t\t\t_bindEvents();\n\t\t});\n\n\t\t// set content for center slide (first time)\n\t\tself.setContent(_itemHolders[1], _currentItemIndex);\n\t\t\n\t\tself.updateCurrItem();\n\n\t\t_shout('afterInit');\n\n\t\tif(!_isFixedPosition) {\n\n\t\t\t// On all versions of iOS lower than 8.0, we check size of viewport every second.\n\t\t\t// \n\t\t\t// This is done to detect when Safari top & bottom bars appear, \n\t\t\t// as this action doesn't trigger any events (like resize). \n\t\t\t// \n\t\t\t// On iOS8 they fixed this.\n\t\t\t// \n\t\t\t// 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n\t\t\t\n\t\t\t_updateSizeInterval = setInterval(function() {\n\t\t\t\tif(!_numAnimations && !_isDragging && !_isZooming && (_currZoomLevel === self.currItem.initialZoomLevel)  ) {\n\t\t\t\t\tself.updateSize();\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\n\t\tframework.addClass(template, 'pswp--visible');\n\t},\n\n\t// Close the gallery, then destroy it\n\tclose: function() {\n\t\tif(!_isOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\t_isOpen = false;\n\t\t_isDestroying = true;\n\t\t_shout('close');\n\t\t_unbindEvents();\n\n\t\t_showOrHide(self.currItem, null, true, self.destroy);\n\t},\n\n\t// destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n\tdestroy: function() {\n\t\t_shout('destroy');\n\n\t\tif(_showOrHideTimeout) {\n\t\t\tclearTimeout(_showOrHideTimeout);\n\t\t}\n\t\t\n\t\ttemplate.setAttribute('aria-hidden', 'true');\n\t\ttemplate.className = _initalClassName;\n\n\t\tif(_updateSizeInterval) {\n\t\t\tclearInterval(_updateSizeInterval);\n\t\t}\n\n\t\tframework.unbind(self.scrollWrap, _downEvents, self);\n\n\t\t// we unbind scroll event at the end, as closing animation may depend on it\n\t\tframework.unbind(window, 'scroll', self);\n\n\t\t_stopDragUpdateLoop();\n\n\t\t_stopAllAnimations();\n\n\t\t_listeners = null;\n\t},\n\n\t/**\n\t * Pan image to position\n\t * @param {Number} x     \n\t * @param {Number} y     \n\t * @param {Boolean} force Will ignore bounds if set to true.\n\t */\n\tpanTo: function(x,y,force) {\n\t\tif(!force) {\n\t\t\tif(x > _currPanBounds.min.x) {\n\t\t\t\tx = _currPanBounds.min.x;\n\t\t\t} else if(x < _currPanBounds.max.x) {\n\t\t\t\tx = _currPanBounds.max.x;\n\t\t\t}\n\n\t\t\tif(y > _currPanBounds.min.y) {\n\t\t\t\ty = _currPanBounds.min.y;\n\t\t\t} else if(y < _currPanBounds.max.y) {\n\t\t\t\ty = _currPanBounds.max.y;\n\t\t\t}\n\t\t}\n\t\t\n\t\t_panOffset.x = x;\n\t\t_panOffset.y = y;\n\t\t_applyCurrentZoomPan();\n\t},\n\t\n\thandleEvent: function (e) {\n\t\te = e || window.event;\n\t\tif(_globalEventHandlers[e.type]) {\n\t\t\t_globalEventHandlers[e.type](e);\n\t\t}\n\t},\n\n\n\tgoTo: function(index) {\n\n\t\tindex = _getLoopedId(index);\n\n\t\tvar diff = index - _currentItemIndex;\n\t\t_indexDiff = diff;\n\n\t\t_currentItemIndex = index;\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\t\t_currPositionIndex -= diff;\n\t\t\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\n\t\t\n\n\t\t_stopAllAnimations();\n\t\t_mainScrollAnimating = false;\n\n\t\tself.updateCurrItem();\n\t},\n\tnext: function() {\n\t\tself.goTo( _currentItemIndex + 1);\n\t},\n\tprev: function() {\n\t\tself.goTo( _currentItemIndex - 1);\n\t},\n\n\t// update current zoom/pan objects\n\tupdateCurrZoomItem: function(emulateSetContent) {\n\t\tif(emulateSetContent) {\n\t\t\t_shout('beforeChange', 0);\n\t\t}\n\n\t\t// itemHolder[1] is middle (current) item\n\t\tif(_itemHolders[1].el.children.length) {\n\t\t\tvar zoomElement = _itemHolders[1].el.children[0];\n\t\t\tif( framework.hasClass(zoomElement, 'pswp__zoom-wrap') ) {\n\t\t\t\t_currZoomElementStyle = zoomElement.style;\n\t\t\t} else {\n\t\t\t\t_currZoomElementStyle = null;\n\t\t\t}\n\t\t} else {\n\t\t\t_currZoomElementStyle = null;\n\t\t}\n\t\t\n\t\t_currPanBounds = self.currItem.bounds;\t\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\n\t\t_panOffset.x = _currPanBounds.center.x;\n\t\t_panOffset.y = _currPanBounds.center.y;\n\n\t\tif(emulateSetContent) {\n\t\t\t_shout('afterChange');\n\t\t}\n\t},\n\n\n\tinvalidateCurrItems: function() {\n\t\t_itemsNeedUpdate = true;\n\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\n\t\t\tif( _itemHolders[i].item ) {\n\t\t\t\t_itemHolders[i].item.needsUpdate = true;\n\t\t\t}\n\t\t}\n\t},\n\n\tupdateCurrItem: function(beforeAnimation) {\n\n\t\tif(_indexDiff === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar diffAbs = Math.abs(_indexDiff),\n\t\t\ttempHolder;\n\n\t\tif(beforeAnimation && diffAbs < 2) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\t\t_renderMaxResolution = false;\n\t\t\n\t\t_shout('beforeChange', _indexDiff);\n\n\t\tif(diffAbs >= NUM_HOLDERS) {\n\t\t\t_containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n\t\t\tdiffAbs = NUM_HOLDERS;\n\t\t}\n\t\tfor(var i = 0; i < diffAbs; i++) {\n\t\t\tif(_indexDiff > 0) {\n\t\t\t\ttempHolder = _itemHolders.shift();\n\t\t\t\t_itemHolders[NUM_HOLDERS-1] = tempHolder; // move first to last\n\n\t\t\t\t_containerShiftIndex++;\n\t\t\t\t_setTranslateX( (_containerShiftIndex+2) * _slideSize.x, tempHolder.el.style);\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n\t\t\t} else {\n\t\t\t\ttempHolder = _itemHolders.pop();\n\t\t\t\t_itemHolders.unshift( tempHolder ); // move last to first\n\n\t\t\t\t_containerShiftIndex--;\n\t\t\t\t_setTranslateX( _containerShiftIndex * _slideSize.x, tempHolder.el.style);\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// reset zoom/pan on previous item\n\t\tif(_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n\n\t\t\tvar prevItem = _getItemAt(_prevItemIndex);\n\t\t\tif(prevItem.initialZoomLevel !== _currZoomLevel) {\n\t\t\t\t_calculateItemSize(prevItem , _viewportSize );\n\t\t\t\t_setImageSize(prevItem);\n\t\t\t\t_applyZoomPanToItem( prevItem ); \t\t\t\t\n\t\t\t}\n\n\t\t}\n\n\t\t// reset diff after update\n\t\t_indexDiff = 0;\n\n\t\tself.updateCurrZoomItem();\n\n\t\t_prevItemIndex = _currentItemIndex;\n\n\t\t_shout('afterChange');\n\t\t\n\t},\n\n\n\n\tupdateSize: function(force) {\n\t\t\n\t\tif(!_isFixedPosition && _options.modal) {\n\t\t\tvar windowScrollY = framework.getScrollY();\n\t\t\tif(_currentWindowScrollY !== windowScrollY) {\n\t\t\t\ttemplate.style.top = windowScrollY + 'px';\n\t\t\t\t_currentWindowScrollY = windowScrollY;\n\t\t\t}\n\t\t\tif(!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_windowVisibleSize.x = window.innerWidth;\n\t\t\t_windowVisibleSize.y = window.innerHeight;\n\n\t\t\t//template.style.width = _windowVisibleSize.x + 'px';\n\t\t\ttemplate.style.height = _windowVisibleSize.y + 'px';\n\t\t}\n\n\n\n\t\t_viewportSize.x = self.scrollWrap.clientWidth;\n\t\t_viewportSize.y = self.scrollWrap.clientHeight;\n\n\t\t_updatePageScrollOffset();\n\n\t\t_slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n\t\t_slideSize.y = _viewportSize.y;\n\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\n\n\t\t_shout('beforeResize'); // even may be used for example to switch image sources\n\n\n\t\t// don't re-calculate size on inital size update\n\t\tif(_containerShiftIndex !== undefined) {\n\n\t\t\tvar holder,\n\t\t\t\titem,\n\t\t\t\thIndex;\n\n\t\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\n\t\t\t\tholder = _itemHolders[i];\n\t\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, holder.el.style);\n\n\t\t\t\thIndex = _currentItemIndex+i-1;\n\n\t\t\t\tif(_options.loop && _getNumItems() > 2) {\n\t\t\t\t\thIndex = _getLoopedId(hIndex);\n\t\t\t\t}\n\n\t\t\t\t// update zoom level on items and refresh source (if needsUpdate)\n\t\t\t\titem = _getItemAt( hIndex );\n\n\t\t\t\t// re-render gallery item if `needsUpdate`,\n\t\t\t\t// or doesn't have `bounds` (entirely new slide object)\n\t\t\t\tif( item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds) ) {\n\n\t\t\t\t\tself.cleanSlide( item );\n\t\t\t\t\t\n\t\t\t\t\tself.setContent( holder, hIndex );\n\n\t\t\t\t\t// if \"center\" slide\n\t\t\t\t\tif(i === 1) {\n\t\t\t\t\t\tself.currItem = item;\n\t\t\t\t\t\tself.updateCurrZoomItem(true);\n\t\t\t\t\t}\n\n\t\t\t\t\titem.needsUpdate = false;\n\n\t\t\t\t} else if(holder.index === -1 && hIndex >= 0) {\n\t\t\t\t\t// add content first time\n\t\t\t\t\tself.setContent( holder, hIndex );\n\t\t\t\t}\n\t\t\t\tif(item && item.container) {\n\t\t\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\t\t_setImageSize(item);\n\t\t\t\t\t_applyZoomPanToItem( item );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t_itemsNeedUpdate = false;\n\t\t}\t\n\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\t\t_currPanBounds = self.currItem.bounds;\n\n\t\tif(_currPanBounds) {\n\t\t\t_panOffset.x = _currPanBounds.center.x;\n\t\t\t_panOffset.y = _currPanBounds.center.y;\n\t\t\t_applyCurrentZoomPan( true );\n\t\t}\n\t\t\n\t\t_shout('resize');\n\t},\n\t\n\t// Zoom current item to\n\tzoomTo: function(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n\t\t/*\n\t\t\tif(destZoomLevel === 'fit') {\n\t\t\t\tdestZoomLevel = self.currItem.fitRatio;\n\t\t\t} else if(destZoomLevel === 'fill') {\n\t\t\t\tdestZoomLevel = self.currItem.fillRatio;\n\t\t\t}\n\t\t*/\n\n\t\tif(centerPoint) {\n\t\t\t_startZoomLevel = _currZoomLevel;\n\t\t\t_midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x ;\n\t\t\t_midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y ;\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\t\t}\n\n\t\tvar destPanBounds = _calculatePanBounds(destZoomLevel, false),\n\t\t\tdestPanOffset = {};\n\n\t\t_modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n\t\t_modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n\t\tvar initialZoomLevel = _currZoomLevel;\n\t\tvar initialPanOffset = {\n\t\t\tx: _panOffset.x,\n\t\t\ty: _panOffset.y\n\t\t};\n\n\t\t_roundPoint(destPanOffset);\n\n\t\tvar onUpdate = function(now) {\n\t\t\tif(now === 1) {\n\t\t\t\t_currZoomLevel = destZoomLevel;\n\t\t\t\t_panOffset.x = destPanOffset.x;\n\t\t\t\t_panOffset.y = destPanOffset.y;\n\t\t\t} else {\n\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n\t\t\t\t_panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n\t\t\t\t_panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n\t\t\t}\n\n\t\t\tif(updateFn) {\n\t\t\t\tupdateFn(now);\n\t\t\t}\n\n\t\t\t_applyCurrentZoomPan( now === 1 );\n\t\t};\n\n\t\tif(speed) {\n\t\t\t_animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n\t\t} else {\n\t\t\tonUpdate(1);\n\t\t}\n\t}\n\n\n};\n\n\n/*>>core*/\n\n/*>>gestures*/\n/**\n * Mouse/touch/pointer event handlers.\n * \n * separated from @core.js for readability\n */\n\nvar MIN_SWIPE_DISTANCE = 30,\n\tDIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\nvar _gestureStartTime,\n\t_gestureCheckSpeedTime,\n\n\t// pool of objects that are used during dragging of zooming\n\tp = {}, // first point\n\tp2 = {}, // second point (for zoom gesture)\n\tdelta = {},\n\t_currPoint = {},\n\t_startPoint = {},\n\t_currPointers = [],\n\t_startMainScrollPos = {},\n\t_releaseAnimData,\n\t_posPoints = [], // array of points during dragging, used to determine type of gesture\n\t_tempPoint = {},\n\n\t_isZoomingIn,\n\t_verticalDragInitiated,\n\t_oldAndroidTouchEndTimeout,\n\t_currZoomedItemIndex = 0,\n\t_centerPoint = _getEmptyPoint(),\n\t_lastReleaseTime = 0,\n\t_isDragging, // at least one pointer is down\n\t_isMultitouch, // at least two _pointers are down\n\t_zoomStarted, // zoom level changed during zoom gesture\n\t_moved,\n\t_dragAnimFrame,\n\t_mainScrollShifted,\n\t_currentPoints, // array of current touch points\n\t_isZooming,\n\t_currPointsDistance,\n\t_startPointsDistance,\n\t_currPanBounds,\n\t_mainScrollPos = _getEmptyPoint(),\n\t_currZoomElementStyle,\n\t_mainScrollAnimating, // true, if animation after swipe gesture is running\n\t_midZoomPoint = _getEmptyPoint(),\n\t_currCenterPoint = _getEmptyPoint(),\n\t_direction,\n\t_isFirstMove,\n\t_opacityChanged,\n\t_bgOpacity,\n\t_wasOverInitialZoom,\n\n\t_isEqualPoints = function(p1, p2) {\n\t\treturn p1.x === p2.x && p1.y === p2.y;\n\t},\n\t_isNearbyPoints = function(touch0, touch1) {\n\t\treturn Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n\t},\n\t_calculatePointsDistance = function(p1, p2) {\n\t\t_tempPoint.x = Math.abs( p1.x - p2.x );\n\t\t_tempPoint.y = Math.abs( p1.y - p2.y );\n\t\treturn Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n\t},\n\t_stopDragUpdateLoop = function() {\n\t\tif(_dragAnimFrame) {\n\t\t\t_cancelAF(_dragAnimFrame);\n\t\t\t_dragAnimFrame = null;\n\t\t}\n\t},\n\t_dragUpdateLoop = function() {\n\t\tif(_isDragging) {\n\t\t\t_dragAnimFrame = _requestAF(_dragUpdateLoop);\n\t\t\t_renderMovement();\n\t\t}\n\t},\n\t_canPan = function() {\n\t\treturn !(_options.scaleMode === 'fit' && _currZoomLevel ===  self.currItem.initialZoomLevel);\n\t},\n\t\n\t// find the closest parent DOM element\n\t_closestElement = function(el, fn) {\n\t  \tif(!el || el === document) {\n\t  \t\treturn false;\n\t  \t}\n\n\t  \t// don't search elements above pswp__scroll-wrap\n\t  \tif(el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1 ) {\n\t  \t\treturn false;\n\t  \t}\n\n\t  \tif( fn(el) ) {\n\t  \t\treturn el;\n\t  \t}\n\n\t  \treturn _closestElement(el.parentNode, fn);\n\t},\n\n\t_preventObj = {},\n\t_preventDefaultEventBehaviour = function(e, isDown) {\n\t    _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n\t\t_shout('preventDragEvent', e, isDown, _preventObj);\n\t\treturn _preventObj.prevent;\n\n\t},\n\t_convertTouchToPoint = function(touch, p) {\n\t\tp.x = touch.pageX;\n\t\tp.y = touch.pageY;\n\t\tp.id = touch.identifier;\n\t\treturn p;\n\t},\n\t_findCenterOfPoints = function(p1, p2, pCenter) {\n\t\tpCenter.x = (p1.x + p2.x) * 0.5;\n\t\tpCenter.y = (p1.y + p2.y) * 0.5;\n\t},\n\t_pushPosPoint = function(time, x, y) {\n\t\tif(time - _gestureCheckSpeedTime > 50) {\n\t\t\tvar o = _posPoints.length > 2 ? _posPoints.shift() : {};\n\t\t\to.x = x;\n\t\t\to.y = y; \n\t\t\t_posPoints.push(o);\n\t\t\t_gestureCheckSpeedTime = time;\n\t\t}\n\t},\n\n\t_calculateVerticalDragOpacityRatio = function() {\n\t\tvar yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n\t\treturn 1 -  Math.abs( yOffset / (_viewportSize.y / 2)  );\n\t},\n\n\t\n\t// points pool, reused during touch events\n\t_ePoint1 = {},\n\t_ePoint2 = {},\n\t_tempPointsArr = [],\n\t_tempCounter,\n\t_getTouchPoints = function(e) {\n\t\t// clean up previous points, without recreating array\n\t\twhile(_tempPointsArr.length > 0) {\n\t\t\t_tempPointsArr.pop();\n\t\t}\n\n\t\tif(!_pointerEventEnabled) {\n\t\t\tif(e.type.indexOf('touch') > -1) {\n\n\t\t\t\tif(e.touches && e.touches.length > 0) {\n\t\t\t\t\t_tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n\t\t\t\t\tif(e.touches.length > 1) {\n\t\t\t\t\t\t_tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t_ePoint1.x = e.pageX;\n\t\t\t\t_ePoint1.y = e.pageY;\n\t\t\t\t_ePoint1.id = '';\n\t\t\t\t_tempPointsArr[0] = _ePoint1;//_ePoint1;\n\t\t\t}\n\t\t} else {\n\t\t\t_tempCounter = 0;\n\t\t\t// we can use forEach, as pointer events are supported only in modern browsers\n\t\t\t_currPointers.forEach(function(p) {\n\t\t\t\tif(_tempCounter === 0) {\n\t\t\t\t\t_tempPointsArr[0] = p;\n\t\t\t\t} else if(_tempCounter === 1) {\n\t\t\t\t\t_tempPointsArr[1] = p;\n\t\t\t\t}\n\t\t\t\t_tempCounter++;\n\n\t\t\t});\n\t\t}\n\t\treturn _tempPointsArr;\n\t},\n\n\t_panOrMoveMainScroll = function(axis, delta) {\n\n\t\tvar panFriction,\n\t\t\toverDiff = 0,\n\t\t\tnewOffset = _panOffset[axis] + delta[axis],\n\t\t\tstartOverDiff,\n\t\t\tdir = delta[axis] > 0,\n\t\t\tnewMainScrollPosition = _mainScrollPos.x + delta.x,\n\t\t\tmainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n\t\t\tnewPanPos,\n\t\t\tnewMainScrollPos;\n\n\t\t// calculate fdistance over the bounds and friction\n\t\tif(newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n\t\t\tpanFriction = _options.panEndFriction;\n\t\t\t// Linear increasing of friction, so at 1/4 of viewport it's at max value. \n\t\t\t// Looks not as nice as was expected. Left for history.\n\t\t\t// panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n\t\t} else {\n\t\t\tpanFriction = 1;\n\t\t}\n\t\t\n\t\tnewOffset = _panOffset[axis] + delta[axis] * panFriction;\n\n\t\t// move main scroll or start panning\n\t\tif(_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n\n\n\t\t\tif(!_currZoomElementStyle) {\n\t\t\t\t\n\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\n\t\t\t} else if(_direction === 'h' && axis === 'x' && !_zoomStarted ) {\n\t\t\t\t\n\t\t\t\tif(dir) {\n\t\t\t\t\tif(newOffset > _currPanBounds.min[axis]) {\n\t\t\t\t\t\tpanFriction = _options.panEndFriction;\n\t\t\t\t\t\toverDiff = _currPanBounds.min[axis] - newOffset;\n\t\t\t\t\t\tstartOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// drag right\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1 ) {\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\t\t\t\t\t\tif(mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\t\t\tnewPanPos = newOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif(newOffset < _currPanBounds.max[axis] ) {\n\t\t\t\t\t\tpanFriction =_options.panEndFriction;\n\t\t\t\t\t\toverDiff = newOffset - _currPanBounds.max[axis];\n\t\t\t\t\t\tstartOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n\t\t\t\t\t}\n\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1 ) {\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\n\t\t\t\t\t\tif(mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\t\t\tnewPanPos = newOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t//\n\t\t\t}\n\n\t\t\tif(axis === 'x') {\n\n\t\t\t\tif(newMainScrollPos !== undefined) {\n\t\t\t\t\t_moveMainScroll(newMainScrollPos, true);\n\t\t\t\t\tif(newMainScrollPos === _startMainScrollPos.x) {\n\t\t\t\t\t\t_mainScrollShifted = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_mainScrollShifted = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\tif(newPanPos !== undefined) {\n\t\t\t\t\t\t_panOffset.x = newPanPos;\n\t\t\t\t\t} else if(!_mainScrollShifted) {\n\t\t\t\t\t\t_panOffset.x += delta.x * panFriction;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn newMainScrollPos !== undefined;\n\t\t\t}\n\n\t\t}\n\n\t\tif(!_mainScrollAnimating) {\n\t\t\t\n\t\t\tif(!_mainScrollShifted) {\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\n\t\t\t\t\t_panOffset[axis] += delta[axis] * panFriction;\n\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t}\n\t\t\n\t},\n\n\t// Pointerdown/touchstart/mousedown handler\n\t_onDragStart = function(e) {\n\n\t\t// Allow dragging only via left mouse button.\n\t\t// As this handler is not added in IE8 - we ignore e.which\n\t\t// \n\t\t// http://www.quirksmode.org/js/events_properties.html\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/event.button\n\t\tif(e.type === 'mousedown' && e.button > 0  ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(_initialZoomRunning) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n\t\t\treturn;\n\t\t}\n\n\t\tif(_preventDefaultEventBehaviour(e, true)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\n\n\t\t_shout('pointerDown');\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\tif(pointerIndex < 0) {\n\t\t\t\tpointerIndex = _currPointers.length;\n\t\t\t}\n\t\t\t_currPointers[pointerIndex] = {x:e.pageX, y:e.pageY, id: e.pointerId};\n\t\t}\n\t\t\n\n\n\t\tvar startPointsList = _getTouchPoints(e),\n\t\t\tnumPoints = startPointsList.length;\n\n\t\t_currentPoints = null;\n\n\t\t_stopAllAnimations();\n\n\t\t// init drag\n\t\tif(!_isDragging || numPoints === 1) {\n\n\t\t\t\n\n\t\t\t_isDragging = _isFirstMove = true;\n\t\t\tframework.bind(window, _upMoveEvents, self);\n\n\t\t\t_isZoomingIn = \n\t\t\t\t_wasOverInitialZoom = \n\t\t\t\t_opacityChanged = \n\t\t\t\t_verticalDragInitiated = \n\t\t\t\t_mainScrollShifted = \n\t\t\t\t_moved = \n\t\t\t\t_isMultitouch = \n\t\t\t\t_zoomStarted = false;\n\n\t\t\t_direction = null;\n\n\t\t\t_shout('firstTouchStart', startPointsList);\n\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\n\t\t\t_currPanDist.x = _currPanDist.y = 0;\n\t\t\t_equalizePoints(_currPoint, startPointsList[0]);\n\t\t\t_equalizePoints(_startPoint, _currPoint);\n\n\t\t\t//_equalizePoints(_startMainScrollPos, _mainScrollPos);\n\t\t\t_startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n\n\t\t\t_posPoints = [{\n\t\t\t\tx: _currPoint.x,\n\t\t\t\ty: _currPoint.y\n\t\t\t}];\n\n\t\t\t_gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime();\n\n\t\t\t//_mainScrollAnimationEnd(true);\n\t\t\t_calculatePanBounds( _currZoomLevel, true );\n\t\t\t\n\t\t\t// Start rendering\n\t\t\t_stopDragUpdateLoop();\n\t\t\t_dragUpdateLoop();\n\t\t\t\n\t\t}\n\n\t\t// init zoom\n\t\tif(!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n\t\t\t_startZoomLevel = _currZoomLevel;\n\t\t\t_zoomStarted = false; // true if zoom changed at least once\n\n\t\t\t_isZooming = _isMultitouch = true;\n\t\t\t_currPanDist.y = _currPanDist.x = 0;\n\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\n\t\t\t_equalizePoints(p, startPointsList[0]);\n\t\t\t_equalizePoints(p2, startPointsList[1]);\n\n\t\t\t_findCenterOfPoints(p, p2, _currCenterPoint);\n\n\t\t\t_midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n\t\t\t_midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n\t\t\t_currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n\t\t}\n\n\n\t},\n\n\t// Pointermove/touchmove/mousemove handler\n\t_onDragMove = function(e) {\n\n\t\te.preventDefault();\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\tif(pointerIndex > -1) {\n\t\t\t\tvar p = _currPointers[pointerIndex];\n\t\t\t\tp.x = e.pageX;\n\t\t\t\tp.y = e.pageY; \n\t\t\t}\n\t\t}\n\n\t\tif(_isDragging) {\n\t\t\tvar touchesList = _getTouchPoints(e);\n\t\t\tif(!_direction && !_moved && !_isZooming) {\n\n\t\t\t\tif(_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n\t\t\t\t\t// if main scroll position is shifted – direction is always horizontal\n\t\t\t\t\t_direction = 'h';\n\t\t\t\t} else {\n\t\t\t\t\tvar diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y);\n\t\t\t\t\t// check the direction of movement\n\t\t\t\t\tif(Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\t\t_direction = diff > 0 ? 'h' : 'v';\n\t\t\t\t\t\t_currentPoints = touchesList;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t_currentPoints = touchesList;\n\t\t\t}\n\t\t}\t\n\t},\n\t// \n\t_renderMovement =  function() {\n\n\t\tif(!_currentPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar numPoints = _currentPoints.length;\n\n\t\tif(numPoints === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t_equalizePoints(p, _currentPoints[0]);\n\n\t\tdelta.x = p.x - _currPoint.x;\n\t\tdelta.y = p.y - _currPoint.y;\n\n\t\tif(_isZooming && numPoints > 1) {\n\t\t\t// Handle behaviour for more than 1 point\n\n\t\t\t_currPoint.x = p.x;\n\t\t\t_currPoint.y = p.y;\n\t\t\n\t\t\t// check if one of two points changed\n\t\t\tif( !delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_equalizePoints(p2, _currentPoints[1]);\n\n\n\t\t\tif(!_zoomStarted) {\n\t\t\t\t_zoomStarted = true;\n\t\t\t\t_shout('zoomGestureStarted');\n\t\t\t}\n\t\t\t\n\t\t\t// Distance between two points\n\t\t\tvar pointsDistance = _calculatePointsDistance(p,p2);\n\n\t\t\tvar zoomLevel = _calculateZoomLevel(pointsDistance);\n\n\t\t\t// slightly over the of initial zoom level\n\t\t\tif(zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n\t\t\t\t_wasOverInitialZoom = true;\n\t\t\t}\n\n\t\t\t// Apply the friction if zoom level is out of the bounds\n\t\t\tvar zoomFriction = 1,\n\t\t\t\tminZoomLevel = _getMinZoomLevel(),\n\t\t\t\tmaxZoomLevel = _getMaxZoomLevel();\n\n\t\t\tif ( zoomLevel < minZoomLevel ) {\n\t\t\t\t\n\t\t\t\tif(_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n\t\t\t\t\t// fade out background if zooming out\n\t\t\t\t\tvar minusDiff = minZoomLevel - zoomLevel;\n\t\t\t\t\tvar percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n\t\t\t\t\t_applyBgOpacity(percent);\n\t\t\t\t\t_shout('onPinchClose', percent);\n\t\t\t\t\t_opacityChanged = true;\n\t\t\t\t} else {\n\t\t\t\t\tzoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n\t\t\t\t\tif(zoomFriction > 1) {\n\t\t\t\t\t\tzoomFriction = 1;\n\t\t\t\t\t}\n\t\t\t\t\tzoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if ( zoomLevel > maxZoomLevel ) {\n\t\t\t\t// 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n\t\t\t\tzoomFriction = (zoomLevel - maxZoomLevel) / ( minZoomLevel * 6 );\n\t\t\t\tif(zoomFriction > 1) {\n\t\t\t\t\tzoomFriction = 1;\n\t\t\t\t}\n\t\t\t\tzoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n\t\t\t}\n\n\t\t\tif(zoomFriction < 0) {\n\t\t\t\tzoomFriction = 0;\n\t\t\t}\n\n\t\t\t// distance between touch points after friction is applied\n\t\t\t_currPointsDistance = pointsDistance;\n\n\t\t\t// _centerPoint - The point in the middle of two pointers\n\t\t\t_findCenterOfPoints(p, p2, _centerPoint);\n\t\t\n\t\t\t// paning with two pointers pressed\n\t\t\t_currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n\t\t\t_currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n\t\t\t_equalizePoints(_currCenterPoint, _centerPoint);\n\n\t\t\t_panOffset.x = _calculatePanOffset('x', zoomLevel);\n\t\t\t_panOffset.y = _calculatePanOffset('y', zoomLevel);\n\n\t\t\t_isZoomingIn = zoomLevel > _currZoomLevel;\n\t\t\t_currZoomLevel = zoomLevel;\n\t\t\t_applyCurrentZoomPan();\n\n\t\t} else {\n\n\t\t\t// handle behaviour for one point (dragging or panning)\n\n\t\t\tif(!_direction) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_isFirstMove) {\n\t\t\t\t_isFirstMove = false;\n\n\t\t\t\t// subtract drag distance that was used during the detection direction  \n\n\t\t\t\tif( Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\tdelta.x -= _currentPoints[0].x - _startPoint.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif( Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\tdelta.y -= _currentPoints[0].y - _startPoint.y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_currPoint.x = p.x;\n\t\t\t_currPoint.y = p.y;\n\n\t\t\t// do nothing if pointers position hasn't changed\n\t\t\tif(delta.x === 0 && delta.y === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_direction === 'v' && _options.closeOnVerticalDrag) {\n\t\t\t\tif(!_canPan()) {\n\t\t\t\t\t_currPanDist.y += delta.y;\n\t\t\t\t\t_panOffset.y += delta.y;\n\n\t\t\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\n\n\t\t\t\t\t_verticalDragInitiated = true;\n\t\t\t\t\t_shout('onVerticalDrag', opacityRatio);\n\n\t\t\t\t\t_applyBgOpacity(opacityRatio);\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n\t\t\t_moved = true;\n\t\t\t_currPanBounds = self.currItem.bounds;\n\t\t\t\n\t\t\tvar mainScrollChanged = _panOrMoveMainScroll('x', delta);\n\t\t\tif(!mainScrollChanged) {\n\t\t\t\t_panOrMoveMainScroll('y', delta);\n\n\t\t\t\t_roundPoint(_panOffset);\n\t\t\t\t_applyCurrentZoomPan();\n\t\t\t}\n\n\t\t}\n\n\t},\n\t\n\t// Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n\t_onDragRelease = function(e) {\n\n\t\tif(_features.isOldAndroid ) {\n\n\t\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// on Android (v4.1, 4.2, 4.3 & possibly older) \n\t\t\t// ghost mousedown/up event isn't preventable via e.preventDefault,\n\t\t\t// which causes fake mousedown event\n\t\t\t// so we block mousedown/up for 600ms\n\t\t\tif( e.type.indexOf('touch') > -1 ) {\n\t\t\t\tclearTimeout(_oldAndroidTouchEndTimeout);\n\t\t\t\t_oldAndroidTouchEndTimeout = setTimeout(function() {\n\t\t\t\t\t_oldAndroidTouchEndTimeout = 0;\n\t\t\t\t}, 600);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t_shout('pointerUp');\n\n\t\tif(_preventDefaultEventBehaviour(e, false)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tvar releasePoint;\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\t\n\t\t\tif(pointerIndex > -1) {\n\t\t\t\treleasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n\t\t\t\tif(navigator.msPointerEnabled) {\n\t\t\t\t\tvar MSPOINTER_TYPES = {\n\t\t\t\t\t\t4: 'mouse', // event.MSPOINTER_TYPE_MOUSE\n\t\t\t\t\t\t2: 'touch', // event.MSPOINTER_TYPE_TOUCH \n\t\t\t\t\t\t3: 'pen' // event.MSPOINTER_TYPE_PEN\n\t\t\t\t\t};\n\t\t\t\t\treleasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n\t\t\t\t\tif(!releasePoint.type) {\n\t\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tvar touchList = _getTouchPoints(e),\n\t\t\tgestureType,\n\t\t\tnumPoints = touchList.length;\n\n\t\tif(e.type === 'mouseup') {\n\t\t\tnumPoints = 0;\n\t\t}\n\n\t\t// Do nothing if there were 3 touch points or more\n\t\tif(numPoints === 2) {\n\t\t\t_currentPoints = null;\n\t\t\treturn true;\n\t\t}\n\n\t\t// if second pointer released\n\t\tif(numPoints === 1) {\n\t\t\t_equalizePoints(_startPoint, touchList[0]);\n\t\t}\t\t\t\t\n\n\n\t\t// pointer hasn't moved, send \"tap release\" point\n\t\tif(numPoints === 0 && !_direction && !_mainScrollAnimating) {\n\t\t\tif(!releasePoint) {\n\t\t\t\tif(e.type === 'mouseup') {\n\t\t\t\t\treleasePoint = {x: e.pageX, y: e.pageY, type:'mouse'};\n\t\t\t\t} else if(e.changedTouches && e.changedTouches[0]) {\n\t\t\t\t\treleasePoint = {x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY, type:'touch'};\n\t\t\t\t}\t\t\n\t\t\t}\n\n\t\t\t_shout('touchRelease', e, releasePoint);\n\t\t}\n\n\t\t// Difference in time between releasing of two last touch points (zoom gesture)\n\t\tvar releaseTimeDiff = -1;\n\n\t\t// Gesture completed, no pointers left\n\t\tif(numPoints === 0) {\n\t\t\t_isDragging = false;\n\t\t\tframework.unbind(window, _upMoveEvents, self);\n\n\t\t\t_stopDragUpdateLoop();\n\n\t\t\tif(_isZooming) {\n\t\t\t\t// Two points released at the same time\n\t\t\t\treleaseTimeDiff = 0;\n\t\t\t} else if(_lastReleaseTime !== -1) {\n\t\t\t\treleaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n\t\t\t}\n\t\t}\n\t\t_lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\t\t\n\t\tif(releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n\t\t\tgestureType = 'zoom';\n\t\t} else {\n\t\t\tgestureType = 'swipe';\n\t\t}\n\n\t\tif(_isZooming && numPoints < 2) {\n\t\t\t_isZooming = false;\n\n\t\t\t// Only second point released\n\t\t\tif(numPoints === 1) {\n\t\t\t\tgestureType = 'zoomPointerUp';\n\t\t\t}\n\t\t\t_shout('zoomGestureEnded');\n\t\t}\n\n\t\t_currentPoints = null;\n\t\tif(!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n\t\t\t// nothing to animate\n\t\t\treturn;\n\t\t}\n\t\n\t\t_stopAllAnimations();\n\n\t\t\n\t\tif(!_releaseAnimData) {\n\t\t\t_releaseAnimData = _initDragReleaseAnimationData();\n\t\t}\n\t\t\n\t\t_releaseAnimData.calculateSwipeSpeed('x');\n\n\n\t\tif(_verticalDragInitiated) {\n\n\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\n\n\t\t\tif(opacityRatio < _options.verticalDragRange) {\n\t\t\t\tself.close();\n\t\t\t} else {\n\t\t\t\tvar initalPanY = _panOffset.y,\n\t\t\t\t\tinitialBgOpacity = _bgOpacity;\n\n\t\t\t\t_animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function(now) {\n\t\t\t\t\t\n\t\t\t\t\t_panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n\t\t\t\t\t_applyBgOpacity(  (1 - initialBgOpacity) * now + initialBgOpacity );\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t});\n\n\t\t\t\t_shout('onVerticalDrag', 1);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\n\t\t// main scroll \n\t\tif(  (_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n\t\t\tvar itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\t\t\tif(itemChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgestureType = 'zoomPointerUp';\n\t\t}\n\n\t\t// prevent zoom/pan animation when main scroll animation runs\n\t\tif(_mainScrollAnimating) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Complete simple zoom gesture (reset zoom level if it's out of the bounds)  \n\t\tif(gestureType !== 'swipe') {\n\t\t\t_completeZoomGesture();\n\t\t\treturn;\n\t\t}\n\t\n\t\t// Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n\t\tif(!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n\t\t\t_completePanGesture(_releaseAnimData);\n\t\t}\n\t},\n\n\n\t// Returns object with data about gesture\n\t// It's created only once and then reused\n\t_initDragReleaseAnimationData  = function() {\n\t\t// temp local vars\n\t\tvar lastFlickDuration,\n\t\t\ttempReleasePos;\n\n\t\t// s = this\n\t\tvar s = {\n\t\t\tlastFlickOffset: {},\n\t\t\tlastFlickDist: {},\n\t\t\tlastFlickSpeed: {},\n\t\t\tslowDownRatio:  {},\n\t\t\tslowDownRatioReverse:  {},\n\t\t\tspeedDecelerationRatio:  {},\n\t\t\tspeedDecelerationRatioAbs:  {},\n\t\t\tdistanceOffset:  {},\n\t\t\tbackAnimDestination: {},\n\t\t\tbackAnimStarted: {},\n\t\t\tcalculateSwipeSpeed: function(axis) {\n\t\t\t\t\n\n\t\t\t\tif( _posPoints.length > 1) {\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n\t\t\t\t\ttempReleasePos = _posPoints[_posPoints.length-2][axis];\n\t\t\t\t} else {\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n\t\t\t\t\ttempReleasePos = _startPoint[axis];\n\t\t\t\t}\n\t\t\t\ts.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n\t\t\t\ts.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n\t\t\t\tif(s.lastFlickDist[axis] > 20) {\n\t\t\t\t\ts.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n\t\t\t\t} else {\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t}\n\t\t\t\tif( Math.abs(s.lastFlickSpeed[axis]) < 0.1 ) {\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ts.slowDownRatio[axis] = 0.95;\n\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\t\t\t\ts.speedDecelerationRatio[axis] = 1;\n\t\t\t},\n\n\t\t\tcalculateOverBoundsAnimOffset: function(axis, speed) {\n\t\t\t\tif(!s.backAnimStarted[axis]) {\n\n\t\t\t\t\tif(_panOffset[axis] > _currPanBounds.min[axis]) {\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.min[axis];\n\t\t\t\t\t\t\n\t\t\t\t\t} else if(_panOffset[axis] < _currPanBounds.max[axis]) {\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.max[axis];\n\t\t\t\t\t}\n\n\t\t\t\t\tif(s.backAnimDestination[axis] !== undefined) {\n\t\t\t\t\t\ts.slowDownRatio[axis] = 0.7;\n\t\t\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\t\t\t\t\t\tif(s.speedDecelerationRatioAbs[axis] < 0.05) {\n\n\t\t\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t\t\t\ts.backAnimStarted[axis] = true;\n\n\t\t\t\t\t\t\t_animateProp('bounceZoomPan'+axis,_panOffset[axis], \n\t\t\t\t\t\t\t\ts.backAnimDestination[axis], \n\t\t\t\t\t\t\t\tspeed || 300, \n\t\t\t\t\t\t\t\tframework.easing.sine.out, \n\t\t\t\t\t\t\t\tfunction(pos) {\n\t\t\t\t\t\t\t\t\t_panOffset[axis] = pos;\n\t\t\t\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Reduces the speed by slowDownRatio (per 10ms)\n\t\t\tcalculateAnimOffset: function(axis) {\n\t\t\t\tif(!s.backAnimStarted[axis]) {\n\t\t\t\t\ts.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + \n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] - \n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] * s.timeDiff / 10);\n\n\t\t\t\t\ts.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n\t\t\t\t\ts.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n\t\t\t\t\t_panOffset[axis] += s.distanceOffset[axis];\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpanAnimLoop: function() {\n\t\t\t\tif ( _animations.zoomPan ) {\n\t\t\t\t\t_animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n\n\t\t\t\t\ts.now = _getCurrentTime();\n\t\t\t\t\ts.timeDiff = s.now - s.lastNow;\n\t\t\t\t\ts.lastNow = s.now;\n\t\t\t\t\t\n\t\t\t\t\ts.calculateAnimOffset('x');\n\t\t\t\t\ts.calculateAnimOffset('y');\n\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('x');\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('y');\n\n\n\t\t\t\t\tif (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n\n\t\t\t\t\t\t// round pan position\n\t\t\t\t\t\t_panOffset.x = Math.round(_panOffset.x);\n\t\t\t\t\t\t_panOffset.y = Math.round(_panOffset.y);\n\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\n\t\t\t\t\t\t_stopAnimation('zoomPan');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\t\treturn s;\n\t},\n\n\t_completePanGesture = function(animData) {\n\t\t// calculate swipe speed for Y axis (paanning)\n\t\tanimData.calculateSwipeSpeed('y');\n\n\t\t_currPanBounds = self.currItem.bounds;\n\t\t\n\t\tanimData.backAnimDestination = {};\n\t\tanimData.backAnimStarted = {};\n\n\t\t// Avoid acceleration animation if speed is too low\n\t\tif(Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05 ) {\n\t\t\tanimData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0;\n\n\t\t\t// Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n\t\t\tanimData.calculateOverBoundsAnimOffset('x');\n\t\t\tanimData.calculateOverBoundsAnimOffset('y');\n\t\t\treturn true;\n\t\t}\n\n\t\t// Animation loop that controls the acceleration after pan gesture ends\n\t\t_registerStartAnimation('zoomPan');\n\t\tanimData.lastNow = _getCurrentTime();\n\t\tanimData.panAnimLoop();\n\t},\n\n\n\t_finishSwipeMainScrollGesture = function(gestureType, _releaseAnimData) {\n\t\tvar itemChanged;\n\t\tif(!_mainScrollAnimating) {\n\t\t\t_currZoomedItemIndex = _currentItemIndex;\n\t\t}\n\n\n\t\t\n\t\tvar itemsDiff;\n\n\t\tif(gestureType === 'swipe') {\n\t\t\tvar totalShiftDist = _currPoint.x - _startPoint.x,\n\t\t\t\tisFastLastFlick = _releaseAnimData.lastFlickDist.x < 10;\n\n\t\t\t// if container is shifted for more than MIN_SWIPE_DISTANCE, \n\t\t\t// and last flick gesture was in right direction\n\t\t\tif(totalShiftDist > MIN_SWIPE_DISTANCE && \n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20) ) {\n\t\t\t\t// go to prev item\n\t\t\t\titemsDiff = -1;\n\t\t\t} else if(totalShiftDist < -MIN_SWIPE_DISTANCE && \n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20) ) {\n\t\t\t\t// go to next item\n\t\t\t\titemsDiff = 1;\n\t\t\t}\n\t\t}\n\n\t\tvar nextCircle;\n\n\t\tif(itemsDiff) {\n\t\t\t\n\t\t\t_currentItemIndex += itemsDiff;\n\n\t\t\tif(_currentItemIndex < 0) {\n\t\t\t\t_currentItemIndex = _options.loop ? _getNumItems()-1 : 0;\n\t\t\t\tnextCircle = true;\n\t\t\t} else if(_currentItemIndex >= _getNumItems()) {\n\t\t\t\t_currentItemIndex = _options.loop ? 0 : _getNumItems()-1;\n\t\t\t\tnextCircle = true;\n\t\t\t}\n\n\t\t\tif(!nextCircle || _options.loop) {\n\t\t\t\t_indexDiff += itemsDiff;\n\t\t\t\t_currPositionIndex -= itemsDiff;\n\t\t\t\titemChanged = true;\n\t\t\t}\n\t\t\t\n\n\t\t\t\n\t\t}\n\n\t\tvar animateToX = _slideSize.x * _currPositionIndex;\n\t\tvar animateToDist = Math.abs( animateToX - _mainScrollPos.x );\n\t\tvar finishAnimDuration;\n\n\n\t\tif(!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n\t\t\t// \"return to current\" duration, e.g. when dragging from slide 0 to -1\n\t\t\tfinishAnimDuration = 333; \n\t\t} else {\n\t\t\tfinishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? \n\t\t\t\t\t\t\t\t\tanimateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : \n\t\t\t\t\t\t\t\t\t333;\n\n\t\t\tfinishAnimDuration = Math.min(finishAnimDuration, 400);\n\t\t\tfinishAnimDuration = Math.max(finishAnimDuration, 250);\n\t\t}\n\n\t\tif(_currZoomedItemIndex === _currentItemIndex) {\n\t\t\titemChanged = false;\n\t\t}\n\t\t\n\t\t_mainScrollAnimating = true;\n\t\t\n\t\t_shout('mainScrollAnimStart');\n\n\t\t_animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, \n\t\t\t_moveMainScroll,\n\t\t\tfunction() {\n\t\t\t\t_stopAllAnimations();\n\t\t\t\t_mainScrollAnimating = false;\n\t\t\t\t_currZoomedItemIndex = -1;\n\t\t\t\t\n\t\t\t\tif(itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n\t\t\t\t\tself.updateCurrItem();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t_shout('mainScrollAnimComplete');\n\t\t\t}\n\t\t);\n\n\t\tif(itemChanged) {\n\t\t\tself.updateCurrItem(true);\n\t\t}\n\n\t\treturn itemChanged;\n\t},\n\n\t_calculateZoomLevel = function(touchesDistance) {\n\t\treturn  1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n\t},\n\n\t// Resets zoom if it's out of bounds\n\t_completeZoomGesture = function() {\n\t\tvar destZoomLevel = _currZoomLevel,\n\t\t\tminZoomLevel = _getMinZoomLevel(),\n\t\t\tmaxZoomLevel = _getMaxZoomLevel();\n\n\t\tif ( _currZoomLevel < minZoomLevel ) {\n\t\t\tdestZoomLevel = minZoomLevel;\n\t\t} else if ( _currZoomLevel > maxZoomLevel ) {\n\t\t\tdestZoomLevel = maxZoomLevel;\n\t\t}\n\n\t\tvar destOpacity = 1,\n\t\t\tonUpdate,\n\t\t\tinitialOpacity = _bgOpacity;\n\n\t\tif(_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n\t\t\t//_closedByScroll = true;\n\t\t\tself.close();\n\t\t\treturn true;\n\t\t}\n\n\t\tif(_opacityChanged) {\n\t\t\tonUpdate = function(now) {\n\t\t\t\t_applyBgOpacity(  (destOpacity - initialOpacity) * now + initialOpacity );\n\t\t\t};\n\t\t}\n\n\t\tself.zoomTo(destZoomLevel, 0, 200,  framework.easing.cubic.out, onUpdate);\n\t\treturn true;\n\t};\n\n\n_registerModule('Gestures', {\n\tpublicMethods: {\n\n\t\tinitGestures: function() {\n\n\t\t\t// helper function that builds touch/pointer/mouse events\n\t\t\tvar addEventNames = function(pref, down, move, up, cancel) {\n\t\t\t\t_dragStartEvent = pref + down;\n\t\t\t\t_dragMoveEvent = pref + move;\n\t\t\t\t_dragEndEvent = pref + up;\n\t\t\t\tif(cancel) {\n\t\t\t\t\t_dragCancelEvent = pref + cancel;\n\t\t\t\t} else {\n\t\t\t\t\t_dragCancelEvent = '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t_pointerEventEnabled = _features.pointerEvent;\n\t\t\tif(_pointerEventEnabled && _features.touch) {\n\t\t\t\t// we don't need touch events, if browser supports pointer events\n\t\t\t\t_features.touch = false;\n\t\t\t}\n\n\t\t\tif(_pointerEventEnabled) {\n\t\t\t\tif(navigator.msPointerEnabled) {\n\t\t\t\t\t// IE10 pointer events are case-sensitive\n\t\t\t\t\taddEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n\t\t\t\t} else {\n\t\t\t\t\taddEventNames('pointer', 'down', 'move', 'up', 'cancel');\n\t\t\t\t}\n\t\t\t} else if(_features.touch) {\n\t\t\t\taddEventNames('touch', 'start', 'move', 'end', 'cancel');\n\t\t\t\t_likelyTouchDevice = true;\n\t\t\t} else {\n\t\t\t\taddEventNames('mouse', 'down', 'move', 'up');\t\n\t\t\t}\n\n\t\t\t_upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent  + ' ' +  _dragCancelEvent;\n\t\t\t_downEvents = _dragStartEvent;\n\n\t\t\tif(_pointerEventEnabled && !_likelyTouchDevice) {\n\t\t\t\t_likelyTouchDevice = (navigator.maxTouchPoints > 1) || (navigator.msMaxTouchPoints > 1);\n\t\t\t}\n\t\t\t// make variable public\n\t\t\tself.likelyTouchDevice = _likelyTouchDevice; \n\t\t\t\n\t\t\t_globalEventHandlers[_dragStartEvent] = _onDragStart;\n\t\t\t_globalEventHandlers[_dragMoveEvent] = _onDragMove;\n\t\t\t_globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n\t\t\tif(_dragCancelEvent) {\n\t\t\t\t_globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n\t\t\t}\n\n\t\t\t// Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n\t\t\tif(_features.touch) {\n\t\t\t\t_downEvents += ' mousedown';\n\t\t\t\t_upMoveEvents += ' mousemove mouseup';\n\t\t\t\t_globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n\t\t\t\t_globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n\t\t\t\t_globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n\t\t\t}\n\n\t\t\tif(!_likelyTouchDevice) {\n\t\t\t\t// don't allow pan to next slide from zoomed state on Desktop\n\t\t\t\t_options.allowPanToNext = false;\n\t\t\t}\n\t\t}\n\n\t}\n});\n\n\n/*>>gestures*/\n\n/*>>show-hide-transition*/\n/**\n * show-hide-transition.js:\n *\n * Manages initial opening or closing transition.\n *\n * If you're not planning to use transition for gallery at all,\n * you may set options hideAnimationDuration and showAnimationDuration to 0,\n * and just delete startAnimation function.\n * \n */\n\n\nvar _showOrHideTimeout,\n\t_showOrHide = function(item, img, out, completeFn) {\n\n\t\tif(_showOrHideTimeout) {\n\t\t\tclearTimeout(_showOrHideTimeout);\n\t\t}\n\n\t\t_initialZoomRunning = true;\n\t\t_initialContentSet = true;\n\t\t\n\t\t// dimensions of small thumbnail {x:,y:,w:}.\n\t\t// Height is optional, as calculated based on large image.\n\t\tvar thumbBounds; \n\t\tif(item.initialLayout) {\n\t\t\tthumbBounds = item.initialLayout;\n\t\t\titem.initialLayout = null;\n\t\t} else {\n\t\t\tthumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n\t\t}\n\n\t\tvar duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n\t\tvar onComplete = function() {\n\t\t\t_stopAnimation('initialZoom');\n\t\t\tif(!out) {\n\t\t\t\t_applyBgOpacity(1);\n\t\t\t\tif(img) {\n\t\t\t\t\timg.style.display = 'block';\n\t\t\t\t}\n\t\t\t\tframework.addClass(template, 'pswp--animated-in');\n\t\t\t\t_shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n\t\t\t} else {\n\t\t\t\tself.template.removeAttribute('style');\n\t\t\t\tself.bg.removeAttribute('style');\n\t\t\t}\n\n\t\t\tif(completeFn) {\n\t\t\t\tcompleteFn();\n\t\t\t}\n\t\t\t_initialZoomRunning = false;\n\t\t};\n\n\t\t// if bounds aren't provided, just open gallery without animation\n\t\tif(!duration || !thumbBounds || thumbBounds.x === undefined) {\n\n\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\n\n\t\t\t_currZoomLevel = item.initialZoomLevel;\n\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\n\t\t\t_applyCurrentZoomPan();\n\n\t\t\ttemplate.style.opacity = out ? 0 : 1;\n\t\t\t_applyBgOpacity(1);\n\n\t\t\tif(duration) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tonComplete();\n\t\t\t\t}, duration);\n\t\t\t} else {\n\t\t\t\tonComplete();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar startAnimation = function() {\n\t\t\tvar closeWithRaf = _closedByScroll,\n\t\t\t\tfadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity;\n\t\t\t\n\t\t\t// apply hw-acceleration to image\n\t\t\tif(item.miniImg) {\n\t\t\t\titem.miniImg.style.webkitBackfaceVisibility = 'hidden';\n\t\t\t}\n\n\t\t\tif(!out) {\n\t\t\t\t_currZoomLevel = thumbBounds.w / item.w;\n\t\t\t\t_panOffset.x = thumbBounds.x;\n\t\t\t\t_panOffset.y = thumbBounds.y - _initalWindowScrollY;\n\n\t\t\t\tself[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n\t\t\t\t_applyCurrentZoomPan();\n\t\t\t}\n\n\t\t\t_registerStartAnimation('initialZoom');\n\t\t\t\n\t\t\tif(out && !closeWithRaf) {\n\t\t\t\tframework.removeClass(template, 'pswp--animated-in');\n\t\t\t}\n\n\t\t\tif(fadeEverything) {\n\t\t\t\tif(out) {\n\t\t\t\t\tframework[ (closeWithRaf ? 'remove' : 'add') + 'Class' ](template, 'pswp--animate_opacity');\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tframework.addClass(template, 'pswp--animate_opacity');\n\t\t\t\t\t}, 30);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_showOrHideTimeout = setTimeout(function() {\n\n\t\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\n\t\t\t\t\n\n\t\t\t\tif(!out) {\n\n\t\t\t\t\t// \"in\" animation always uses CSS transitions (instead of rAF).\n\t\t\t\t\t// CSS transition work faster here, \n\t\t\t\t\t// as developer may also want to animate other things, \n\t\t\t\t\t// like ui on top of sliding area, which can be animated just via CSS\n\t\t\t\t\t\n\t\t\t\t\t_currZoomLevel = item.initialZoomLevel;\n\t\t\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t_applyBgOpacity(1);\n\n\t\t\t\t\tif(fadeEverything) {\n\t\t\t\t\t\ttemplate.style.opacity = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_applyBgOpacity(1);\n\t\t\t\t\t}\n\n\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\n\t\t\t\t} else {\n\n\t\t\t\t\t// \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n\t\t\t\t\tvar destZoomLevel = thumbBounds.w / item.w,\n\t\t\t\t\t\tinitialPanOffset = {\n\t\t\t\t\t\t\tx: _panOffset.x,\n\t\t\t\t\t\t\ty: _panOffset.y\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitialZoomLevel = _currZoomLevel,\n\t\t\t\t\t\tinitalBgOpacity = _bgOpacity,\n\t\t\t\t\t\tonUpdate = function(now) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(now === 1) {\n\t\t\t\t\t\t\t\t_currZoomLevel = destZoomLevel;\n\t\t\t\t\t\t\t\t_panOffset.x = thumbBounds.x;\n\t\t\t\t\t\t\t\t_panOffset.y = thumbBounds.y  - _currentWindowScrollY;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n\t\t\t\t\t\t\t\t_panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n\t\t\t\t\t\t\t\t_panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\tif(fadeEverything) {\n\t\t\t\t\t\t\t\ttemplate.style.opacity = 1 - now;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_applyBgOpacity( initalBgOpacity - now * initalBgOpacity );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\tif(closeWithRaf) {\n\t\t\t\t\t\t_animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonUpdate(1);\n\t\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t}, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n\t\t\t\t\t// create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n\t\t\t\t\t// Which avoids lag at the beginning of scale transition.\n\t\t};\n\t\tstartAnimation();\n\n\t\t\n\t};\n\n/*>>show-hide-transition*/\n\n/*>>items-controller*/\n/**\n*\n* Controller manages gallery items, their dimensions, and their content.\n* \n*/\n\nvar _items,\n\t_tempPanAreaSize = {},\n\t_imagesToAppendPool = [],\n\t_initialContentSet,\n\t_initialZoomRunning,\n\t_controllerDefaultOptions = {\n\t\tindex: 0,\n\t\terrorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n\t\tforceProgressiveLoading: false, // TODO\n\t\tpreload: [1,1],\n\t\tgetNumItemsFn: function() {\n\t\t\treturn _items.length;\n\t\t}\n\t};\n\n\nvar _getItemAt,\n\t_getNumItems,\n\t_initialIsLoop,\n\t_getZeroBounds = function() {\n\t\treturn {\n\t\t\tcenter:{x:0,y:0}, \n\t\t\tmax:{x:0,y:0}, \n\t\t\tmin:{x:0,y:0}\n\t\t};\n\t},\n\t_calculateSingleItemPanBounds = function(item, realPanElementW, realPanElementH ) {\n\t\tvar bounds = item.bounds;\n\n\t\t// position of element when it's centered\n\t\tbounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n\t\tbounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top;\n\n\t\t// maximum pan position\n\t\tbounds.max.x = (realPanElementW > _tempPanAreaSize.x) ? \n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.x - realPanElementW) : \n\t\t\t\t\t\t\tbounds.center.x;\n\t\t\n\t\tbounds.max.y = (realPanElementH > _tempPanAreaSize.y) ? \n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : \n\t\t\t\t\t\t\tbounds.center.y;\n\t\t\n\t\t// minimum pan position\n\t\tbounds.min.x = (realPanElementW > _tempPanAreaSize.x) ? 0 : bounds.center.x;\n\t\tbounds.min.y = (realPanElementH > _tempPanAreaSize.y) ? item.vGap.top : bounds.center.y;\n\t},\n\t_calculateItemSize = function(item, viewportSize, zoomLevel) {\n\n\t\tif (item.src && !item.loadError) {\n\t\t\tvar isInitial = !zoomLevel;\n\t\t\t\n\t\t\tif(isInitial) {\n\t\t\t\tif(!item.vGap) {\n\t\t\t\t\titem.vGap = {top:0,bottom:0};\n\t\t\t\t}\n\t\t\t\t// allows overriding vertical margin for individual items\n\t\t\t\t_shout('parseVerticalMargin', item);\n\t\t\t}\n\n\n\t\t\t_tempPanAreaSize.x = viewportSize.x;\n\t\t\t_tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n\t\t\tif (isInitial) {\n\t\t\t\tvar hRatio = _tempPanAreaSize.x / item.w;\n\t\t\t\tvar vRatio = _tempPanAreaSize.y / item.h;\n\n\t\t\t\titem.fitRatio = hRatio < vRatio ? hRatio : vRatio;\n\t\t\t\t//item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n\t\t\t\tvar scaleMode = _options.scaleMode;\n\n\t\t\t\tif (scaleMode === 'orig') {\n\t\t\t\t\tzoomLevel = 1;\n\t\t\t\t} else if (scaleMode === 'fit') {\n\t\t\t\t\tzoomLevel = item.fitRatio;\n\t\t\t\t}\n\n\t\t\t\tif (zoomLevel > 1) {\n\t\t\t\t\tzoomLevel = 1;\n\t\t\t\t}\n\n\t\t\t\titem.initialZoomLevel = zoomLevel;\n\t\t\t\t\n\t\t\t\tif(!item.bounds) {\n\t\t\t\t\t// reuse bounds object\n\t\t\t\t\titem.bounds = _getZeroBounds(); \n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!zoomLevel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n\t\t\tif (isInitial && zoomLevel === item.initialZoomLevel) {\n\t\t\t\titem.initialPosition = item.bounds.center;\n\t\t\t}\n\n\t\t\treturn item.bounds;\n\t\t} else {\n\t\t\titem.w = item.h = 0;\n\t\t\titem.initialZoomLevel = item.fitRatio = 1;\n\t\t\titem.bounds = _getZeroBounds();\n\t\t\titem.initialPosition = item.bounds.center;\n\n\t\t\t// if it's not image, we return zero bounds (content is not zoomable)\n\t\t\treturn item.bounds;\n\t\t}\n\t\t\n\t},\n\n\t\n\n\n\t_appendImage = function(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n\t\t\n\n\t\tif(item.loadError) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(img) {\n\n\t\t\titem.imageAppended = true;\n\t\t\t_setImageSize(item, img, (item === self.currItem && _renderMaxResolution) );\n\t\t\t\n\t\t\tbaseDiv.appendChild(img);\n\n\t\t\tif(keepPlaceholder) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(item && item.loaded && item.placeholder) {\n\t\t\t\t\t\titem.placeholder.style.display = 'none';\n\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\t},\n\t\n\n\n\t_preloadImage = function(item) {\n\t\titem.loading = true;\n\t\titem.loaded = false;\n\t\tvar img = item.img = framework.createEl('pswp__img', 'img');\n\t\tvar onComplete = function() {\n\t\t\titem.loading = false;\n\t\t\titem.loaded = true;\n\n\t\t\tif(item.loadComplete) {\n\t\t\t\titem.loadComplete(item);\n\t\t\t} else {\n\t\t\t\titem.img = null; // no need to store image object\n\t\t\t}\n\t\t\timg.onload = img.onerror = null;\n\t\t\timg = null;\n\t\t};\n\t\timg.onload = onComplete;\n\t\timg.onerror = function() {\n\t\t\titem.loadError = true;\n\t\t\tonComplete();\n\t\t};\t\t\n\n\t\timg.src = item.src;// + '?a=' + Math.random();\n\n\t\treturn img;\n\t},\n\t_checkForError = function(item, cleanUp) {\n\t\tif(item.src && item.loadError && item.container) {\n\n\t\t\tif(cleanUp) {\n\t\t\t\titem.container.innerHTML = '';\n\t\t\t}\n\n\t\t\titem.container.innerHTML = _options.errorMsg.replace('%url%',  item.src );\n\t\t\treturn true;\n\t\t\t\n\t\t}\n\t},\n\t_setImageSize = function(item, img, maxRes) {\n\t\tif(!item.src) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(!img) {\n\t\t\timg = item.container.lastChild;\n\t\t}\n\n\t\tvar w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n\t\t\th = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\t\t\n\t\tif(item.placeholder && !item.loaded) {\n\t\t\titem.placeholder.style.width = w + 'px';\n\t\t\titem.placeholder.style.height = h + 'px';\n\t\t}\n\n\t\timg.style.width = w + 'px';\n\t\timg.style.height = h + 'px';\n\t},\n\t_appendImagesPool = function() {\n\n\t\tif(_imagesToAppendPool.length) {\n\t\t\tvar poolItem;\n\n\t\t\tfor(var i = 0; i < _imagesToAppendPool.length; i++) {\n\t\t\t\tpoolItem = _imagesToAppendPool[i];\n\t\t\t\tif( poolItem.holder.index === poolItem.index ) {\n\t\t\t\t\t_appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_imagesToAppendPool = [];\n\t\t}\n\t};\n\t\n\n\n_registerModule('Controller', {\n\n\tpublicMethods: {\n\n\t\tlazyLoadItem: function(index) {\n\t\t\tindex = _getLoopedId(index);\n\t\t\tvar item = _getItemAt(index);\n\n\t\t\tif(!item || ((item.loaded || item.loading) && !_itemsNeedUpdate)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_shout('gettingData', index, item);\n\n\t\t\tif (!item.src) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_preloadImage(item);\n\t\t},\n\t\tinitController: function() {\n\t\t\tframework.extend(_options, _controllerDefaultOptions, true);\n\t\t\tself.items = _items = items;\n\t\t\t_getItemAt = self.getItemAt;\n\t\t\t_getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n\n\n\t\t\t_initialIsLoop = _options.loop;\n\t\t\tif(_getNumItems() < 3) {\n\t\t\t\t_options.loop = false; // disable loop if less then 3 items\n\t\t\t}\n\n\t\t\t_listen('beforeChange', function(diff) {\n\n\t\t\t\tvar p = _options.preload,\n\t\t\t\t\tisNext = diff === null ? true : (diff >= 0),\n\t\t\t\t\tpreloadBefore = Math.min(p[0], _getNumItems() ),\n\t\t\t\t\tpreloadAfter = Math.min(p[1], _getNumItems() ),\n\t\t\t\t\ti;\n\n\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex+i);\n\t\t\t\t}\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex-i);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_listen('initialLayout', function() {\n\t\t\t\tself.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n\t\t\t});\n\n\t\t\t_listen('mainScrollAnimComplete', _appendImagesPool);\n\t\t\t_listen('initialZoomInEnd', _appendImagesPool);\n\n\n\n\t\t\t_listen('destroy', function() {\n\t\t\t\tvar item;\n\t\t\t\tfor(var i = 0; i < _items.length; i++) {\n\t\t\t\t\titem = _items[i];\n\t\t\t\t\t// remove reference to DOM elements, for GC\n\t\t\t\t\tif(item.container) {\n\t\t\t\t\t\titem.container = null; \n\t\t\t\t\t}\n\t\t\t\t\tif(item.placeholder) {\n\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.img) {\n\t\t\t\t\t\titem.img = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.preloader) {\n\t\t\t\t\t\titem.preloader = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.loadError) {\n\t\t\t\t\t\titem.loaded = item.loadError = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_imagesToAppendPool = null;\n\t\t\t});\n\t\t},\n\n\n\t\tgetItemAt: function(index) {\n\t\t\tif (index >= 0) {\n\t\t\t\treturn _items[index] !== undefined ? _items[index] : false;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tallowProgressiveImg: function() {\n\t\t\t// 1. Progressive image loading isn't working on webkit/blink \n\t\t\t//    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n\t\t\t//    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n\t\t\t//    \n\t\t\t// 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n\t\t\t//    That's why it's disabled on touch devices (mainly because of swipe transition)\n\t\t\t//    \n\t\t\t// 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n\n\t\t\t// Don't allow progressive loading on non-large touch devices\n\t\t\treturn _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200; \n\t\t\t// 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n\t\t},\n\n\t\tsetContent: function(holder, index) {\n\n\t\t\tif(_options.loop) {\n\t\t\t\tindex = _getLoopedId(index);\n\t\t\t}\n\n\t\t\tvar prevItem = self.getItemAt(holder.index);\n\t\t\tif(prevItem) {\n\t\t\t\tprevItem.container = null;\n\t\t\t}\n\t\n\t\t\tvar item = self.getItemAt(index),\n\t\t\t\timg;\n\t\t\t\n\t\t\tif(!item) {\n\t\t\t\tholder.el.innerHTML = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// allow to override data\n\t\t\t_shout('gettingData', index, item);\n\n\t\t\tholder.index = index;\n\t\t\tholder.item = item;\n\n\t\t\t// base container DIV is created only once for each of 3 holders\n\t\t\tvar baseDiv = item.container = framework.createEl('pswp__zoom-wrap'); \n\n\t\t\t\n\n\t\t\tif(!item.src && item.html) {\n\t\t\t\tif(item.html.tagName) {\n\t\t\t\t\tbaseDiv.appendChild(item.html);\n\t\t\t\t} else {\n\t\t\t\t\tbaseDiv.innerHTML = item.html;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_checkForError(item);\n\n\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\n\t\t\tif(item.src && !item.loadError && !item.loaded) {\n\n\t\t\t\titem.loadComplete = function(item) {\n\n\t\t\t\t\t// gallery closed before image finished loading\n\t\t\t\t\tif(!_isOpen) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// check if holder hasn't changed while image was loading\n\t\t\t\t\tif(holder && holder.index === index ) {\n\t\t\t\t\t\tif( _checkForError(item, true) ) {\n\t\t\t\t\t\t\titem.loadComplete = item.img = null;\n\t\t\t\t\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\t\t\t\t_applyZoomPanToItem(item);\n\n\t\t\t\t\t\t\tif(holder.index === _currentItemIndex) {\n\t\t\t\t\t\t\t\t// recalculate dimensions\n\t\t\t\t\t\t\t\tself.updateCurrZoomItem();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( !item.imageAppended ) {\n\t\t\t\t\t\t\tif(_features.transform && (_mainScrollAnimating || _initialZoomRunning) ) {\n\t\t\t\t\t\t\t\t_imagesToAppendPool.push({\n\t\t\t\t\t\t\t\t\titem:item,\n\t\t\t\t\t\t\t\t\tbaseDiv:baseDiv,\n\t\t\t\t\t\t\t\t\timg:item.img,\n\t\t\t\t\t\t\t\t\tindex:index,\n\t\t\t\t\t\t\t\t\tholder:holder,\n\t\t\t\t\t\t\t\t\tclearPlaceholder:true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// remove preloader & mini-img\n\t\t\t\t\t\t\tif(!_initialZoomRunning && item.placeholder) {\n\t\t\t\t\t\t\t\titem.placeholder.style.display = 'none';\n\t\t\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\titem.loadComplete = null;\n\t\t\t\t\titem.img = null; // no need to store image element after it's added\n\n\t\t\t\t\t_shout('imageLoadComplete', index, item);\n\t\t\t\t};\n\n\t\t\t\tif(framework.features.transform) {\n\t\t\t\t\t\n\t\t\t\t\tvar placeholderClassName = 'pswp__img pswp__img--placeholder'; \n\t\t\t\t\tplaceholderClassName += (item.msrc ? '' : ' pswp__img--placeholder--blank');\n\n\t\t\t\t\tvar placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\t\t\t\t\tif(item.msrc) {\n\t\t\t\t\t\tplaceholder.src = item.msrc;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t_setImageSize(item, placeholder);\n\n\t\t\t\t\tbaseDiv.appendChild(placeholder);\n\t\t\t\t\titem.placeholder = placeholder;\n\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t\n\n\t\t\t\tif(!item.loading) {\n\t\t\t\t\t_preloadImage(item);\n\t\t\t\t}\n\n\n\t\t\t\tif( self.allowProgressiveImg() ) {\n\t\t\t\t\t// just append image\n\t\t\t\t\tif(!_initialContentSet && _features.transform) {\n\t\t\t\t\t\t_imagesToAppendPool.push({\n\t\t\t\t\t\t\titem:item, \n\t\t\t\t\t\t\tbaseDiv:baseDiv, \n\t\t\t\t\t\t\timg:item.img, \n\t\t\t\t\t\t\tindex:index, \n\t\t\t\t\t\t\tholder:holder\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if(item.src && !item.loadError) {\n\t\t\t\t// image object is created every time, due to bugs of image loading & delay when switching images\n\t\t\t\timg = framework.createEl('pswp__img', 'img');\n\t\t\t\timg.style.opacity = 1;\n\t\t\t\timg.src = item.src;\n\t\t\t\t_setImageSize(item, img);\n\t\t\t\t_appendImage(index, item, baseDiv, img, true);\n\t\t\t}\n\t\t\t\n\n\t\t\tif(!_initialContentSet && index === _currentItemIndex) {\n\t\t\t\t_currZoomElementStyle = baseDiv.style;\n\t\t\t\t_showOrHide(item, (img ||item.img) );\n\t\t\t} else {\n\t\t\t\t_applyZoomPanToItem(item);\n\t\t\t}\n\n\t\t\tholder.el.innerHTML = '';\n\t\t\tholder.el.appendChild(baseDiv);\n\t\t},\n\n\t\tcleanSlide: function( item ) {\n\t\t\tif(item.img ) {\n\t\t\t\titem.img.onload = item.img.onerror = null;\n\t\t\t}\n\t\t\titem.loaded = item.loading = item.img = item.imageAppended = false;\n\t\t}\n\n\t}\n});\n\n/*>>items-controller*/\n\n/*>>tap*/\n/**\n * tap.js:\n *\n * Displatches tap and double-tap events.\n * \n */\n\nvar tapTimer,\n\ttapReleasePoint = {},\n\t_dispatchTapEvent = function(origEvent, releasePoint, pointerType) {\t\t\n\t\tvar e = document.createEvent( 'CustomEvent' ),\n\t\t\teDetail = {\n\t\t\t\torigEvent:origEvent, \n\t\t\t\ttarget:origEvent.target, \n\t\t\t\treleasePoint: releasePoint, \n\t\t\t\tpointerType:pointerType || 'touch'\n\t\t\t};\n\n\t\te.initCustomEvent( 'pswpTap', true, true, eDetail );\n\t\torigEvent.target.dispatchEvent(e);\n\t};\n\n_registerModule('Tap', {\n\tpublicMethods: {\n\t\tinitTap: function() {\n\t\t\t_listen('firstTouchStart', self.onTapStart);\n\t\t\t_listen('touchRelease', self.onTapRelease);\n\t\t\t_listen('destroy', function() {\n\t\t\t\ttapReleasePoint = {};\n\t\t\t\ttapTimer = null;\n\t\t\t});\n\t\t},\n\t\tonTapStart: function(touchList) {\n\t\t\tif(touchList.length > 1) {\n\t\t\t\tclearTimeout(tapTimer);\n\t\t\t\ttapTimer = null;\n\t\t\t}\n\t\t},\n\t\tonTapRelease: function(e, releasePoint) {\n\t\t\tif(!releasePoint) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!_moved && !_isMultitouch && !_numAnimations) {\n\t\t\t\tvar p0 = releasePoint;\n\t\t\t\tif(tapTimer) {\n\t\t\t\t\tclearTimeout(tapTimer);\n\t\t\t\t\ttapTimer = null;\n\n\t\t\t\t\t// Check if taped on the same place\n\t\t\t\t\tif ( _isNearbyPoints(p0, tapReleasePoint) ) {\n\t\t\t\t\t\t_shout('doubleTap', p0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(releasePoint.type === 'mouse') {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint, 'mouse');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar clickedTagName = e.target.tagName.toUpperCase();\n\t\t\t\t// avoid double tap delay on buttons and elements that have class pswp__single-tap\n\t\t\t\tif(clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap') ) {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_equalizePoints(tapReleasePoint, p0);\n\n\t\t\t\ttapTimer = setTimeout(function() {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\n\t\t\t\t\ttapTimer = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t}\n\t}\n});\n\n/*>>tap*/\n\n/*>>desktop-zoom*/\n/**\n *\n * desktop-zoom.js:\n *\n * - Binds mousewheel event for paning zoomed image.\n * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n *   (which are used for cursors and zoom icon)\n * - Adds toggleDesktopZoom function.\n * \n */\n\nvar _wheelDelta;\n\t\n_registerModule('DesktopZoom', {\n\n\tpublicMethods: {\n\n\t\tinitDesktopZoom: function() {\n\n\t\t\tif(_oldIE) {\n\t\t\t\t// no zoom for old IE (<=8)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_likelyTouchDevice) {\n\t\t\t\t// if detected hardware touch support, we wait until mouse is used,\n\t\t\t\t// and only then apply desktop-zoom features\n\t\t\t\t_listen('mouseUsed', function() {\n\t\t\t\t\tself.setupDesktopZoom();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.setupDesktopZoom(true);\n\t\t\t}\n\n\t\t},\n\n\t\tsetupDesktopZoom: function(onInit) {\n\n\t\t\t_wheelDelta = {};\n\n\t\t\tvar events = 'wheel mousewheel DOMMouseScroll';\n\t\t\t\n\t\t\t_listen('bindEvents', function() {\n\t\t\t\tframework.bind(template, events,  self.handleMouseWheel);\n\t\t\t});\n\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tif(_wheelDelta) {\n\t\t\t\t\tframework.unbind(template, events, self.handleMouseWheel);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.mouseZoomedIn = false;\n\n\t\t\tvar hasDraggingClass,\n\t\t\t\tupdateZoomable = function() {\n\t\t\t\t\tif(self.mouseZoomedIn) {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoomed-in');\n\t\t\t\t\t\tself.mouseZoomedIn = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(_currZoomLevel < 1) {\n\t\t\t\t\t\tframework.addClass(template, 'pswp--zoom-allowed');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoom-allowed');\n\t\t\t\t\t}\n\t\t\t\t\tremoveDraggingClass();\n\t\t\t\t},\n\t\t\t\tremoveDraggingClass = function() {\n\t\t\t\t\tif(hasDraggingClass) {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--dragging');\n\t\t\t\t\t\thasDraggingClass = false;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t_listen('resize' , updateZoomable);\n\t\t\t_listen('afterChange' , updateZoomable);\n\t\t\t_listen('pointerDown', function() {\n\t\t\t\tif(self.mouseZoomedIn) {\n\t\t\t\t\thasDraggingClass = true;\n\t\t\t\t\tframework.addClass(template, 'pswp--dragging');\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('pointerUp', removeDraggingClass);\n\n\t\t\tif(!onInit) {\n\t\t\t\tupdateZoomable();\n\t\t\t}\n\t\t\t\n\t\t},\n\n\t\thandleMouseWheel: function(e) {\n\n\t\t\tif(_currZoomLevel <= self.currItem.fitRatio) {\n\t\t\t\tif( _options.modal ) {\n\n\t\t\t\t\tif (!_options.closeOnScroll || _numAnimations || _isDragging) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t} else if(_transformKey && Math.abs(e.deltaY) > 2) {\n\t\t\t\t\t\t// close PhotoSwipe\n\t\t\t\t\t\t// if browser supports transforms & scroll changed enough\n\t\t\t\t\t\t_closedByScroll = true;\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// allow just one event to fire\n\t\t\te.stopPropagation();\n\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n\t\t\t_wheelDelta.x = 0;\n\n\t\t\tif('deltaX' in e) {\n\t\t\t\tif(e.deltaMode === 1 /* DOM_DELTA_LINE */) {\n\t\t\t\t\t// 18 - average line height\n\t\t\t\t\t_wheelDelta.x = e.deltaX * 18;\n\t\t\t\t\t_wheelDelta.y = e.deltaY * 18;\n\t\t\t\t} else {\n\t\t\t\t\t_wheelDelta.x = e.deltaX;\n\t\t\t\t\t_wheelDelta.y = e.deltaY;\n\t\t\t\t}\n\t\t\t} else if('wheelDelta' in e) {\n\t\t\t\tif(e.wheelDeltaX) {\n\t\t\t\t\t_wheelDelta.x = -0.16 * e.wheelDeltaX;\n\t\t\t\t}\n\t\t\t\tif(e.wheelDeltaY) {\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDeltaY;\n\t\t\t\t} else {\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDelta;\n\t\t\t\t}\n\t\t\t} else if('detail' in e) {\n\t\t\t\t_wheelDelta.y = e.detail;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_calculatePanBounds(_currZoomLevel, true);\n\n\t\t\tvar newPanX = _panOffset.x - _wheelDelta.x,\n\t\t\t\tnewPanY = _panOffset.y - _wheelDelta.y;\n\n\t\t\t// only prevent scrolling in nonmodal mode when not at edges\n\t\t\tif (_options.modal ||\n\t\t\t\t(\n\t\t\t\tnewPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x &&\n\t\t\t\tnewPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y\n\t\t\t\t) ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\t// TODO: use rAF instead of mousewheel?\n\t\t\tself.panTo(newPanX, newPanY);\n\t\t},\n\n\t\ttoggleDesktopZoom: function(centerPoint) {\n\t\t\tcenterPoint = centerPoint || {x:_viewportSize.x/2 + _offset.x, y:_viewportSize.y/2 + _offset.y };\n\n\t\t\tvar doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n\t\t\tvar zoomOut = _currZoomLevel === doubleTapZoomLevel;\n\t\t\t\n\t\t\tself.mouseZoomedIn = !zoomOut;\n\n\t\t\tself.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n\t\t\tframework[ (!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n\t\t}\n\n\t}\n});\n\n\n/*>>desktop-zoom*/\n\n/*>>history*/\n/**\n *\n * history.js:\n *\n * - Back button to close gallery.\n * \n * - Unique URL for each slide: example.com/&pid=1&gid=3\n *   (where PID is picture index, and GID and gallery index)\n *   \n * - Switch URL when slides change.\n * \n */\n\n\nvar _historyDefaultOptions = {\n\thistory: true,\n\tgalleryUID: 1\n};\n\nvar _historyUpdateTimeout,\n\t_hashChangeTimeout,\n\t_hashAnimCheckTimeout,\n\t_hashChangedByScript,\n\t_hashChangedByHistory,\n\t_hashReseted,\n\t_initialHash,\n\t_historyChanged,\n\t_closedFromURL,\n\t_urlChangedOnce,\n\t_windowLoc,\n\n\t_supportsPushState,\n\n\t_getHash = function() {\n\t\treturn _windowLoc.hash.substring(1);\n\t},\n\t_cleanHistoryTimeouts = function() {\n\n\t\tif(_historyUpdateTimeout) {\n\t\t\tclearTimeout(_historyUpdateTimeout);\n\t\t}\n\n\t\tif(_hashAnimCheckTimeout) {\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\n\t\t}\n\t},\n\n\t// pid - Picture index\n\t// gid - Gallery index\n\t_parseItemIndexFromURL = function() {\n\t\tvar hash = _getHash(),\n\t\t\tparams = {};\n\n\t\tif(hash.length < 5) { // pid=1\n\t\t\treturn params;\n\t\t}\n\n\t\tvar i, vars = hash.split('&');\n\t\tfor (i = 0; i < vars.length; i++) {\n\t\t\tif(!vars[i]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar pair = vars[i].split('=');\t\n\t\t\tif(pair.length < 2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparams[pair[0]] = pair[1];\n\t\t}\n\t\tif(_options.galleryPIDs) {\n\t\t\t// detect custom pid in hash and search for it among the items collection\n\t\t\tvar searchfor = params.pid;\n\t\t\tparams.pid = 0; // if custom pid cannot be found, fallback to the first item\n\t\t\tfor(i = 0; i < _items.length; i++) {\n\t\t\t\tif(_items[i].pid === searchfor) {\n\t\t\t\t\tparams.pid = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tparams.pid = parseInt(params.pid,10)-1;\n\t\t}\n\t\tif( params.pid < 0 ) {\n\t\t\tparams.pid = 0;\n\t\t}\n\t\treturn params;\n\t},\n\t_updateHash = function() {\n\n\t\tif(_hashAnimCheckTimeout) {\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\n\t\t}\n\n\n\t\tif(_numAnimations || _isDragging) {\n\t\t\t// changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n\t\t\t// that's why we update hash only when no animations running\n\t\t\t_hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(_hashChangedByScript) {\n\t\t\tclearTimeout(_hashChangeTimeout);\n\t\t} else {\n\t\t\t_hashChangedByScript = true;\n\t\t}\n\n\n\t\tvar pid = (_currentItemIndex + 1);\n\t\tvar item = _getItemAt( _currentItemIndex );\n\t\tif(item.hasOwnProperty('pid')) {\n\t\t\t// carry forward any custom pid assigned to the item\n\t\t\tpid = item.pid;\n\t\t}\n\t\tvar newHash = _initialHash + '&'  +  'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n\t\tif(!_historyChanged) {\n\t\t\tif(_windowLoc.hash.indexOf(newHash) === -1) {\n\t\t\t\t_urlChangedOnce = true;\n\t\t\t}\n\t\t\t// first time - add new hisory record, then just replace\n\t\t}\n\n\t\tvar newURL = _windowLoc.href.split('#')[0] + '#' +  newHash;\n\n\t\tif( _supportsPushState ) {\n\n\t\t\tif('#' + newHash !== window.location.hash) {\n\t\t\t\thistory[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n\t\t\t}\n\n\t\t} else {\n\t\t\tif(_historyChanged) {\n\t\t\t\t_windowLoc.replace( newURL );\n\t\t\t} else {\n\t\t\t\t_windowLoc.hash = newHash;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\n\t\t_historyChanged = true;\n\t\t_hashChangeTimeout = setTimeout(function() {\n\t\t\t_hashChangedByScript = false;\n\t\t}, 60);\n\t};\n\n\n\n\t\n\n_registerModule('History', {\n\n\t\n\n\tpublicMethods: {\n\t\tinitHistory: function() {\n\n\t\t\tframework.extend(_options, _historyDefaultOptions, true);\n\n\t\t\tif( !_options.history ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t_windowLoc = window.location;\n\t\t\t_urlChangedOnce = false;\n\t\t\t_closedFromURL = false;\n\t\t\t_historyChanged = false;\n\t\t\t_initialHash = _getHash();\n\t\t\t_supportsPushState = ('pushState' in history);\n\n\n\t\t\tif(_initialHash.indexOf('gid=') > -1) {\n\t\t\t\t_initialHash = _initialHash.split('&gid=')[0];\n\t\t\t\t_initialHash = _initialHash.split('?gid=')[0];\n\t\t\t}\n\t\t\t\n\n\t\t\t_listen('afterChange', self.updateURL);\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tframework.unbind(window, 'hashchange', self.onHashChange);\n\t\t\t});\n\n\n\t\t\tvar returnToOriginal = function() {\n\t\t\t\t_hashReseted = true;\n\t\t\t\tif(!_closedFromURL) {\n\n\t\t\t\t\tif(_urlChangedOnce) {\n\t\t\t\t\t\thistory.back();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif(_initialHash) {\n\t\t\t\t\t\t\t_windowLoc.hash = _initialHash;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (_supportsPushState) {\n\n\t\t\t\t\t\t\t\t// remove hash from url without refreshing it or scrolling to top\n\t\t\t\t\t\t\t\thistory.pushState('', document.title,  _windowLoc.pathname + _windowLoc.search );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_windowLoc.hash = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t_cleanHistoryTimeouts();\n\t\t\t};\n\n\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tif(_closedByScroll) {\n\t\t\t\t\t// if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n\t\t\t\t\t// this is done to keep the scroll position\n\t\t\t\t\treturnToOriginal();\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('destroy', function() {\n\t\t\t\tif(!_hashReseted) {\n\t\t\t\t\treturnToOriginal();\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('firstUpdate', function() {\n\t\t\t\t_currentItemIndex = _parseItemIndexFromURL().pid;\n\t\t\t});\n\n\t\t\t\n\n\t\t\t\n\t\t\tvar index = _initialHash.indexOf('pid=');\n\t\t\tif(index > -1) {\n\t\t\t\t_initialHash = _initialHash.substring(0, index);\n\t\t\t\tif(_initialHash.slice(-1) === '&') {\n\t\t\t\t\t_initialHash = _initialHash.slice(0, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tif(_isOpen) { // hasn't destroyed yet\n\t\t\t\t\tframework.bind(window, 'hashchange', self.onHashChange);\n\t\t\t\t}\n\t\t\t}, 40);\n\t\t\t\n\t\t},\n\t\tonHashChange: function() {\n\n\t\t\tif(_getHash() === _initialHash) {\n\n\t\t\t\t_closedFromURL = true;\n\t\t\t\tself.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!_hashChangedByScript) {\n\n\t\t\t\t_hashChangedByHistory = true;\n\t\t\t\tself.goTo( _parseItemIndexFromURL().pid );\n\t\t\t\t_hashChangedByHistory = false;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tupdateURL: function() {\n\n\t\t\t// Delay the update of URL, to avoid lag during transition, \n\t\t\t// and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n\t\t\t\n\t\t\t_cleanHistoryTimeouts();\n\t\t\t\n\n\t\t\tif(_hashChangedByHistory) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!_historyChanged) {\n\t\t\t\t_updateHash(); // first time\n\t\t\t} else {\n\t\t\t\t_historyUpdateTimeout = setTimeout(_updateHash, 800);\n\t\t\t}\n\t\t}\n\t\n\t}\n});\n\n\n/*>>history*/\n\tframework.extend(self, publicMethods); };\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","export default class Polyfill {\r\n    static removeHtmlElementNode(element:any) {\r\n            if (element.parentNode !== null)\r\n                element.parentNode.removeChild(element);\r\n    }\r\n\r\n    static createNewEvent(eventName:string, data:any) {\r\n        let event = null;\r\n\r\n        if(typeof(CustomEvent) === 'function') {\r\n            event = new CustomEvent(eventName, {detail: data});\r\n        }else{\r\n            event = document.createEvent('Event');\r\n            event.initEvent(eventName, true, true);\r\n            // @ts-ignore\r\n            event.detail = data;\r\n        }\r\n        return event;\r\n    }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./eventgallery.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}